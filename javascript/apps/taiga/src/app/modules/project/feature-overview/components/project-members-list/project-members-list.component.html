<!--
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.

Copyright (c) 2021-present Kaleidos Ventures SL
-->

<ng-container *transloco="let t">
  <ul
    class="member-list"
    *ngIf="members.length">
    <li
      *ngFor="
        let member of members;
        trackBy: trackById.bind(this);
        let i = index
      "
      [class.pending-state]="
        animationPendingState && getUser(member).username === user?.username
      "
      [class.animation-first-state]="
        animationFirstState && getUser(member).username === user?.username
      "
      [class.animation-two-state]="
        animationSecondState && getUser(member).username === user?.username
      ">
      <a
        (click)="$event.preventDefault()"
        class="member-link"
        href=""
        [class.pending-member]="isPending(member)">
        <tg-user-card [user]="getUser(member)">
          <div
            member
            class="member-info">
            <div
              class="admin"
              *ngIf="member.role?.isAdmin && !isPending(member)">
              {{ t('commons.roles.admin') }}
            </div>
            <div class="block-end">
              <button
                *ngIf="i === 0 && leaveProject && !isPending(member)"
                [attr.aria-label]="t('project_overview.members.leave')"
                icon="remove-user"
                appearance="tertiary"
                class="leave-button"
                tuiIconButton
                [tuiHint]="t('project_overview.members.leave')"
                type="button"></button>
              <div
                class="pending-msg"
                *ngIf="isPending(member)">
                <tui-svg src="clock"></tui-svg>
                {{ t('project_overview.members.pending') }}
              </div>
              <div
                @fadeInRight
                *ngIf="
                  showAcceptInvitationButton &&
                  getUser(member).username === user?.username
                ">
                <button
                  (click)="acceptInvitationSlug()"
                  class="create-account"
                  data-test="invitation-accept"
                  appearance="secondary"
                  tuiButton>
                  {{ t('project_overview.members.accept') }}
                </button>
              </div>
            </div>
          </div>
        </tg-user-card>
      </a>
    </li>
  </ul>
</ng-container>
