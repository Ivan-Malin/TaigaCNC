!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@taiga-ui/cdk/utils/miscellaneous"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/cdk/utils/focus")):"function"==typeof define&&define.amd?define("@taiga-ui/cdk/observables",["exports","@taiga-ui/cdk/utils/miscellaneous","rxjs","rxjs/operators","@taiga-ui/cdk/utils/focus"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].cdk=e["taiga-ui"].cdk||{},e["taiga-ui"].cdk.observables={}),e["taiga-ui"].cdk.utils.miscellaneous,e.rxjs,e.rxjs.operators,e["taiga-ui"].cdk.utils.focus)}(this,(function(e,t,n,r,i){"use strict";function u(e,t,r){return void 0===r&&(r={}),n.fromEvent(e,t,r)}function o(e){return n.merge(u(e,"mouseup"),u(e,"dragend"))}var a,s,c=function(e,t){this.stage=e,this.event=t};function p(e){return void 0===e&&(e=0),n.pipe(r.switchMapTo(n.timer(e).pipe(r.mapTo(!1),r.startWith(!0))),r.distinctUntilChanged())}var f=function(){function e(e){this.ngZone=e}return e.prototype.call=function(e,t){return this.ngZone.runOutsideAngular((function(){return t.subscribe(e)}))},e}();function l(e){return function(t){return new n.Observable((function(n){return t.subscribe({next:function(t){return e.run((function(){return n.next(t)}))},error:function(t){return e.run((function(){return n.error(t)}))},complete:function(){return e.run((function(){return n.complete()}))}})}))}}function m(e){return function(t){return t.lift(new f(e))}}e.TuiDragState=c,e.dragAndDropFrom=function(e){var i=e.ownerDocument;if(!i)throw new Error("element does not have ownerDocument");return n.concat(u(e,"mousedown").pipe(r.first(),r.map((function(e){return new c(0,e)}))),n.merge(u(i,"mousemove").pipe(r.map((function(e){return new c(1,e)}))),o(i).pipe(r.first(),r.map((function(e){return new c(2,e)})),r.endWith(null))).pipe(r.takeWhile(t.isPresent))).pipe(r.repeat())},e.focusVisibleObservable=function(e){var t=u(e,"blur"),o=e.ownerDocument;if(!o)throw new Error("element does not have ownerDocument");return s&&a||(a=u(o,"mouseup",{capture:!0}).pipe(p(),r.startWith(!1),r.shareReplay(1)),s=u(o,"mousedown",{capture:!0}).pipe(p(),r.startWith(!1),r.shareReplay(1))),n.merge(n.concat(u(e,"focus").pipe(r.take(1)),t.pipe(r.filter((function(){return!i.isNativeFocused(e)})),r.take(1),r.ignoreElements())).pipe(r.repeat(),r.withLatestFrom(s,a,(function(e,t,n){return t||n})),r.filter((function(e){return!e})))).pipe(r.switchMapTo(t.pipe(r.mapTo(!1),r.take(1),r.startWith(!0))),r.distinctUntilChanged())},e.itemsQueryListObservable=function(e){return e.changes.pipe(r.map((function(){return t.getOriginalArrayFromQueryList(e)})),r.startWith(t.getOriginalArrayFromQueryList(e)))},e.mouseDragFinishFrom=o,e.mustBePresent=function(){return r.map((function(e){if(!t.isPresent(e))throw new Error("Value must present");return e}))},e.pressedObservable=function(e){var t=e.ownerDocument;if(!t)throw new Error("element does not have ownerDocument");return u(e,"mousedown").pipe(r.filter((function(e){return e.isTrusted})),r.switchMapTo(o(t).pipe(r.mapTo(!1),r.take(1),r.startWith(!0))))},e.preventDefault=function(){return r.tap((function(e){e.preventDefault()}))},e.tuiIsAlive=p,e.tuiReplayedValueChangesFrom=function(e){return new n.Observable((function(t){if(!e.valueChanges)throw new Error("Control does not have valueChanges");e.valueChanges.pipe(r.startWith(e.value)).subscribe(t)}))},e.tuiZoneOptimized=function(e){return n.pipe(m(e),l(e))},e.tuiZonefree=m,e.tuiZonefull=l,e.typedFromEvent=u,e.watch=function(e){return r.tap((function(){e.markForCheck()}))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-cdk-observables.umd.min.js.map