import { svgNodeFilter } from '@taiga-ui/cdk/constants';
import { isNativeKeyboardFocusable } from './is-native-keyboard-focusable';
/**
 * Finds closest element that can be focused with a keyboard in theory
 *
 * @param initial current HTML element
 * @param prev should it look backwards instead (find item that will be focused with Shift + Tab)
 * @param root top Node limiting the search area
 */
export function getClosestKeyboardFocusable(initial, prev = false, root) {
    if (!root.ownerDocument) {
        return null;
    }
    // Deprecated but ony this overload works in IE
    // Filter must be a function in IE, other modern browsers are compliant to this format
    const treeWalker = root.ownerDocument.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, svgNodeFilter, false);
    treeWalker.currentNode = initial;
    while (prev ? treeWalker.previousNode() : treeWalker.nextNode()) {
        if (treeWalker.currentNode instanceof HTMLElement) {
            initial = treeWalker.currentNode;
        }
        if (isNativeKeyboardFocusable(initial)) {
            return initial;
        }
    }
    return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWNsb3Nlc3Qta2V5Ym9hcmQtZm9jdXNhYmxlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRhaWdhLXVpL2Nkay91dGlscy9mb2N1cy8iLCJzb3VyY2VzIjpbImdldC1jbG9zZXN0LWtleWJvYXJkLWZvY3VzYWJsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDdEQsT0FBTyxFQUFDLHlCQUF5QixFQUFDLE1BQU0sZ0NBQWdDLENBQUM7QUFFekU7Ozs7OztHQU1HO0FBQ0gsTUFBTSxVQUFVLDJCQUEyQixDQUN2QyxPQUFvQixFQUNwQixPQUFnQixLQUFLLEVBQ3JCLElBQVU7SUFFVixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtRQUNyQixPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQsK0NBQStDO0lBQy9DLHNGQUFzRjtJQUN0RixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUNsRCxJQUFJLEVBQ0osVUFBVSxDQUFDLFlBQVksRUFDdkIsYUFBYSxFQUNiLEtBQUssQ0FDUixDQUFDO0lBRUYsVUFBVSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7SUFFakMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxFQUFFO1FBQzdELElBQUksVUFBVSxDQUFDLFdBQVcsWUFBWSxXQUFXLEVBQUU7WUFDL0MsT0FBTyxHQUFHLFVBQVUsQ0FBQyxXQUFXLENBQUM7U0FDcEM7UUFFRCxJQUFJLHlCQUF5QixDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ3BDLE9BQU8sT0FBTyxDQUFDO1NBQ2xCO0tBQ0o7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtzdmdOb2RlRmlsdGVyfSBmcm9tICdAdGFpZ2EtdWkvY2RrL2NvbnN0YW50cyc7XG5pbXBvcnQge2lzTmF0aXZlS2V5Ym9hcmRGb2N1c2FibGV9IGZyb20gJy4vaXMtbmF0aXZlLWtleWJvYXJkLWZvY3VzYWJsZSc7XG5cbi8qKlxuICogRmluZHMgY2xvc2VzdCBlbGVtZW50IHRoYXQgY2FuIGJlIGZvY3VzZWQgd2l0aCBhIGtleWJvYXJkIGluIHRoZW9yeVxuICpcbiAqIEBwYXJhbSBpbml0aWFsIGN1cnJlbnQgSFRNTCBlbGVtZW50XG4gKiBAcGFyYW0gcHJldiBzaG91bGQgaXQgbG9vayBiYWNrd2FyZHMgaW5zdGVhZCAoZmluZCBpdGVtIHRoYXQgd2lsbCBiZSBmb2N1c2VkIHdpdGggU2hpZnQgKyBUYWIpXG4gKiBAcGFyYW0gcm9vdCB0b3AgTm9kZSBsaW1pdGluZyB0aGUgc2VhcmNoIGFyZWFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3Nlc3RLZXlib2FyZEZvY3VzYWJsZShcbiAgICBpbml0aWFsOiBIVE1MRWxlbWVudCxcbiAgICBwcmV2OiBib29sZWFuID0gZmFsc2UsXG4gICAgcm9vdDogTm9kZSxcbik6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgaWYgKCFyb290Lm93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gRGVwcmVjYXRlZCBidXQgb255IHRoaXMgb3ZlcmxvYWQgd29ya3MgaW4gSUVcbiAgICAvLyBGaWx0ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIGluIElFLCBvdGhlciBtb2Rlcm4gYnJvd3NlcnMgYXJlIGNvbXBsaWFudCB0byB0aGlzIGZvcm1hdFxuICAgIGNvbnN0IHRyZWVXYWxrZXIgPSByb290Lm93bmVyRG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgICAgcm9vdCxcbiAgICAgICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsXG4gICAgICAgIHN2Z05vZGVGaWx0ZXIsXG4gICAgICAgIGZhbHNlLFxuICAgICk7XG5cbiAgICB0cmVlV2Fsa2VyLmN1cnJlbnROb2RlID0gaW5pdGlhbDtcblxuICAgIHdoaWxlIChwcmV2ID8gdHJlZVdhbGtlci5wcmV2aW91c05vZGUoKSA6IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgICBpZiAodHJlZVdhbGtlci5jdXJyZW50Tm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBpbml0aWFsID0gdHJlZVdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc05hdGl2ZUtleWJvYXJkRm9jdXNhYmxlKGluaXRpYWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuIl19