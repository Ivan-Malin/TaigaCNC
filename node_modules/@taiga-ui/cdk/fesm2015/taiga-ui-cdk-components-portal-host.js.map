{"version":3,"file":"taiga-ui-cdk-components-portal-host.js","sources":["ng://@taiga-ui/cdk/components/portal-host/portal.service.ts","ng://@taiga-ui/cdk/components/portal-host/portal-host.component.ts","ng://@taiga-ui/cdk/components/portal-host/portal-host.module.ts","ng://@taiga-ui/cdk/components/portal-host/taiga-ui-cdk-components-portal-host.ts"],"sourcesContent":["import {\n    ComponentFactory,\n    ComponentRef,\n    EmbeddedViewRef,\n    Injectable,\n    Injector,\n    TemplateRef,\n} from '@angular/core';\nimport {TuiPortalHostComponent} from './portal-host.component';\n\nconst NO_HOST = 'Portals cannot be used without TuiPortalHostComponent';\n\n/**\n * Service for displaying portals\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class TuiPortalService {\n    private host?: TuiPortalHostComponent;\n\n    private get safeHost(): TuiPortalHostComponent {\n        if (!this.host) {\n            throw new Error(NO_HOST);\n        }\n\n        return this.host;\n    }\n\n    attach(host: TuiPortalHostComponent) {\n        this.host = host;\n    }\n\n    add<C>(componentFactory: ComponentFactory<C>, injector: Injector): ComponentRef<C> {\n        return this.safeHost.addComponentChild(componentFactory, injector);\n    }\n\n    remove<C>({hostView}: ComponentRef<C>) {\n        hostView.destroy();\n    }\n\n    addTemplate<C>(templateRef: TemplateRef<C>, context?: C): EmbeddedViewRef<C> {\n        return this.safeHost.addTemplateChild(templateRef, context);\n    }\n\n    removeTemplate<C>(viewRef: EmbeddedViewRef<C>) {\n        viewRef.destroy();\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ComponentFactory,\n    ComponentRef,\n    ElementRef,\n    EmbeddedViewRef,\n    Inject,\n    Injector,\n    TemplateRef,\n    ViewChild,\n    ViewContainerRef,\n} from '@angular/core';\nimport {TuiPortalService} from './portal.service';\n\nconst BLANK_CLIENT_RECT: ClientRect = {\n    bottom: 0,\n    height: 0,\n    left: 0,\n    right: 0,\n    top: 0,\n    width: 0,\n};\n\n/**\n * Host element for dynamically created portals, for example using {@link TuiDropdownDirective}.\n */\n@Component({\n    selector: 'tui-portal-host',\n    templateUrl: './portal-host.template.html',\n    styleUrls: ['./portal-host.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiPortalHostComponent {\n    @ViewChild('positionFixedOffset')\n    private readonly positionFixedOffsetRef?: ElementRef<HTMLDivElement>;\n\n    constructor(\n        @Inject(ViewContainerRef)\n        private readonly viewContainerRef: ViewContainerRef,\n        @Inject(ElementRef)\n        private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiPortalService) portalService: TuiPortalService,\n    ) {\n        portalService.attach(this);\n    }\n\n    get clientRect(): ClientRect {\n        return this.elementRef.nativeElement.getBoundingClientRect();\n    }\n\n    addComponentChild<C>(\n        componentFactory: ComponentFactory<C>,\n        injector: Injector,\n    ): ComponentRef<C> {\n        return this.viewContainerRef.createComponent<C>(\n            componentFactory,\n            undefined,\n            Injector.create({\n                parent: injector,\n                providers: [\n                    {\n                        provide: TuiPortalHostComponent,\n                        useValue: this,\n                    },\n                ],\n            }),\n        );\n    }\n\n    addTemplateChild<C>(templateRef: TemplateRef<C>, context?: C): EmbeddedViewRef<C> {\n        return this.viewContainerRef.createEmbeddedView(templateRef, context);\n    }\n\n    fixedPositionOffset(): ClientRect {\n        return this.positionFixedOffsetRef\n            ? this.positionFixedOffsetRef.nativeElement.getBoundingClientRect()\n            : BLANK_CLIENT_RECT;\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {TuiPortalHostComponent} from './portal-host.component';\n\n@NgModule({\n    declarations: [TuiPortalHostComponent],\n    exports: [TuiPortalHostComponent],\n})\nexport class TuiPortalHostModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}