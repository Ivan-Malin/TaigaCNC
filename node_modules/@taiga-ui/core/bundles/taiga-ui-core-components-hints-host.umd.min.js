!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/core/animations"),require("@taiga-ui/core/directives/hint"),require("@taiga-ui/core/services"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@tinkoff/ng-polymorpheus"),require("@ng-web-apis/common"),require("@taiga-ui/core/directives/pointer-hint")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/hints-host",["exports","@angular/core","@taiga-ui/cdk","@taiga-ui/core/animations","@taiga-ui/core/directives/hint","@taiga-ui/core/services","rxjs","rxjs/operators","@angular/common","@tinkoff/ng-polymorpheus","@ng-web-apis/common","@taiga-ui/core/directives/pointer-hint"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].core=t["taiga-ui"].core||{},t["taiga-ui"].core.components=t["taiga-ui"].core.components||{},t["taiga-ui"].core.components["hints-host"]={}),t.ng.core,t.cdk,t["taiga-ui"].core.animations,t["taiga-ui"].core.directives.hint,t["taiga-ui"].core.services,t.rxjs,t.rxjs.operators,t.ng.common,t.ngPolymorpheus,t.common$1,t["taiga-ui"].core.directives["pointer-hint"])}(this,(function(t,e,o,i,r,n,a,s,h,c,d,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function p(t,e,o,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(n<3?r(a):n>3?r(e,o,a):r(e,o))||a);return n>3&&a&&Object.defineProperty(e,o,a),a}function u(t,e){return function(o,i){e(o,i,t)}}var f=function(){function t(t,e,o,i){var r=this;this.elementRef=t,this.changeDetectorRef=o,this.hints=[],e.pipe(s.skip(1),s.takeUntil(i)).subscribe((function(t){r.hints=t,r.changeDetectorRef.detectChanges()}))}return Object.defineProperty(t.prototype,"clientRect",{get:function(){return this.elementRef.nativeElement.getBoundingClientRect()},enumerable:!0,configurable:!0}),t.prototype.onHovered=function(t,e){e instanceof r.TuiHintDirective&&e.componentHovered$.next(t)},t.ctorParameters=function(){return[{type:e.ElementRef,decorators:[{type:e.Inject,args:[e.ElementRef]}]},{type:n.TuiHintService,decorators:[{type:e.Inject,args:[n.TuiHintService]}]},{type:e.ChangeDetectorRef,decorators:[{type:e.Inject,args:[e.ChangeDetectorRef]}]},{type:a.Observable,decorators:[{type:e.Inject,args:[o.TuiDestroyService]}]}]},t=p([e.Component({selector:"tui-hints-host",template:'<tui-hint-box\n    *ngFor="let hint of hints"\n    role="tooltip"\n    [attr.id]="hint.id"\n    [@tuiFadeIn]\n    [mode]="hint.mode"\n    [direction]="hint.direction"\n    [hint]="hint"\n    (tuiHoveredChange)="onHovered($event, hint)"\n>\n    <div polymorpheus-outlet [content]="hint.content">\n        <ng-template let-text>\n            <span class="text">{{text}}</span>\n        </ng-template>\n    </div>\n</tui-hint-box>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,animations:[i.tuiFadeIn],providers:[o.TuiDestroyService],host:{"aria-live":"polite"},styles:[":host{position:fixed;bottom:0;left:0;width:100%;height:0}.text{white-space:pre-wrap}"]}),u(0,e.Inject(e.ElementRef)),u(1,e.Inject(n.TuiHintService)),u(2,e.Inject(e.ChangeDetectorRef)),u(3,e.Inject(o.TuiDestroyService))],t)}(),g=16+8*Math.sqrt(2)/2,m={"top-left":"bottom-left","top-right":"bottom-right","bottom-left":"top-left","bottom-right":"top-right",left:"right",right:"left"},b={"top-left":"top-right","top-right":"top-left","bottom-left":"bottom-right","bottom-right":"bottom-left",left:"right",right:"left"},v=function(){function t(t,e,i,r,n,a,h){var c=this;this.elementRef=r,this.windowRef=n,this.isMobile=a,this.hintsHost=h,this.direction="bottom-left",this.mode=null,t.pipe(o.tuiZonefree(i),s.takeUntil(e)).subscribe((function(){c.calculatePosition()}))}return Object.defineProperty(t.prototype,"isUntouchable",{get:function(){return this.hint instanceof l.TuiPointerHintDirective},enumerable:!0,configurable:!0}),t.prototype.calculatePosition=function(){"overflow"!==this.mode?this.calculateCoordinates():this.setOverflowStyles()},t.prototype.calculateCoordinates=function(){if(this.isMobile)this.calculateMobileCoordinates();else{if(!this.hint)throw new Error("Hint directive is missing");var t=this.hint.getElementClientRect(),e=this.hintsHost.clientRect,i=this.elementRef.nativeElement,r=i.style,n=i.getBoundingClientRect(),a=t.width>2*g,s=["left","right","bottom-left","bottom-right","top-left","top-right"],h=0,c=0,d=this.direction,l=t.top+t.height/2-n.height/2-e.top,p=t.left-n.width-8-e.left,u=t.left+t.width+8-e.left,f=t.bottom+8-e.top,v=t.top-n.height-8-e.top,w=a?t.left-e.left:t.left+t.width/2-g-e.left,y=a?t.left-n.width+t.width-e.left:t.left-n.width+t.width/2+g-e.left;for(s.splice(s.indexOf(d),1);;){switch(d){case"left":h=l,c=p;break;case"right":h=l,c=u;break;case"top-right":h=v,c=w;break;case"top-left":h=v,c=y;break;case"bottom-right":h=f,c=w;break;case"bottom-left":h=f,c=y}var x=h+e.top>8&&h+n.height+8+e.top<this.windowRef.innerHeight,I=c>8&&c+n.width+8+e.left<e.width;if(0===s.length||x&&I)break;d=x?b[d]:m[d],d=s.splice(s.indexOf(d),1)[0]||d}r.top=o.px(h),r.left=o.px(c),i.setAttribute("data-tui-host-direction",d)}},t.prototype.calculateMobileCoordinates=function(){if(!this.hint)throw new Error("Hint directive is missing");var t=this.hint.getElementClientRect(),e=this.hintsHost.clientRect,i=this.elementRef.nativeElement,r=i.style,n=i.getBoundingClientRect(),a=t.top-n.height-8-e.top,s=t.bottom+8-e.top,h=a+e.top>8&&t.top<this.windowRef.innerHeight,c=t.bottom>0&&t.bottom+16+n.height<this.windowRef.innerHeight,d=this.direction.includes("top")&&h||!c?"top":"bottom",l=e.left+t.left+t.width/2-n.width/2,p=Math.max(l+n.width+8>e.right?e.right-8-n.width:l,16);r.left=o.px(p),r.top="top"===d?o.px(a):o.px(s),this.arrow&&(this.arrow.nativeElement.style.left=o.px(t.left<=16&&t.width>32?16:t.left+t.width/2-p-4)),i.setAttribute("data-tui-host-direction",d)},t.prototype.setOverflowStyles=function(){if(!this.hint)throw new Error("Hint directive is missing");var t=this.hint.getElementClientRect(),e=this.elementRef.nativeElement.style;e.top=o.px(t.top-window.innerHeight-12-1),e.left=o.px(t.left-16-1),e.width=o.px(t.width+32+2)},t.ctorParameters=function(){return[{type:a.Observable,decorators:[{type:e.Inject,args:[d.ANIMATION_FRAME]}]},{type:a.Observable,decorators:[{type:e.Inject,args:[o.TuiDestroyService]}]},{type:e.NgZone,decorators:[{type:e.Inject,args:[e.NgZone]}]},{type:e.ElementRef,decorators:[{type:e.Inject,args:[e.ElementRef]}]},{type:Window,decorators:[{type:e.Inject,args:[d.WINDOW]}]},{type:Boolean,decorators:[{type:e.Inject,args:[o.TUI_IS_MOBILE]}]},{type:f,decorators:[{type:e.Inject,args:[f]}]}]},p([e.Input()],t.prototype,"hint",void 0),p([e.Input(),o.tuiDefaultProp()],t.prototype,"direction",void 0),p([e.Input(),e.HostBinding("attr.data-mode"),o.tuiDefaultProp()],t.prototype,"mode",void 0),p([e.ViewChild("arrow")],t.prototype,"arrow",void 0),p([o.tuiPure,e.HostBinding("class._untouchable")],t.prototype,"isUntouchable",null),t=p([e.Component({selector:"tui-hint-box",template:'\x3c!-- @bad TODO: Refactor to use this arrow in all cases --\x3e\n<div *ngIf="isMobile" #arrow class="arrow"></div>\n<div class="tooltip" automation-id="tui-hint-box__tooltip">\n    <ng-content></ng-content>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[o.TuiDestroyService],styles:[":host{position:absolute;top:0;left:0;max-width:288px;min-height:var(--tui-height-m);padding:12px 16px;background:var(--tui-primary);border-radius:var(--tui-radius-l);color:var(--tui-primary-text);box-sizing:border-box}:host .arrow,:host:not([data-mode=overflow]):before{content:'';position:absolute;width:8px;height:8px;border-radius:2px;box-sizing:border-box;background-color:inherit;transform:rotate(45deg)}:host[data-tui-host-direction=top] .arrow{bottom:-4px}:host[data-tui-host-direction=bottom] .arrow{top:-4px}:host[data-tui-host-direction=bottom]:before,:host[data-tui-host-direction=top]:before{display:none}:host[data-tui-host-direction=top-left]:before,:host[data-tui-host-direction=top-right]:before{bottom:-4px}:host[data-tui-host-direction=bottom-left]:before,:host[data-tui-host-direction=bottom-right]:before{top:-4px}:host[data-tui-host-direction=bottom-left]:before,:host[data-tui-host-direction=top-left]:before{right:17.2px}:host[data-tui-host-direction=bottom-right]:before,:host[data-tui-host-direction=top-right]:before{left:17.2px}:host[data-tui-host-direction=left]:before,:host[data-tui-host-direction=right]:before{top:50%;margin-top:-4px}:host[data-tui-host-direction=left]:before{right:-4px}:host[data-tui-host-direction=right]:before{left:-4px}:host[data-mode=error]{background-color:var(--tui-error-fill)}:host[data-mode=onDark],:host[data-mode=overflow]{box-shadow:0 8px 16px rgba(51,51,51,.2);border:1px solid var(--tui-base-03);background-color:var(--tui-base-01);color:var(--tui-text-01)}:host[data-mode=onDark]:before,:host[data-mode=overflow]:before{border:1px solid var(--tui-base-03)}:host[data-mode=onDark][data-tui-host-direction=left]:before,:host[data-mode=overflow][data-tui-host-direction=left]:before{border-left-color:transparent;border-bottom-color:transparent}:host[data-mode=onDark][data-tui-host-direction=right]:before,:host[data-mode=overflow][data-tui-host-direction=right]:before{border-right-color:transparent;border-top-color:transparent}:host[data-mode=onDark][data-tui-host-direction=top-left]:before,:host[data-mode=onDark][data-tui-host-direction=top-right]:before,:host[data-mode=overflow][data-tui-host-direction=top-left]:before,:host[data-mode=overflow][data-tui-host-direction=top-right]:before{border-left-color:transparent;border-top-color:transparent}:host[data-mode=onDark][data-tui-host-direction=bottom-left]:before,:host[data-mode=onDark][data-tui-host-direction=bottom-right]:before,:host[data-mode=overflow][data-tui-host-direction=bottom-left]:before,:host[data-mode=overflow][data-tui-host-direction=bottom-right]:before{border-right-color:transparent;border-bottom-color:transparent}:host[data-mode=overflow]{max-width:none}:host._untouchable{pointer-events:none}.tooltip{font:var(--tui-font-text-s);word-wrap:break-word}:host[data-mode=overflow] .tooltip{font:inherit}"]}),u(0,e.Inject(d.ANIMATION_FRAME)),u(1,e.Inject(o.TuiDestroyService)),u(2,e.Inject(e.NgZone)),u(3,e.Inject(e.ElementRef)),u(4,e.Inject(d.WINDOW)),u(5,e.Inject(o.TUI_IS_MOBILE)),u(6,e.Inject(f))],t)}(),w=function(){function t(){}return t=p([e.NgModule({imports:[h.CommonModule],declarations:[v],exports:[v]})],t)}(),y=function(){function t(){}return t=p([e.NgModule({imports:[h.CommonModule,c.PolymorpheusModule,o.TuiHoveredModule,w],declarations:[f],exports:[f],entryComponents:[f]})],t)}();t.TuiHintBoxComponent=v,t.TuiHintBoxModule=w,t.TuiHintsHostComponent=f,t.TuiHintsHostModule=y,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-hints-host.umd.min.js.map