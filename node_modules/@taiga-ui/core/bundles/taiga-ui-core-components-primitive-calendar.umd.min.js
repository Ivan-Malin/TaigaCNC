!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@taiga-ui/cdk"),require("@taiga-ui/core/constants"),require("@taiga-ui/core/tokens"),require("rxjs"),require("@angular/common"),require("@taiga-ui/core/directives/color")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/primitive-calendar",["exports","@angular/core","@taiga-ui/cdk","@taiga-ui/core/constants","@taiga-ui/core/tokens","rxjs","@angular/common","@taiga-ui/core/directives/color"],t):t(((e=e||self)["taiga-ui"]=e["taiga-ui"]||{},e["taiga-ui"].core=e["taiga-ui"].core||{},e["taiga-ui"].core.components=e["taiga-ui"].core.components||{},e["taiga-ui"].core.components["primitive-calendar"]={}),e.ng.core,e.cdk,e["taiga-ui"].core.constants,e["taiga-ui"].core.tokens,e.rxjs,e.ng.common,e["taiga-ui"].core.directives.color)}(this,(function(e,t,i,r,a,n,o,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function d(e,t,i,r){var a,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(n<3?a(o):n>3?a(t,i,o):a(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}var s=function(){function e(e){var a=this;this.weekDays$=e,this.disabledItemHandler=i.ALWAYS_FALSE_HANDLER,this.markerHandler=r.TUI_DEFAULT_MARKER_HANDLER,this.value=null,this.hoveredItem=null,this.showAdjacent=!0,this.hoveredItemChange=new t.EventEmitter,this.dayClick=new t.EventEmitter,this.sheet=[],this.pressedItem=null,this.currentMonth=null,this.today=i.TuiDay.currentLocal(),this.toMarkers=function(e,t,i){if(t||i)return null;var r=a.markerHandler(e);return 0===r.length?null:r}}var o,l;return Object.defineProperty(e.prototype,"month",{set:function(e){if(null===this.currentMonth||!this.currentMonth.monthSame(e)){for(var t=[],r=0;r<6;r++){for(var a=[],n=0;n<i.DAYS_IN_WEEK;n++)a.push(i.TuiDay.getDayFromMonthRowCol(e,r,n));t.push(a)}this.sheet=t,this.currentMonth=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingle",{get:function(){return null!==this.value&&(this.value instanceof i.TuiDay||this.value.isSingleDay)},enumerable:!0,configurable:!0}),e.prototype.getItemState=function(e){var t=this.disabledItemHandler,i=this.pressedItem,r=this.hoveredItem;return t(e)?"disabled":null!==i&&i.daySame(e)?"pressed":null!==r&&r.daySame(e)?"hovered":null},e.prototype.getItemRange=function(e){var t=this.value,r=this.hoveredItem;return null===t?null:t instanceof i.TuiDay?t.daySame(e)?"single":null:t.from.daySame(e)&&!t.isSingleDay||null!==r&&r.dayAfter(t.from)&&t.from.daySame(e)&&t.isSingleDay||null!==r&&r.daySame(e)&&r.dayBefore(t.from)&&t.isSingleDay?"start":t.to.daySame(e)&&!t.isSingleDay||null!==r&&r.dayBefore(t.from)&&t.from.daySame(e)&&t.isSingleDay||null!==r&&r.daySame(e)&&r.dayAfter(t.from)&&t.isSingleDay?"end":t.isSingleDay&&t.from.daySame(e)?"single":null},e.prototype.itemIsDisabled=function(e){return(0,this.disabledItemHandler)(e)},e.prototype.itemIsToday=function(e){return this.today.daySame(e)},e.prototype.itemIsUnavailable=function(e){return null===this.currentMonth||!this.currentMonth.monthSame(e)},e.prototype.itemIsInterval=function(e){var t=this.value,r=this.hoveredItem;if(null===t||t instanceof i.TuiDay)return!1;if(!t.isSingleDay)return t.from.daySameOrBefore(e)&&t.to.dayAfter(e);if(null===r)return!1;var a=i.TuiDayRange.sort(t.from,r);return a.from.daySameOrBefore(e)&&a.to.dayAfter(e)},e.prototype.onItemHovered=function(e,t){this.updateHoveredItem(e?t:null)},e.prototype.onItemPressed=function(e,t){this.updatePressedItem(e,t)},e.prototype.onItemClick=function(e,t){this.disabledItemHandler(t)||(e.preventDefault(),this.dayClick.emit(t))},e.prototype.updateHoveredItem=function(e){i.nullableSame(this.hoveredItem,e,(function(e,t){return e.daySame(t)}))||(this.hoveredItem=e,this.hoveredItemChange.emit(e))},e.prototype.updatePressedItem=function(e,t){this.pressedItem=e?t:null},e.ctorParameters=function(){return[{type:n.Observable,decorators:[{type:t.Inject,args:[a.TUI_SHORT_WEEK_DAYS]}]}]},d([t.Input(),i.tuiDefaultProp()],e.prototype,"disabledItemHandler",void 0),d([t.Input(),i.tuiDefaultProp()],e.prototype,"markerHandler",void 0),d([t.Input(),i.tuiDefaultProp()],e.prototype,"value",void 0),d([t.Input(),i.tuiDefaultProp()],e.prototype,"hoveredItem",void 0),d([t.Input(),i.tuiDefaultProp()],e.prototype,"showAdjacent",void 0),d([t.Input(),i.tuiRequiredSetter()],e.prototype,"month",null),d([t.Output()],e.prototype,"hoveredItemChange",void 0),d([t.Output()],e.prototype,"dayClick",void 0),d([t.HostBinding("class._single")],e.prototype,"isSingle",null),e=d([t.Component({selector:"tui-primitive-calendar",template:'<div class="row row_weekday">\n    <div *ngFor="let day of (weekDays$ | async)" class="cell">{{day}}</div>\n</div>\n<div>\n    <div\n        *tuiRepeatTimes="let rowIndex of sheet.length"\n        automation-id="tui-primitive-calendar__row"\n        class="row"\n    >\n        <ng-container *tuiRepeatTimes="let colIndex of sheet[rowIndex].length">\n            <ng-container *tuiLet="sheet[rowIndex][colIndex] as item">\n                <div\n                    *ngIf="!itemIsUnavailable(item) || showAdjacent"\n                    automation-id="tui-primitive-calendar__cell"\n                    class="cell"\n                    [class.cell_today]="itemIsToday(item)"\n                    [class.cell_interval]="itemIsInterval(item)"\n                    [attr.data-tui-element-range]="getItemRange(item)"\n                    [attr.data-tui-element-state]="getItemState(item)"\n                    (tuiHoveredChange)="onItemHovered($event, item)"\n                    (tuiPressedChange)="onItemPressed($event, item)"\n                    (click)="onItemClick($event, item)"\n                >\n                    <div\n                        automation-id="tui-primitive-calendar__item"\n                        class="item"\n                        [class.item_weekend]="colIndex > 4"\n                        [class.item_unavailable]="itemIsUnavailable(item)"\n                    >\n                        {{item.day}}\n                        <div\n                            *ngIf="item | tuiMapper : toMarkers : itemIsToday(item) : !!getItemRange(item) as markers"\n                            class="dots"\n                        >\n                            <div class="dot" [tuiBackground]="markers[0]"></div>\n                            <div\n                                *ngIf="markers.length > 1"\n                                class="dot"\n                                [tuiBackground]="markers[1]"\n                            ></div>\n                        </div>\n                    </div>\n                </div>\n            </ng-container>\n        </ng-container>\n    </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{font:var(--tui-font-text-m);display:block}.row{position:relative;z-index:0;display:flex;justify-content:space-between;height:36px}.item{position:relative;flex:1;line-height:32px;border-radius:var(--tui-radius-m)}.item:after,.item:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.cell{position:relative;display:flex;align-items:center;justify-content:center;width:36px;text-align:center;outline:0;cursor:pointer;background-clip:content-box;box-sizing:border-box;border:2px solid transparent}.cell:before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;border-radius:var(--tui-radius-m)}.cell_today:after{position:absolute;left:50%;transform:translate(-50%,0);content:'';bottom:5px;height:2px;width:12px;border-radius:6px;background-color:var(--tui-text-02)}.cell_interval:before{background:var(--tui-base-02)}:host._single .cell_interval:before{background:var(--tui-secondary-hover)}.cell_interval:not(:last-child):before{right:-36px}.cell_interval:last-child:first-child:before{right:0}.cell_interval:first-child>.item{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.cell_interval:last-child>.item{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.cell_interval>.item{border-radius:0}.cell[data-tui-element-range]:after{background-color:var(--tui-primary-text)}.cell[data-tui-element-range]>.item{color:var(--tui-primary-text)}.cell[data-tui-element-range]>.item:after,.cell[data-tui-element-range]>.item:before{background-color:var(--tui-primary)}.cell[data-tui-element-range][data-tui-element-state=hovered]>.item:after,.cell[data-tui-element-range][data-tui-element-state=hovered]>.item:before{background-color:var(--tui-primary-hover)}.cell[data-tui-element-range][data-tui-element-state=pressed]>.item:after,.cell[data-tui-element-range][data-tui-element-state=pressed]>.item:before{background-color:var(--tui-primary-active)}.cell[data-tui-element-range=end]>.item:before{left:4px}.cell[data-tui-element-range=end]>.item:after{left:-32px;right:100%;transform:translateX(23px) scaleY(.6) scaleX(.4) rotate(45deg)}.cell[data-tui-element-range=start]>.item:before{right:4px}.cell[data-tui-element-range=start]>.item:after{left:100%;right:-32px;transform:translateX(-23px) scaleY(.6) scaleX(.4) rotate(45deg)}.cell[data-tui-element-state=disabled]{pointer-events:none}.cell[data-tui-element-state=disabled]>.item{opacity:.36}.cell[data-tui-element-state=hovered]:hover:not([data-tui-element-range])>.item{background-color:var(--tui-secondary-hover)}.cell[data-tui-element-state=pressed]:hover:not([data-tui-element-range])>.item{background-color:var(--tui-secondary-active)}:host{width:252px}.row{justify-content:flex-start}.row:first-child{justify-content:flex-end}.row_weekday{font:var(--tui-font-text-s);color:var(--tui-text-02);pointer-events:none}.item{display:flex;flex-direction:column}.item_weekend{color:var(--tui-negative)}.item_unavailable{opacity:var(--tui-disabled-opacity)}.dots{display:flex;justify-content:center;margin-top:-8px;padding-bottom:4px}.dot{display:inline-block;width:4px;height:4px;border-radius:100%;margin:0 1px}"]}),(o=0,l=t.Inject(a.TUI_SHORT_WEEK_DAYS),function(e,t){l(e,t,o)})],e)}(),u=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,i.TuiLetModule,i.TuiMapperPipeModule,i.TuiRepeatTimesModule,i.TuiHoveredModule,i.TuiPressedModule,l.TuiColorModule],declarations:[s],exports:[s]})],e)}();e.TuiPrimitiveCalendarComponent=s,e.TuiPrimitiveCalendarModule=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-primitive-calendar.umd.min.js.map