!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core"),require("@ng-web-apis/common"),require("@taiga-ui/cdk"),require("@taiga-ui/core/tokens"),require("rxjs"),require("rxjs/operators"),require("@taiga-ui/core/animations"),require("@taiga-ui/core/providers")):"function"==typeof define&&define.amd?define("@taiga-ui/core/components/scroll-controls",["exports","@angular/common","@angular/core","@ng-web-apis/common","@taiga-ui/cdk","@taiga-ui/core/tokens","rxjs","rxjs/operators","@taiga-ui/core/animations","@taiga-ui/core/providers"],e):e(((t=t||self)["taiga-ui"]=t["taiga-ui"]||{},t["taiga-ui"].core=t["taiga-ui"].core||{},t["taiga-ui"].core.components=t["taiga-ui"].core.components||{},t["taiga-ui"].core.components["scroll-controls"]={}),t.ng.common,t.ng.core,t.common$1,t.cdk,t["taiga-ui"].core.tokens,t.rxjs,t.rxjs.operators,t["taiga-ui"].core.animations,t["taiga-ui"].core.providers)}(this,(function(t,e,r,o,i,n,a,c,l,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function u(t,e,r,o){var i,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(n<3?i(a):n>3?i(e,r,a):i(e,r))||a);return n>3&&a&&Object.defineProperty(e,r,a),a}function p(t,e){return function(r,o){e(r,o,t)}}function h(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,i,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return a}var d=function(){function t(t,e,r,o,n,l,s,u){var p=this;this.container=o,this.documentRef=n,this.windowRef=l,this.elementRef=s,this.viewportScroller=u,this.tuiScrollbar="vertical";var d=this.elementRef.nativeElement,m=i.typedFromEvent(d,"mousedown"),g=i.typedFromEvent(this.documentRef,"mousemove"),f=i.typedFromEvent(this.documentRef,"mouseup");m.pipe(i.preventDefault(),c.switchMap((function(t){var e,r,o,i,n=t.currentTarget.getBoundingClientRect(),a=(e=n,r=t.clientY,o=e.top,i=e.height,(r-o)/i),l=function(t,e){var r=t.clientX,o=e.left,i=e.width;return(r-o)/i}(t,n);return g.pipe(c.map((function(t){return p.getScrolled(t,a,l)})),c.takeUntil(f))})),c.takeUntil(r),i.tuiZonefree(t)).subscribe((function(t){var r=h(t,2),o=r[0],i=r[1],n=h(p.viewportScroller.getScrollPosition(),2),a=n[0],c=n[1];p.container?"vertical"===p.tuiScrollbar?e.setProperty(p.container.nativeElement,"scrollTop",o):e.setProperty(p.container.nativeElement,"scrollLeft",i):p.viewportScroller.scrollToPosition(["vertical"===p.tuiScrollbar?a:i,"vertical"===p.tuiScrollbar?o:c])})),a.merge(a.fromEvent(this.container?this.container.nativeElement:this.windowRef,"scroll"),a.interval(i.POLLING_TIME)).pipe(c.takeUntil(r),i.tuiZonefree(t)).subscribe((function(){"vertical"===p.tuiScrollbar?(e.setStyle(d,"top",100*p.thumb+"%"),e.setStyle(d,"height",100*p.view+"%")):(e.setStyle(d,"left",100*p.thumb+"%"),e.setStyle(d,"width",100*p.view+"%"))}))}return Object.defineProperty(t.prototype,"scrolled",{get:function(){var t=this.computedContainer,e=t.scrollTop,r=t.scrollHeight,o=t.clientHeight,i=t.scrollLeft,n=t.scrollWidth,a=t.clientWidth;return"vertical"===this.tuiScrollbar?e/(r-o):i/(n-a)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"compensation",{get:function(){var t=this.computedContainer,e=t.clientHeight,r=t.scrollHeight,o=t.clientWidth,i=t.scrollWidth;return e*e/r>24&&"vertical"===this.tuiScrollbar||o*o/i>24&&"horizontal"===this.tuiScrollbar?0:"vertical"===this.tuiScrollbar?24/e:24/o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumb",{get:function(){var t=this.compensation||this.view;return this.scrolled*(1-t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){var t=this.computedContainer,e=t.clientHeight,r=t.scrollHeight,o=t.clientWidth,i=t.scrollWidth;return"vertical"===this.tuiScrollbar?Math.ceil(e/r*100)/100:Math.ceil(o/i*100)/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"computedContainer",{get:function(){return this.container?this.container.nativeElement:this.documentRef.documentElement},enumerable:!0,configurable:!0}),t.prototype.getScrolled=function(t,e,r){var o=t.clientY,i=t.clientX,n=this.windowRef,a=n.innerWidth,c=n.innerHeight,l=this.elementRef.nativeElement,s=l.offsetHeight,u=l.offsetWidth,p=this.container?this.container.nativeElement.getBoundingClientRect():{},h=p.top,d=void 0===h?0:h,m=p.left,g=void 0===m?0:m,f=p.width,b=void 0===f?a:f,v=p.height,y=void 0===v?c:v;return[(this.computedContainer.scrollHeight-y)*((o-d-s*e)/(y-s)),(this.computedContainer.scrollWidth-b)*((i-g-u*r)/(b-u))]},t.ctorParameters=function(){return[{type:r.NgZone,decorators:[{type:r.Inject,args:[r.NgZone]}]},{type:r.Renderer2,decorators:[{type:r.Inject,args:[r.Renderer2]}]},{type:a.Observable,decorators:[{type:r.Inject,args:[i.TuiDestroyService]}]},{type:r.ElementRef,decorators:[{type:r.Optional},{type:r.Inject,args:[n.TUI_SCROLL_REF]}]},{type:Document,decorators:[{type:r.Inject,args:[e.DOCUMENT]}]},{type:Window,decorators:[{type:r.Inject,args:[o.WINDOW]}]},{type:r.ElementRef,decorators:[{type:r.Inject,args:[r.ElementRef]}]},{type:e.ViewportScroller,decorators:[{type:r.Inject,args:[e.ViewportScroller]}]}]},u([r.Input()],t.prototype,"tuiScrollbar",void 0),t=u([r.Directive({selector:"[tuiScrollbar]",providers:[i.TuiDestroyService]}),p(0,r.Inject(r.NgZone)),p(1,r.Inject(r.Renderer2)),p(2,r.Inject(i.TuiDestroyService)),p(3,r.Optional()),p(3,r.Inject(n.TUI_SCROLL_REF)),p(4,r.Inject(e.DOCUMENT)),p(5,r.Inject(o.WINDOW)),p(6,r.Inject(r.ElementRef)),p(7,r.Inject(e.ViewportScroller))],t)}();var m=function(){function t(t,e,r,o){var n=this;this.ngZone=t,this.documentRef=e,this.scrollRef=r,this.mode$=o,this.refresh$=a.interval(300).pipe(c.map((function(){return n.scrollbars})),c.startWith([!1,!1]),c.distinctUntilChanged((function(t,e){return t[0]===e[0]&&t[1]===e[1]})),i.tuiZoneOptimized(this.ngZone))}return Object.defineProperty(t.prototype,"scrollbars",{get:function(){var t=this.scrollRef?this.scrollRef.nativeElement:this.documentRef.documentElement,e=t.clientHeight,r=t.scrollHeight,o=t.clientWidth,i=t.scrollWidth;return[Math.ceil(e/r*100)<100,Math.ceil(o/i*100)<100]},enumerable:!0,configurable:!0}),t.ctorParameters=function(){return[{type:r.NgZone,decorators:[{type:r.Inject,args:[r.NgZone]}]},{type:Document,decorators:[{type:r.Inject,args:[e.DOCUMENT]}]},{type:r.ElementRef,decorators:[{type:r.Optional},{type:r.Inject,args:[n.TUI_SCROLL_REF]}]},{type:a.Observable,decorators:[{type:r.Inject,args:[n.TUI_MODE]}]}]},t=u([r.Component({selector:"tui-scroll-controls",template:'<ng-container *tuiLet="refresh$ | async as bars">\n    <div\n        *ngIf="bars[0]"\n        class="bar bar_vertical"\n        [class.bar_has-horizontal]="bars[1]"\n        [@tuiFadeIn]\n    >\n        <div tuiScrollbar="vertical" class="thumb"></div>\n    </div>\n    <div\n        *ngIf="bars[1]"\n        class="bar bar_horizontal"\n        [class.bar_has-vertical]="bars[0]"\n        [@tuiFadeIn]\n    >\n        <div tuiScrollbar="horizontal" class="thumb"></div>\n    </div>\n</ng-container>\n',changeDetection:r.ChangeDetectionStrategy.OnPush,animations:[l.tuiFadeIn],providers:[s.MODE_PROVIDER],host:{"($.data-mode.attr)":"mode$"},styles:[":host{position:-webkit-sticky;position:sticky;top:0;left:0;z-index:100;min-width:calc(100% - 1px);min-height:calc(100% - 1px);float:left;margin-right:calc(-100% + 1px);pointer-events:none}.bar{position:absolute;right:0;bottom:0}.bar_vertical{top:0}.bar_horizontal{left:0}.bar_has-horizontal{bottom:8px}.bar_has-vertical{right:8px}.thumb{transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:100px;border:4px solid transparent;cursor:pointer;pointer-events:auto;background:var(--tui-text-01);background-clip:content-box;box-sizing:border-box;transition-property:width,height;opacity:.2}.thumb:hover{opacity:.24}.thumb:active{opacity:.48}:host[data-mode=onDark] .thumb{background-color:var(--tui-text-01-night)}.bar_vertical .thumb{right:0;width:12px;min-height:24px}.bar_vertical .thumb:active,.bar_vertical:hover .thumb{width:14px}.bar_horizontal .thumb{bottom:0;height:12px;min-width:24px}.bar_horizontal .thumb:active,.bar_horizontal:hover .thumb{height:14px}"]}),p(0,r.Inject(r.NgZone)),p(1,r.Inject(e.DOCUMENT)),p(2,r.Optional()),p(2,r.Inject(n.TUI_SCROLL_REF)),p(3,r.Inject(n.TUI_MODE))],t)}(),g=function(){function t(){}return t=u([r.NgModule({imports:[e.CommonModule,i.TuiLetModule],declarations:[d,m],exports:[m]})],t)}();t.TuiScrollControlsComponent=m,t.TuiScrollControlsModule=g,t.TuiScrollbarDirective=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=taiga-ui-core-components-scroll-controls.umd.min.js.map