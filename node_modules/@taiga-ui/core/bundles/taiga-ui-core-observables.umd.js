(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@taiga-ui/cdk'), require('rxjs/operators')) :
    typeof define === 'function' && define.amd ? define('@taiga-ui/core/observables', ['exports', '@taiga-ui/cdk', 'rxjs/operators'], factory) :
    (global = global || self, factory((global['taiga-ui'] = global['taiga-ui'] || {}, global['taiga-ui'].core = global['taiga-ui'].core || {}, global['taiga-ui'].core.observables = {}), global.cdk, global.rxjs.operators));
}(this, (function (exports, cdk, operators) { 'use strict';

    function smartSearch(getSearchFunction, searchDebouceTimeMs) {
        if (searchDebouceTimeMs === void 0) { searchDebouceTimeMs = 400; }
        return function (source) {
            return source.pipe(operators.debounceTime(searchDebouceTimeMs), operators.scan(function (previousSearched, current) {
                return previousSearched !== '' && current.startsWith(previousSearched)
                    ? previousSearched
                    : current;
            }, ''), operators.distinctUntilChanged(), operators.switchMap(function (value) { return getSearchFunction(value).pipe(operators.startWith(null)); }), operators.startWith(cdk.EMPTY_ARRAY));
        };
    }

    exports.smartSearch = smartSearch;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=taiga-ui-core-observables.umd.js.map
