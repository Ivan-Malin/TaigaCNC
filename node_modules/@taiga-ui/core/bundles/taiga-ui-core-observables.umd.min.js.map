{"version":3,"sources":["ng://@taiga-ui/core/observables/smart-search.ts"],"names":["getSearchFunction","searchDebouceTimeMs","source","pipe","debounceTime","scan","previousSearched","current","startsWith","distinctUntilChanged","switchMap","value","startWith","EMPTY_ARRAY"],"mappings":"ycAYIA,EACAC,GAEA,YAFA,IAAAA,IAAAA,EAAA,KAEO,SAAAC,GACH,OAAAA,EAAOC,KACHC,EAAAA,aAAaH,GACbI,EAAAA,MAAK,SAACC,EAAkBC,GACpB,MAA4B,KAArBD,GAA2BC,EAAQC,WAAWF,GAC/CA,EACAC,IACP,IACHE,EAAAA,uBACAC,EAAAA,WAAU,SAAAC,GAAS,OAAAX,EAAkBW,GAAOR,KAAKS,EAAAA,UAAU,UAC3DA,EAAAA,UAAUC,EAAAA","sourcesContent":["import {EMPTY_ARRAY} from '@taiga-ui/cdk';\nimport {TuiItems} from '@taiga-ui/core/types';\nimport {Observable, OperatorFunction} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    scan,\n    startWith,\n    switchMap,\n} from 'rxjs/operators';\n\nexport function smartSearch<T>(\n    getSearchFunction: (search: string) => Observable<Exclude<TuiItems<T>, null>>,\n    searchDebouceTimeMs: number = 400,\n): OperatorFunction<string, TuiItems<T>> {\n    return source =>\n        source.pipe(\n            debounceTime(searchDebouceTimeMs),\n            scan((previousSearched, current) => {\n                return previousSearched !== '' && current.startsWith(previousSearched)\n                    ? previousSearched\n                    : current;\n            }, ''),\n            distinctUntilChanged(),\n            switchMap(value => getSearchFunction(value).pipe(startWith(null))),\n            startWith(EMPTY_ARRAY),\n        );\n}\n"]}