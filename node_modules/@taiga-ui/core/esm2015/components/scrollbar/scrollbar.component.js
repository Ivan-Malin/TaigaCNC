var TuiScrollbarComponent_1;
import { __decorate, __param } from "tslib";
import { ChangeDetectionStrategy, Component, ContentChild, ElementRef, HostBinding, HostListener, Inject, Input, } from '@angular/core';
import { CSS, USER_AGENT } from '@ng-web-apis/common';
import { getElementOffset, isFirefox, tuiDefaultProp } from '@taiga-ui/cdk';
import { TUI_SCROLL_INTO_VIEW } from '@taiga-ui/core/constants';
import { TUI_SCROLL_REF } from '@taiga-ui/core/tokens';
import { TuiScrollableDirective } from './scrollable.directive';
export function scrollRefFactory({ browserScrollRef, }) {
    return browserScrollRef;
}
// @dynamic
let TuiScrollbarComponent = TuiScrollbarComponent_1 = class TuiScrollbarComponent {
    constructor(
    /**
     * TODO: remove "any" in new TS version; https://github.com/ng-web-apis/common/pull/6
     */
    cssRef, elementRef, userAgent) {
        this.cssRef = cssRef;
        this.elementRef = elementRef;
        this.userAgent = userAgent;
        this.hidden = false;
        this.isLegacy = !this.cssRef.supports('position', 'sticky') ||
            (isFirefox(this.userAgent) && !this.cssRef.supports('scrollbar-width', 'none'));
    }
    get showScrollbars() {
        return !this.hidden && (!this.isLegacy || !!this.scrollable);
    }
    get browserScrollRef() {
        return this.scrollable || this.elementRef;
    }
    get showNative() {
        return this.isLegacy && !this.hidden && !this.scrollable;
    }
    scrollIntoView(event) {
        const { detail } = event;
        const { nativeElement } = this.browserScrollRef;
        event.stopPropagation();
        const { offsetTop, offsetLeft } = getElementOffset(nativeElement, detail);
        nativeElement.scrollTop =
            offsetTop + detail.offsetHeight / 2 - nativeElement.clientHeight / 2;
        nativeElement.scrollLeft =
            offsetLeft + detail.offsetWidth / 2 - nativeElement.clientWidth / 2;
    }
};
TuiScrollbarComponent.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [CSS,] }] },
    { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] },
    { type: String, decorators: [{ type: Inject, args: [USER_AGENT,] }] }
];
__decorate([
    Input(),
    tuiDefaultProp()
], TuiScrollbarComponent.prototype, "hidden", void 0);
__decorate([
    HostBinding('class._container'),
    ContentChild(TuiScrollableDirective, { read: ElementRef })
], TuiScrollbarComponent.prototype, "scrollable", void 0);
__decorate([
    HostBinding('class._legacy')
], TuiScrollbarComponent.prototype, "showNative", null);
__decorate([
    HostListener(TUI_SCROLL_INTO_VIEW, ['$event'])
], TuiScrollbarComponent.prototype, "scrollIntoView", null);
TuiScrollbarComponent = TuiScrollbarComponent_1 = __decorate([
    Component({
        selector: 'tui-scrollbar',
        template: "<tui-scroll-controls *ngIf=\"showScrollbars\"></tui-scroll-controls>\n<div class=\"content\">\n    <ng-content></ng-content>\n</div>\n",
        changeDetection: ChangeDetectionStrategy.OnPush,
        providers: [
            {
                provide: TUI_SCROLL_REF,
                deps: [TuiScrollbarComponent_1],
                useFactory: scrollRefFactory,
            },
        ],
        styles: [":host{position:relative;display:flex;overflow:auto}:host:not(._legacy){scrollbar-width:none;-ms-overflow-style:none}:host:not(._legacy)::-webkit-scrollbar,:host:not(._legacy)::-webkit-scrollbar-thumb{background:0 0;width:0;height:0}:host._legacy{overflow:overlay}@media all and (-webkit-min-device-pixel-ratio:0) and (min-resolution:0.001dpcm){:host._legacy::-webkit-scrollbar,:host._legacy::-webkit-scrollbar-thumb{width:16px;height:16px;border-radius:100px;background-clip:padding-box;border:6px solid transparent}:host._legacy::-webkit-scrollbar{background-color:transparent}:host._legacy::-webkit-scrollbar-thumb{background-color:var(--tui-clear-hover)}:host._legacy::-webkit-scrollbar-thumb:hover{background-color:var(--tui-clear-active)}:host._legacy::-webkit-scrollbar-thumb:active{background-color:var(--tui-text-03)}}:host._container tui-scroll-controls{position:absolute}.content{position:relative;z-index:0;flex:1;flex-basis:auto;width:100%}"]
    }),
    __param(0, Inject(CSS)),
    __param(1, Inject(ElementRef)),
    __param(2, Inject(USER_AGENT))
], TuiScrollbarComponent);
export { TuiScrollbarComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0YWlnYS11aS9jb3JlL2NvbXBvbmVudHMvc2Nyb2xsYmFyLyIsInNvdXJjZXMiOlsic2Nyb2xsYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFDSCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFlBQVksRUFDWixVQUFVLEVBQ1YsV0FBVyxFQUNYLFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxHQUNSLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxHQUFHLEVBQUUsVUFBVSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDcEQsT0FBTyxFQUFDLGdCQUFnQixFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDMUUsT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDOUQsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTlELE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxFQUM3QixnQkFBZ0IsR0FDSTtJQUNwQixPQUFPLGdCQUFnQixDQUFDO0FBQzVCLENBQUM7QUFFRCxXQUFXO0FBY1gsSUFBYSxxQkFBcUIsNkJBQWxDLE1BQWEscUJBQXFCO0lBYTlCO0lBQ0k7O09BRUc7SUFDMkIsTUFBVyxFQUNKLFVBQW1DLEVBQ25DLFNBQWlCO1FBRnhCLFdBQU0sR0FBTixNQUFNLENBQUs7UUFDSixlQUFVLEdBQVYsVUFBVSxDQUF5QjtRQUNuQyxjQUFTLEdBQVQsU0FBUyxDQUFRO1FBaEIxRCxXQUFNLEdBQUcsS0FBSyxDQUFDO1FBTUUsYUFBUSxHQUNyQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUM7WUFDM0MsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQVNqRixDQUFDO0lBRUosSUFBSSxjQUFjO1FBQ2QsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsSUFBSSxnQkFBZ0I7UUFDaEIsT0FBTyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDOUMsQ0FBQztJQUdELElBQUksVUFBVTtRQUNWLE9BQU8sSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQzdELENBQUM7SUFHRCxjQUFjLENBQUMsS0FBK0I7UUFDMUMsTUFBTSxFQUFDLE1BQU0sRUFBQyxHQUFHLEtBQUssQ0FBQztRQUN2QixNQUFNLEVBQUMsYUFBYSxFQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBRTlDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV4QixNQUFNLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBQyxHQUFHLGdCQUFnQixDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUV4RSxhQUFhLENBQUMsU0FBUztZQUNuQixTQUFTLEdBQUcsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLEdBQUcsYUFBYSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7UUFDekUsYUFBYSxDQUFDLFVBQVU7WUFDcEIsVUFBVSxHQUFHLE1BQU0sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQzVFLENBQUM7Q0FDSixDQUFBOzs0Q0FoQ1EsTUFBTSxTQUFDLEdBQUc7WUFDc0MsVUFBVSx1QkFBMUQsTUFBTSxTQUFDLFVBQVU7eUNBQ2pCLE1BQU0sU0FBQyxVQUFVOztBQWhCdEI7SUFGQyxLQUFLLEVBQUU7SUFDUCxjQUFjLEVBQUU7cURBQ0Y7QUFJZjtJQUZDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQztJQUMvQixZQUFZLENBQUMsc0JBQXNCLEVBQUUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFDLENBQUM7eURBQ1I7QUF3QmpEO0lBREMsV0FBVyxDQUFDLGVBQWUsQ0FBQzt1REFHNUI7QUFHRDtJQURDLFlBQVksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDOzJEQWE5QztBQWhEUSxxQkFBcUI7SUFiakMsU0FBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLGVBQWU7UUFDekIsa0pBQXdDO1FBRXhDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO1FBQy9DLFNBQVMsRUFBRTtZQUNQO2dCQUNJLE9BQU8sRUFBRSxjQUFjO2dCQUN2QixJQUFJLEVBQUUsQ0FBQyx1QkFBcUIsQ0FBQztnQkFDN0IsVUFBVSxFQUFFLGdCQUFnQjthQUMvQjtTQUNKOztLQUNKLENBQUM7SUFrQk8sV0FBQSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDWCxXQUFBLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUNsQixXQUFBLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQTtHQW5CZCxxQkFBcUIsQ0FpRGpDO1NBakRZLHFCQUFxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gICAgQ29tcG9uZW50LFxuICAgIENvbnRlbnRDaGlsZCxcbiAgICBFbGVtZW50UmVmLFxuICAgIEhvc3RCaW5kaW5nLFxuICAgIEhvc3RMaXN0ZW5lcixcbiAgICBJbmplY3QsXG4gICAgSW5wdXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtDU1MsIFVTRVJfQUdFTlR9IGZyb20gJ0BuZy13ZWItYXBpcy9jb21tb24nO1xuaW1wb3J0IHtnZXRFbGVtZW50T2Zmc2V0LCBpc0ZpcmVmb3gsIHR1aURlZmF1bHRQcm9wfSBmcm9tICdAdGFpZ2EtdWkvY2RrJztcbmltcG9ydCB7VFVJX1NDUk9MTF9JTlRPX1ZJRVd9IGZyb20gJ0B0YWlnYS11aS9jb3JlL2NvbnN0YW50cyc7XG5pbXBvcnQge1RVSV9TQ1JPTExfUkVGfSBmcm9tICdAdGFpZ2EtdWkvY29yZS90b2tlbnMnO1xuaW1wb3J0IHtUdWlTY3JvbGxhYmxlRGlyZWN0aXZlfSBmcm9tICcuL3Njcm9sbGFibGUuZGlyZWN0aXZlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbFJlZkZhY3Rvcnkoe1xuICAgIGJyb3dzZXJTY3JvbGxSZWYsXG59OiBUdWlTY3JvbGxiYXJDb21wb25lbnQpOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PiB7XG4gICAgcmV0dXJuIGJyb3dzZXJTY3JvbGxSZWY7XG59XG5cbi8vIEBkeW5hbWljXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3R1aS1zY3JvbGxiYXInLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9zY3JvbGxiYXIudGVtcGxhdGUuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vc2Nyb2xsYmFyLnN0eWxlLmxlc3MnXSxcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgcHJvdmlkZTogVFVJX1NDUk9MTF9SRUYsXG4gICAgICAgICAgICBkZXBzOiBbVHVpU2Nyb2xsYmFyQ29tcG9uZW50XSxcbiAgICAgICAgICAgIHVzZUZhY3Rvcnk6IHNjcm9sbFJlZkZhY3RvcnksXG4gICAgICAgIH0sXG4gICAgXSxcbn0pXG5leHBvcnQgY2xhc3MgVHVpU2Nyb2xsYmFyQ29tcG9uZW50IHtcbiAgICBASW5wdXQoKVxuICAgIEB0dWlEZWZhdWx0UHJvcCgpXG4gICAgaGlkZGVuID0gZmFsc2U7XG5cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLl9jb250YWluZXInKVxuICAgIEBDb250ZW50Q2hpbGQoVHVpU2Nyb2xsYWJsZURpcmVjdGl2ZSwge3JlYWQ6IEVsZW1lbnRSZWZ9KVxuICAgIHJlYWRvbmx5IHNjcm9sbGFibGU/OiBFbGVtZW50UmVmPEhUTUxEaXZFbGVtZW50PjtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgaXNMZWdhY3k6IGJvb2xlYW4gPVxuICAgICAgICAhdGhpcy5jc3NSZWYuc3VwcG9ydHMoJ3Bvc2l0aW9uJywgJ3N0aWNreScpIHx8XG4gICAgICAgIChpc0ZpcmVmb3godGhpcy51c2VyQWdlbnQpICYmICF0aGlzLmNzc1JlZi5zdXBwb3J0cygnc2Nyb2xsYmFyLXdpZHRoJywgJ25vbmUnKSk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRPRE86IHJlbW92ZSBcImFueVwiIGluIG5ldyBUUyB2ZXJzaW9uOyBodHRwczovL2dpdGh1Yi5jb20vbmctd2ViLWFwaXMvY29tbW9uL3B1bGwvNlxuICAgICAgICAgKi9cbiAgICAgICAgQEluamVjdChDU1MpIHByaXZhdGUgcmVhZG9ubHkgY3NzUmVmOiBhbnksXG4gICAgICAgIEBJbmplY3QoRWxlbWVudFJlZikgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50UmVmOiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PixcbiAgICAgICAgQEluamVjdChVU0VSX0FHRU5UKSBwcml2YXRlIHJlYWRvbmx5IHVzZXJBZ2VudDogc3RyaW5nLFxuICAgICkge31cblxuICAgIGdldCBzaG93U2Nyb2xsYmFycygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhpZGRlbiAmJiAoIXRoaXMuaXNMZWdhY3kgfHwgISF0aGlzLnNjcm9sbGFibGUpO1xuICAgIH1cblxuICAgIGdldCBicm93c2VyU2Nyb2xsUmVmKCk6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsYWJsZSB8fCB0aGlzLmVsZW1lbnRSZWY7XG4gICAgfVxuXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5fbGVnYWN5JylcbiAgICBnZXQgc2hvd05hdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNMZWdhY3kgJiYgIXRoaXMuaGlkZGVuICYmICF0aGlzLnNjcm9sbGFibGU7XG4gICAgfVxuXG4gICAgQEhvc3RMaXN0ZW5lcihUVUlfU0NST0xMX0lOVE9fVklFVywgWyckZXZlbnQnXSlcbiAgICBzY3JvbGxJbnRvVmlldyhldmVudDogQ3VzdG9tRXZlbnQ8SFRNTEVsZW1lbnQ+KSB7XG4gICAgICAgIGNvbnN0IHtkZXRhaWx9ID0gZXZlbnQ7XG4gICAgICAgIGNvbnN0IHtuYXRpdmVFbGVtZW50fSA9IHRoaXMuYnJvd3NlclNjcm9sbFJlZjtcblxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCB7b2Zmc2V0VG9wLCBvZmZzZXRMZWZ0fSA9IGdldEVsZW1lbnRPZmZzZXQobmF0aXZlRWxlbWVudCwgZGV0YWlsKTtcblxuICAgICAgICBuYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9XG4gICAgICAgICAgICBvZmZzZXRUb3AgKyBkZXRhaWwub2Zmc2V0SGVpZ2h0IC8gMiAtIG5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0IC8gMjtcbiAgICAgICAgbmF0aXZlRWxlbWVudC5zY3JvbGxMZWZ0ID1cbiAgICAgICAgICAgIG9mZnNldExlZnQgKyBkZXRhaWwub2Zmc2V0V2lkdGggLyAyIC0gbmF0aXZlRWxlbWVudC5jbGllbnRXaWR0aCAvIDI7XG4gICAgfVxufVxuIl19