import { __decorate } from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { TUI_FIRST_DAY, TUI_LAST_DAY, tuiDefaultProp, TuiMonth, } from '@taiga-ui/cdk';
var TuiPrimitiveYearMonthPaginationComponent = /** @class */ (function () {
    function TuiPrimitiveYearMonthPaginationComponent() {
        this.value = TuiMonth.currentLocal();
        this.min = TUI_FIRST_DAY;
        this.max = TUI_LAST_DAY;
        this.valueChange = new EventEmitter();
        this.yearClick = new EventEmitter();
    }
    Object.defineProperty(TuiPrimitiveYearMonthPaginationComponent.prototype, "prevMonthDisabled", {
        get: function () {
            return this.value.monthSameOrBefore(this.min);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TuiPrimitiveYearMonthPaginationComponent.prototype, "nextMonthDisabled", {
        get: function () {
            return this.value.monthSameOrAfter(this.max);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TuiPrimitiveYearMonthPaginationComponent.prototype, "oneYear", {
        get: function () {
            return this.min.year === this.max.year;
        },
        enumerable: true,
        configurable: true
    });
    TuiPrimitiveYearMonthPaginationComponent.prototype.onYearClick = function () {
        this.yearClick.next(this.value);
    };
    TuiPrimitiveYearMonthPaginationComponent.prototype.onPrevMonthClick = function () {
        this.appendValueWithLimit({ month: -1 });
    };
    TuiPrimitiveYearMonthPaginationComponent.prototype.onNextMonthClick = function () {
        this.appendValueWithLimit({ month: 1 });
    };
    TuiPrimitiveYearMonthPaginationComponent.prototype.appendValueWithLimit = function (date) {
        var newMonth = this.value.append(date);
        if (this.min.monthSameOrAfter(newMonth)) {
            this.updateValue(this.min);
            return;
        }
        if (this.max.monthSameOrBefore(newMonth)) {
            this.updateValue(this.max);
            return;
        }
        this.updateValue(newMonth);
    };
    TuiPrimitiveYearMonthPaginationComponent.prototype.updateValue = function (value) {
        if (this.value.monthSame(value)) {
            return;
        }
        this.value = value;
        this.valueChange.emit(value);
    };
    __decorate([
        Input(),
        tuiDefaultProp()
    ], TuiPrimitiveYearMonthPaginationComponent.prototype, "value", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], TuiPrimitiveYearMonthPaginationComponent.prototype, "min", void 0);
    __decorate([
        Input(),
        tuiDefaultProp()
    ], TuiPrimitiveYearMonthPaginationComponent.prototype, "max", void 0);
    __decorate([
        Output()
    ], TuiPrimitiveYearMonthPaginationComponent.prototype, "valueChange", void 0);
    __decorate([
        Output()
    ], TuiPrimitiveYearMonthPaginationComponent.prototype, "yearClick", void 0);
    TuiPrimitiveYearMonthPaginationComponent = __decorate([
        Component({
            selector: 'tui-primitive-year-month-pagination',
            template: "<tui-primitive-spin-button\n    [focusable]=\"false\"\n    [leftDisabled]=\"prevMonthDisabled\"\n    [rightDisabled]=\"nextMonthDisabled\"\n    (leftClick)=\"onPrevMonthClick()\"\n    (rightClick)=\"onNextMonthClick()\"\n>\n    {{value | tuiMonth | async}}\n    <ng-container *ngIf=\"oneYear; else button\">\n        {{value.formattedYear}}\n    </ng-container>\n    <ng-template #button>\n        <button\n            automation-id=\"tui-primitive-year-month-pagination__year-button\"\n            tuiLink\n            type=\"button\"\n            [tuiFocusable]=\"false\"\n            (click)=\"onYearClick()\"\n        >\n            {{value.formattedYear}}\n        </button>\n    </ng-template>\n</tui-primitive-spin-button>\n",
            styles: [":host{display:block}"]
        })
    ], TuiPrimitiveYearMonthPaginationComponent);
    return TuiPrimitiveYearMonthPaginationComponent;
}());
export { TuiPrimitiveYearMonthPaginationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpbWl0aXZlLXllYXItbW9udGgtcGFnaW5hdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGFpZ2EtdWkvY29yZS9pbnRlcm5hbC9wcmltaXRpdmUteWVhci1tb250aC1wYWdpbmF0aW9uLyIsInNvdXJjZXMiOlsicHJpbWl0aXZlLXllYXItbW9udGgtcGFnaW5hdGlvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDckUsT0FBTyxFQUNILGFBQWEsRUFDYixZQUFZLEVBQ1osY0FBYyxFQUNkLFFBQVEsR0FHWCxNQUFNLGVBQWUsQ0FBQztBQVF2QjtJQUFBO1FBSUksVUFBSyxHQUFHLFFBQVEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUloQyxRQUFHLEdBQWEsYUFBYSxDQUFDO1FBSTlCLFFBQUcsR0FBYSxZQUFZLENBQUM7UUFHcEIsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBWSxDQUFDO1FBRzNDLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO0lBb0RyRCxDQUFDO0lBbERHLHNCQUFJLHVFQUFpQjthQUFyQjtZQUNJLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEQsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx1RUFBaUI7YUFBckI7WUFDSSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pELENBQUM7OztPQUFBO0lBRUQsc0JBQUksNkRBQU87YUFBWDtZQUNJLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM7UUFDM0MsQ0FBQzs7O09BQUE7SUFFRCw4REFBVyxHQUFYO1FBQ0ksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxtRUFBZ0IsR0FBaEI7UUFDSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFRCxtRUFBZ0IsR0FBaEI7UUFDSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRU8sdUVBQW9CLEdBQTVCLFVBQTZCLElBQWtCO1FBQzNDLElBQU0sUUFBUSxHQUFhLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRW5ELElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUUzQixPQUFPO1NBQ1Y7UUFFRCxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFM0IsT0FBTztTQUNWO1FBRUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU8sOERBQVcsR0FBbkIsVUFBb0IsS0FBZTtRQUMvQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzdCLE9BQU87U0FDVjtRQUVELElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFqRUQ7UUFGQyxLQUFLLEVBQUU7UUFDUCxjQUFjLEVBQUU7MkVBQ2U7SUFJaEM7UUFGQyxLQUFLLEVBQUU7UUFDUCxjQUFjLEVBQUU7eUVBQ2E7SUFJOUI7UUFGQyxLQUFLLEVBQUU7UUFDUCxjQUFjLEVBQUU7eUVBQ1k7SUFHN0I7UUFEQyxNQUFNLEVBQUU7aUZBQzJDO0lBR3BEO1FBREMsTUFBTSxFQUFFOytFQUN3QztJQWxCeEMsd0NBQXdDO1FBTHBELFNBQVMsQ0FBQztZQUNQLFFBQVEsRUFBRSxxQ0FBcUM7WUFDL0MsdXVCQUE4RDs7U0FFakUsQ0FBQztPQUNXLHdDQUF3QyxDQXNFcEQ7SUFBRCwrQ0FBQztDQUFBLEFBdEVELElBc0VDO1NBdEVZLHdDQUF3QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgICBUVUlfRklSU1RfREFZLFxuICAgIFRVSV9MQVNUX0RBWSxcbiAgICB0dWlEZWZhdWx0UHJvcCxcbiAgICBUdWlNb250aCxcbiAgICBUdWlNb250aExpa2UsXG4gICAgVHVpWWVhcixcbn0gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5pbXBvcnQge1R1aVdpdGhPcHRpb25hbE1pbk1heH0gZnJvbSAnQHRhaWdhLXVpL2NvcmUvaW50ZXJmYWNlcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndHVpLXByaW1pdGl2ZS15ZWFyLW1vbnRoLXBhZ2luYXRpb24nLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9wcmltaXRpdmUteWVhci1tb250aC1wYWdpbmF0aW9uLnRlbXBsYXRlLmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3ByaW1pdGl2ZS15ZWFyLW1vbnRoLXBhZ2luYXRpb24uc3R5bGUubGVzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBUdWlQcmltaXRpdmVZZWFyTW9udGhQYWdpbmF0aW9uQ29tcG9uZW50XG4gICAgaW1wbGVtZW50cyBUdWlXaXRoT3B0aW9uYWxNaW5NYXg8VHVpTW9udGg+IHtcbiAgICBASW5wdXQoKVxuICAgIEB0dWlEZWZhdWx0UHJvcCgpXG4gICAgdmFsdWUgPSBUdWlNb250aC5jdXJyZW50TG9jYWwoKTtcblxuICAgIEBJbnB1dCgpXG4gICAgQHR1aURlZmF1bHRQcm9wKClcbiAgICBtaW46IFR1aU1vbnRoID0gVFVJX0ZJUlNUX0RBWTtcblxuICAgIEBJbnB1dCgpXG4gICAgQHR1aURlZmF1bHRQcm9wKClcbiAgICBtYXg6IFR1aU1vbnRoID0gVFVJX0xBU1RfREFZO1xuXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFR1aU1vbnRoPigpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgeWVhckNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxUdWlZZWFyPigpO1xuXG4gICAgZ2V0IHByZXZNb250aERpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5tb250aFNhbWVPckJlZm9yZSh0aGlzLm1pbik7XG4gICAgfVxuXG4gICAgZ2V0IG5leHRNb250aERpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5tb250aFNhbWVPckFmdGVyKHRoaXMubWF4KTtcbiAgICB9XG5cbiAgICBnZXQgb25lWWVhcigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluLnllYXIgPT09IHRoaXMubWF4LnllYXI7XG4gICAgfVxuXG4gICAgb25ZZWFyQ2xpY2soKSB7XG4gICAgICAgIHRoaXMueWVhckNsaWNrLm5leHQodGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgb25QcmV2TW9udGhDbGljaygpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRWYWx1ZVdpdGhMaW1pdCh7bW9udGg6IC0xfSk7XG4gICAgfVxuXG4gICAgb25OZXh0TW9udGhDbGljaygpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRWYWx1ZVdpdGhMaW1pdCh7bW9udGg6IDF9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFwcGVuZFZhbHVlV2l0aExpbWl0KGRhdGU6IFR1aU1vbnRoTGlrZSkge1xuICAgICAgICBjb25zdCBuZXdNb250aDogVHVpTW9udGggPSB0aGlzLnZhbHVlLmFwcGVuZChkYXRlKTtcblxuICAgICAgICBpZiAodGhpcy5taW4ubW9udGhTYW1lT3JBZnRlcihuZXdNb250aCkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5taW4pO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tYXgubW9udGhTYW1lT3JCZWZvcmUobmV3TW9udGgpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMubWF4KTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZShuZXdNb250aCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVWYWx1ZSh2YWx1ZTogVHVpTW9udGgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubW9udGhTYW1lKHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgIH1cbn1cbiJdfQ==