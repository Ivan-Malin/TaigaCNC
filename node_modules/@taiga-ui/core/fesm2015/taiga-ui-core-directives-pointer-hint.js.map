{"version":3,"file":"taiga-ui-core-directives-pointer-hint.js","sources":["ng://@taiga-ui/core/directives/pointer-hint/pointer-hint.directive.ts","ng://@taiga-ui/core/directives/pointer-hint/pointer-hint.module.ts","ng://@taiga-ui/core/directives/pointer-hint/taiga-ui-core-directives-pointer-hint.ts"],"sourcesContent":["import {Directive, ElementRef, Inject, Input} from '@angular/core';\nimport {\n    TuiDestroyService,\n    TuiHoveredService,\n    tuiRequiredSetter,\n    typedFromEvent,\n} from '@taiga-ui/cdk';\nimport {AbstractTuiHint} from '@taiga-ui/core/abstract';\nimport {TuiHintService} from '@taiga-ui/core/services';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\nimport {distinctUntilChanged, filter, startWith, takeUntil} from 'rxjs/operators';\n\n@Directive({\n    selector: '[tuiPointerHint]:not(ng-container)',\n    providers: [TuiDestroyService],\n})\nexport class TuiPointerHintDirective extends AbstractTuiHint {\n    @Input()\n    @tuiRequiredSetter()\n    set tuiPointerHint(value: PolymorpheusContent | null) {\n        if (!value) {\n            this.hideTooltip();\n            this.content = '';\n\n            return;\n        }\n\n        this.content = value;\n    }\n\n    content: PolymorpheusContent = '';\n\n    private currentMouseRect = this.mousePositionToClientRect();\n\n    constructor(\n        @Inject(ElementRef) elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiHintService) hintService: TuiHintService,\n        @Inject(TuiDestroyService)\n        private readonly destroy$: TuiDestroyService,\n        @Inject(TuiHoveredService) hoveredService: TuiHoveredService,\n    ) {\n        super(elementRef, hintService);\n\n        const hint$ = hoveredService.createHovered$(this.elementRef.nativeElement).pipe(\n            filter(() => !!this.content),\n            startWith(false),\n            distinctUntilChanged(),\n        );\n\n        hint$.pipe(takeUntil(destroy$)).subscribe({\n            next: visible => {\n                if (visible) {\n                    this.showTooltip();\n                } else {\n                    this.hideTooltip();\n                }\n            },\n            complete: () => {\n                this.hideTooltip();\n            },\n        });\n\n        this.initMouseMoveSubscription();\n    }\n\n    getElementClientRect(): ClientRect {\n        return this.currentMouseRect;\n    }\n\n    private initMouseMoveSubscription() {\n        const mouseMove$: Observable<MouseEvent> = typedFromEvent(\n            this.elementRef.nativeElement,\n            'mousemove',\n        );\n\n        mouseMove$.pipe(takeUntil(this.destroy$)).subscribe(({clientX, clientY}) => {\n            this.currentMouseRect = this.mousePositionToClientRect(clientX, clientY);\n        });\n    }\n\n    private mousePositionToClientRect(x: number = 0, y: number = 0): ClientRect {\n        return {\n            left: x,\n            right: x,\n            top: y,\n            bottom: y,\n            width: 0,\n            height: 0,\n        };\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {TuiPointerHintDirective} from './pointer-hint.directive';\n\n@NgModule({\n    declarations: [TuiPointerHintDirective],\n    exports: [TuiPointerHintDirective],\n})\nexport class TuiPointerHintModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}