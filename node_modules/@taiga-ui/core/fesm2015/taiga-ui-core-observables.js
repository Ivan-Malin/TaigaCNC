import { EMPTY_ARRAY } from '@taiga-ui/cdk';
import { debounceTime, scan, distinctUntilChanged, switchMap, startWith } from 'rxjs/operators';

function smartSearch(getSearchFunction, searchDebouceTimeMs = 400) {
    return source => source.pipe(debounceTime(searchDebouceTimeMs), scan((previousSearched, current) => {
        return previousSearched !== '' && current.startsWith(previousSearched)
            ? previousSearched
            : current;
    }, ''), distinctUntilChanged(), switchMap(value => getSearchFunction(value).pipe(startWith(null))), startWith(EMPTY_ARRAY));
}

/**
 * Generated bundle index. Do not edit.
 */

export { smartSearch };
//# sourceMappingURL=taiga-ui-core-observables.js.map
