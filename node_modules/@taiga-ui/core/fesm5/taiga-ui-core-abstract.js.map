{"version":3,"file":"taiga-ui-core-abstract.js","sources":["ng://@taiga-ui/core/abstract/abstract-dropdown.ts","ng://@taiga-ui/core/abstract/abstract-hint.ts","ng://@taiga-ui/core/abstract/taiga-ui-core-abstract.ts"],"sourcesContent":["import {\n    AfterViewChecked,\n    ComponentFactoryResolver,\n    ComponentRef,\n    Directive,\n    ElementRef,\n    Injector,\n    Input,\n    OnDestroy,\n} from '@angular/core';\nimport {\n    TuiActiveZoneDirective,\n    tuiDefaultProp,\n    TuiPortalService,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {TuiDropdownBoxComponent} from '@taiga-ui/core/components/dropdown-box';\nimport {DEFAULT_MAX_HEIGHT, DEFAULT_MIN_HEIGHT} from '@taiga-ui/core/constants';\nimport {TuiDropdownWidth} from '@taiga-ui/core/enums';\nimport {TuiDropdown} from '@taiga-ui/core/interfaces';\nimport {TuiHorizontalDirection, TuiVerticalDirection} from '@taiga-ui/core/types';\nimport {checkFixedPosition} from '@taiga-ui/core/utils/dom';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable} from 'rxjs';\n\n// @bad TODO: Possibly refactor to make more abstract\n@Directive()\nexport abstract class AbstractTuiDropdown\n    implements TuiDropdown, AfterViewChecked, OnDestroy {\n    @Input('tuiDropdownContent')\n    @tuiDefaultProp()\n    content: PolymorpheusContent = '';\n\n    @Input('tuiDropdownHost')\n    @tuiDefaultProp()\n    tuiDropdownHost: HTMLElement | null = null;\n\n    @Input('tuiDropdownMinHeight')\n    @tuiDefaultProp()\n    minHeight = DEFAULT_MIN_HEIGHT;\n\n    @Input('tuiDropdownMaxHeight')\n    @tuiDefaultProp()\n    maxHeight = DEFAULT_MAX_HEIGHT;\n\n    @Input('tuiDropdownAlign')\n    @tuiDefaultProp()\n    align: TuiHorizontalDirection = 'left';\n\n    @Input('tuiDropdownDirection')\n    @tuiDefaultProp()\n    direction: TuiVerticalDirection | null = null;\n\n    @Input('tuiDropdownSided')\n    @tuiDefaultProp()\n    sided = false;\n\n    @Input('tuiDropdownLimitWidth')\n    @tuiDefaultProp()\n    limitMinWidth = TuiDropdownWidth.Min;\n\n    dropdownBoxRef: ComponentRef<TuiDropdownBoxComponent> | null = null;\n\n    abstract refresh$: Observable<unknown>;\n\n    constructor(\n        private readonly componentFactoryResolver: ComponentFactoryResolver,\n        private readonly injector: Injector,\n        private readonly portalService: TuiPortalService,\n        protected readonly elementRef: ElementRef<HTMLElement>,\n        readonly activeZone: TuiActiveZoneDirective | null,\n    ) {}\n\n    ngOnDestroy() {\n        this.closeDropdownBox();\n    }\n\n    ngAfterViewChecked() {\n        // @awful TODO: This is probably wrong to call both but in TuiHostedDropdown some changes do not propagate otherwise\n        if (this.dropdownBoxRef !== null) {\n            this.dropdownBoxRef.changeDetectorRef.detectChanges();\n            this.dropdownBoxRef.changeDetectorRef.markForCheck();\n        }\n    }\n\n    get clientRect(): ClientRect {\n        return this.elementRef.nativeElement.getBoundingClientRect();\n    }\n\n    get host(): HTMLElement {\n        return this.tuiDropdownHost || this.elementRef.nativeElement;\n    }\n\n    @tuiPure\n    get fixed(): boolean {\n        return checkFixedPosition(this.elementRef.nativeElement);\n    }\n\n    protected openDropdownBox() {\n        if (this.dropdownBoxRef !== null) {\n            return;\n        }\n\n        const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\n            TuiDropdownBoxComponent,\n        );\n\n        this.dropdownBoxRef = this.portalService.add(componentFactory, this.injector);\n        this.dropdownBoxRef.changeDetectorRef.detectChanges();\n    }\n\n    protected closeDropdownBox() {\n        if (this.dropdownBoxRef === null) {\n            return;\n        }\n\n        this.portalService.remove(this.dropdownBoxRef);\n        this.dropdownBoxRef = null;\n    }\n}\n","import {Directive, ElementRef, Input, OnDestroy} from '@angular/core';\nimport {tuiDefaultProp} from '@taiga-ui/cdk';\nimport {TuiHintMode} from '@taiga-ui/core/enums';\nimport {TuiHintService} from '@taiga-ui/core/services';\nimport {TuiDirection} from '@taiga-ui/core/types';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\n\n@Directive()\nexport abstract class AbstractTuiHint implements OnDestroy {\n    @Input('tuiHintMode')\n    @tuiDefaultProp()\n    mode: TuiHintMode | null = null;\n\n    @Input('tuiHintDirection')\n    @tuiDefaultProp()\n    direction: TuiDirection = 'bottom-left';\n\n    content: PolymorpheusContent = '';\n\n    constructor(\n        protected readonly elementRef: ElementRef<HTMLElement>,\n        protected readonly hintService: TuiHintService,\n    ) {}\n\n    abstract getElementClientRect(): ClientRect;\n\n    ngOnDestroy() {\n        this.hideTooltip();\n    }\n\n    protected showTooltip() {\n        this.hintService.add(this);\n    }\n\n    protected hideTooltip() {\n        this.hintService.remove(this);\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}