{"version":3,"file":"taiga-ui-core-components-hints-host.js","sources":["ng://@taiga-ui/core/components/hints-host/hints-host.component.ts","ng://@taiga-ui/core/components/hints-host/hint-box/hint-box.component.ts","ng://@taiga-ui/core/components/hints-host/hint-box/hint-box.module.ts","ng://@taiga-ui/core/components/hints-host/hints-host.module.ts","ng://@taiga-ui/core/components/hints-host/taiga-ui-core-components-hints-host.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    Inject,\n} from '@angular/core';\nimport {TuiDestroyService} from '@taiga-ui/cdk';\nimport {AbstractTuiHint} from '@taiga-ui/core/abstract';\nimport {tuiFadeIn} from '@taiga-ui/core/animations';\nimport {TuiHintDirective} from '@taiga-ui/core/directives/hint';\nimport {TuiHintService} from '@taiga-ui/core/services';\nimport {Observable} from 'rxjs';\nimport {skip, takeUntil} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-hints-host',\n    templateUrl: './hints-host.template.html',\n    styleUrls: ['./hints-host.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    animations: [tuiFadeIn],\n    providers: [TuiDestroyService],\n    host: {\n        'aria-live': 'polite',\n    },\n})\nexport class TuiHintsHostComponent {\n    /**\n     * @awful TODO: remove hints variable\n     * and use hints$ after resolving issue with Change Detection\n     */\n    hints: ReadonlyArray<AbstractTuiHint> = [];\n\n    constructor(\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TuiHintService) hints$: TuiHintService,\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(TuiDestroyService) destroy$: Observable<void>,\n    ) {\n        hints$.pipe(skip(1), takeUntil(destroy$)).subscribe(hints => {\n            this.hints = hints;\n            this.changeDetectorRef.detectChanges();\n        });\n    }\n\n    get clientRect(): ClientRect {\n        return this.elementRef.nativeElement.getBoundingClientRect();\n    }\n\n    onHovered(hovered: boolean, directive: AbstractTuiHint) {\n        if (directive instanceof TuiHintDirective) {\n            directive.componentHovered$.next(hovered);\n        }\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    Inject,\n    Input,\n    NgZone,\n    ViewChild,\n} from '@angular/core';\nimport {ANIMATION_FRAME, WINDOW} from '@ng-web-apis/common';\nimport {\n    px,\n    TUI_IS_MOBILE,\n    tuiDefaultProp,\n    TuiDestroyService,\n    tuiPure,\n    tuiZonefree,\n} from '@taiga-ui/cdk';\nimport {AbstractTuiHint} from '@taiga-ui/core/abstract';\nimport {TuiPointerHintDirective} from '@taiga-ui/core/directives/pointer-hint';\nimport {TuiHintMode} from '@taiga-ui/core/enums';\nimport {TuiDirection} from '@taiga-ui/core/types';\nimport {Observable} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\nimport {TuiHintsHostComponent} from '../hints-host.component';\n\nconst SPACE = 8;\nconst BORDER_WIDTH = 1;\nconst LEFT_PADDING = 16;\nconst TOP_PADDING = 12;\nconst ARROW_SIZE = 8;\nconst ARROW_OFFSET = 16;\nconst ARROWHEAD_OFFSET = ARROW_OFFSET + (ARROW_SIZE * Math.sqrt(2)) / 2;\nconst reverseDirectionsVertical: {[key in TuiDirection]: TuiDirection} = {\n    'top-left': 'bottom-left',\n    'top-right': 'bottom-right',\n    'bottom-left': 'top-left',\n    'bottom-right': 'top-right',\n    left: 'right',\n    right: 'left',\n};\nconst reverseDirectionsHorizontal: {[key in TuiDirection]: TuiDirection} = {\n    'top-left': 'top-right',\n    'top-right': 'top-left',\n    'bottom-left': 'bottom-right',\n    'bottom-right': 'bottom-left',\n    left: 'right',\n    right: 'left',\n};\n\n// TODO: consider abstracting UI and move to CDK\n// Ambient type cannot be used without dynamic https://github.com/angular/angular/issues/23395\n// @dynamic\n@Component({\n    selector: 'tui-hint-box',\n    templateUrl: './hint-box.template.html',\n    styleUrls: ['./hint-box.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService],\n})\nexport class TuiHintBoxComponent {\n    @Input()\n    hint?: AbstractTuiHint;\n\n    @Input()\n    @tuiDefaultProp()\n    direction: TuiDirection = 'bottom-left';\n\n    @Input()\n    @HostBinding('attr.data-mode')\n    @tuiDefaultProp()\n    mode: TuiHintMode | null = null;\n\n    @ViewChild('arrow')\n    private readonly arrow?: ElementRef<HTMLElement>;\n\n    constructor(\n        @Inject(ANIMATION_FRAME) animationFrame$: Observable<number>,\n        @Inject(TuiDestroyService) destroy$: Observable<void>,\n        @Inject(NgZone) ngZone: NgZone,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(WINDOW) private readonly windowRef: Window,\n        @Inject(TUI_IS_MOBILE) readonly isMobile: boolean,\n        @Inject(TuiHintsHostComponent)\n        private readonly hintsHost: TuiHintsHostComponent,\n    ) {\n        animationFrame$.pipe(tuiZonefree(ngZone), takeUntil(destroy$)).subscribe(() => {\n            this.calculatePosition();\n        });\n    }\n\n    @tuiPure\n    @HostBinding('class._untouchable')\n    get isUntouchable(): boolean {\n        return this.hint instanceof TuiPointerHintDirective;\n    }\n\n    /**\n     * Calculates wrapper position.\n     * Styles are set directly to avoid visual shake of element\n     */\n    private calculatePosition() {\n        if (this.mode !== TuiHintMode.Overflow) {\n            this.calculateCoordinates();\n        } else {\n            this.setOverflowStyles();\n        }\n    }\n\n    private calculateCoordinates() {\n        if (this.isMobile) {\n            this.calculateMobileCoordinates();\n\n            return;\n        }\n\n        if (!this.hint) {\n            throw new Error('Hint directive is missing');\n        }\n\n        const hostRect = this.hint.getElementClientRect();\n        const portalRect = this.hintsHost.clientRect;\n        const tooltip = this.elementRef.nativeElement;\n        const {style} = tooltip;\n        const tooltipRect = tooltip.getBoundingClientRect();\n        const isHostLong = hostRect.width > ARROWHEAD_OFFSET * 2;\n        const directions: TuiDirection[] = [\n            'left',\n            'right',\n            'bottom-left',\n            'bottom-right',\n            'top-left',\n            'top-right',\n        ];\n\n        let top = 0;\n        let left = 0;\n        let {direction} = this;\n\n        const horizontalTop =\n            hostRect.top + hostRect.height / 2 - tooltipRect.height / 2 - portalRect.top;\n        const horizontalLeft =\n            hostRect.left - tooltipRect.width - SPACE - portalRect.left;\n        const horizontalRight = hostRect.left + hostRect.width + SPACE - portalRect.left;\n        const verticalBottom = hostRect.bottom + SPACE - portalRect.top;\n        const verticalTop = hostRect.top - tooltipRect.height - SPACE - portalRect.top;\n        const verticalRight = isHostLong\n            ? hostRect.left - portalRect.left\n            : hostRect.left + hostRect.width / 2 - ARROWHEAD_OFFSET - portalRect.left;\n        const verticalLeft = isHostLong\n            ? hostRect.left - tooltipRect.width + hostRect.width - portalRect.left\n            : hostRect.left -\n              tooltipRect.width +\n              hostRect.width / 2 +\n              ARROWHEAD_OFFSET -\n              portalRect.left;\n\n        directions.splice(directions.indexOf(direction), 1);\n\n        while (true) {\n            switch (direction) {\n                case 'left':\n                    top = horizontalTop;\n                    left = horizontalLeft;\n                    break;\n                case 'right':\n                    top = horizontalTop;\n                    left = horizontalRight;\n                    break;\n                case 'top-right':\n                    top = verticalTop;\n                    left = verticalRight;\n                    break;\n                case 'top-left':\n                    top = verticalTop;\n                    left = verticalLeft;\n                    break;\n                case 'bottom-right':\n                    top = verticalBottom;\n                    left = verticalRight;\n                    break;\n                case 'bottom-left':\n                    top = verticalBottom;\n                    left = verticalLeft;\n                    break;\n            }\n\n            const verticalFit =\n                top + portalRect.top > SPACE &&\n                top + tooltipRect.height + SPACE + portalRect.top <\n                    this.windowRef.innerHeight;\n            const horizontalFit =\n                left > SPACE &&\n                left + tooltipRect.width + SPACE + portalRect.left < portalRect.width;\n\n            if (directions.length === 0 || (verticalFit && horizontalFit)) {\n                break;\n            }\n\n            direction = verticalFit\n                ? reverseDirectionsHorizontal[direction]\n                : reverseDirectionsVertical[direction];\n            direction =\n                directions.splice(directions.indexOf(direction), 1)[0] || direction;\n        }\n\n        style.top = px(top);\n        style.left = px(left);\n\n        tooltip.setAttribute('data-tui-host-direction', direction);\n    }\n\n    private calculateMobileCoordinates() {\n        if (!this.hint) {\n            throw new Error('Hint directive is missing');\n        }\n\n        const hostRect = this.hint.getElementClientRect();\n        const portalRect = this.hintsHost.clientRect;\n        const tooltip = this.elementRef.nativeElement;\n        const {style} = tooltip;\n        const tooltipRect = tooltip.getBoundingClientRect();\n        const verticalTop = hostRect.top - tooltipRect.height - SPACE - portalRect.top;\n        const verticalBottom = hostRect.bottom + SPACE - portalRect.top;\n        const verticalTopFit =\n            verticalTop + portalRect.top > SPACE &&\n            hostRect.top < this.windowRef.innerHeight;\n        const verticalBottomFit =\n            hostRect.bottom > 0 &&\n            hostRect.bottom + 2 * SPACE + tooltipRect.height < this.windowRef.innerHeight;\n        const direction =\n            (this.direction.includes('top') && verticalTopFit) || !verticalBottomFit\n                ? 'top'\n                : 'bottom';\n        const attemptedLeft =\n            portalRect.left + hostRect.left + hostRect.width / 2 - tooltipRect.width / 2;\n        const left = Math.max(\n            attemptedLeft + tooltipRect.width + SPACE > portalRect.right\n                ? portalRect.right - SPACE - tooltipRect.width\n                : attemptedLeft,\n            SPACE * 2,\n        );\n\n        style.left = px(left);\n        style.top = direction === 'top' ? px(verticalTop) : px(verticalBottom);\n\n        if (this.arrow) {\n            this.arrow.nativeElement.style.left = px(\n                hostRect.left <= SPACE * 2 && hostRect.width > ARROW_OFFSET * 2\n                    ? ARROW_OFFSET\n                    : hostRect.left + hostRect.width / 2 - left - ARROW_SIZE / 2,\n            );\n        }\n\n        tooltip.setAttribute('data-tui-host-direction', direction);\n    }\n\n    private setOverflowStyles() {\n        if (!this.hint) {\n            throw new Error('Hint directive is missing');\n        }\n\n        const hostRect = this.hint.getElementClientRect();\n        const {style} = this.elementRef.nativeElement;\n\n        style.top = px(hostRect.top - window.innerHeight - TOP_PADDING - BORDER_WIDTH);\n        style.left = px(hostRect.left - LEFT_PADDING - BORDER_WIDTH);\n        style.width = px(hostRect.width + LEFT_PADDING * 2 + BORDER_WIDTH * 2);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiHintBoxComponent} from './hint-box.component';\n\n@NgModule({\n    imports: [CommonModule],\n    declarations: [TuiHintBoxComponent],\n    exports: [TuiHintBoxComponent],\n})\nexport class TuiHintBoxModule {}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiHoveredModule} from '@taiga-ui/cdk';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiHintBoxModule} from './hint-box/hint-box.module';\n\nimport {TuiHintsHostComponent} from './hints-host.component';\n\n@NgModule({\n    imports: [CommonModule, PolymorpheusModule, TuiHoveredModule, TuiHintBoxModule],\n    declarations: [TuiHintsHostComponent],\n    exports: [TuiHintsHostComponent],\n    entryComponents: [TuiHintsHostComponent],\n})\nexport class TuiHintsHostModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}