{"version":3,"file":"taiga-ui-core-modules-notifications.js","sources":["ng://@taiga-ui/core/modules/notifications/notification-alert/notification-alert.component.ts","ng://@taiga-ui/core/modules/notifications/notification-alert/notification-alert.module.ts","ng://@taiga-ui/core/modules/notifications/notification-alert/Notification-alert.ts","ng://@taiga-ui/core/modules/notifications/notifications.service.ts","ng://@taiga-ui/core/modules/notifications/notifications-host/notifications-host.component.ts","ng://@taiga-ui/core/modules/notifications/notifications.module.ts","ng://@taiga-ui/core/modules/notifications/taiga-ui-core-modules-notifications.ts"],"sourcesContent":["import {ChangeDetectionStrategy, Component, Inject, Input} from '@angular/core';\nimport {TuiDestroyService, tuiPure} from '@taiga-ui/cdk';\nimport {timer} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {TuiNotificationContentContext} from '../notification-content-context';\nimport {NotificationAlert} from './Notification-alert';\n\nexport const ALERT_AUTOCLOSE_TIMEOUT = 3000;\n\n@Component({\n    selector: 'tui-notification-alert',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: './notification-alert.template.html',\n    styleUrls: ['./notification-alert.style.less'],\n    providers: [TuiDestroyService],\n})\nexport class TuiNotificationAlertComponent<O, I> {\n    @Input()\n    item?: NotificationAlert<O, I>;\n\n    constructor(\n        @Inject(TuiDestroyService)\n        destroy$: TuiDestroyService,\n    ) {\n        timer(ALERT_AUTOCLOSE_TIMEOUT)\n            .pipe(takeUntil(destroy$))\n            .subscribe(() => {\n                if (this.safeItem.autoClose) {\n                    this.closeDialog();\n                }\n            });\n    }\n\n    get safeItem(): NotificationAlert<O, I> {\n        if (!this.item) {\n            throw new Error('Notification was created as undefined');\n        }\n\n        return this.item;\n    }\n\n    get context(): TuiNotificationContentContext<O, I> {\n        return this.calculateContext(this.safeItem);\n    }\n\n    closeDialog() {\n        this.safeItem.observer.complete();\n    }\n\n    @tuiPure\n    private calculateContext({\n        status,\n        data,\n        label,\n        observer,\n    }: NotificationAlert<O, I>): TuiNotificationContentContext<O, I> {\n        return {\n            $implicit: status,\n            data: data,\n            label: label,\n            closeHook: () => {\n                observer.complete();\n            },\n            emitHook: (data: O) => {\n                observer.next(data);\n            },\n            emitAndCloseHook: (data: O) => {\n                observer.next(data);\n                observer.complete();\n            },\n        };\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiNotificationModule} from '@taiga-ui/core/components/notification';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\n\nimport {TuiNotificationAlertComponent} from './notification-alert.component';\n\n@NgModule({\n    imports: [CommonModule, PolymorpheusModule, TuiNotificationModule],\n    declarations: [TuiNotificationAlertComponent],\n    exports: [TuiNotificationAlertComponent],\n})\nexport class TuiNotificationAlertModule {}\n","import {TuiNotification} from '@taiga-ui/core/enums';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observer} from 'rxjs';\nimport {TuiNotificationContentContext} from '../notification-content-context';\nimport {\n    TuiNotificationOptions,\n    TuiNotificationOptionsWithData,\n} from '../notification-options';\n\nexport class NotificationAlert<O, I> {\n    readonly status: TuiNotification;\n\n    readonly hasIcon: boolean;\n\n    readonly autoClose: boolean;\n\n    readonly hasCloseButton: boolean;\n\n    readonly label: string;\n\n    readonly data!: I;\n\n    readonly observer: Observer<O>;\n\n    readonly content: PolymorpheusContent<TuiNotificationContentContext<O, I>>;\n\n    constructor(\n        observer: Observer<O>,\n        content: PolymorpheusContent<TuiNotificationContentContext<O, I>>,\n        options: TuiNotificationOptions | TuiNotificationOptionsWithData<I>,\n    ) {\n        const {\n            label = '',\n            status = TuiNotification.Info,\n            hasIcon = true,\n            autoClose = true,\n            hasCloseButton = true,\n        } = options;\n\n        this.observer = observer;\n        this.content = content;\n\n        this.label = label;\n        this.status = status;\n        this.hasIcon = hasIcon;\n        this.autoClose = autoClose;\n        this.hasCloseButton = hasCloseButton;\n\n        if (options && this.withData(options)) {\n            this.data = options.data;\n        }\n    }\n\n    private withData(\n        options: TuiNotificationOptions | TuiNotificationOptionsWithData<I>,\n    ): options is TuiNotificationOptionsWithData<I> {\n        return 'data' in options;\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {tuiAssert} from '@taiga-ui/cdk';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {BehaviorSubject, Observable, Observer} from 'rxjs';\nimport {NotificationAlert} from './notification-alert/Notification-alert';\nimport {TuiNotificationContentContext} from './notification-content-context';\nimport {\n    TuiNotificationOptions,\n    TuiNotificationOptionsWithData,\n} from './notification-options';\n\nconst NO_HOST =\n    'Notifications are disabled, enable support by adding TuiNotificationsModule to your main app module';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class TuiNotificationsService {\n    /** @internal */\n    readonly items$ = new BehaviorSubject<ReadonlyArray<NotificationAlert<any, any>>>([]);\n\n    show<O = void>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O>>,\n    ): Observable<O>;\n    show<O = void>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O>>,\n        options: TuiNotificationOptions,\n    ): Observable<O>;\n    show<O, I>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O, I>>,\n        options: TuiNotificationOptionsWithData<I>,\n    ): Observable<O>;\n    show<O, I>(\n        content: PolymorpheusContent<TuiNotificationContentContext<O, I>>,\n        options: TuiNotificationOptions | TuiNotificationOptionsWithData<I> = {},\n    ): Observable<O> {\n        tuiAssert.assert(!!this.items$.observers.length, NO_HOST);\n\n        return new Observable((observer: Observer<O>) => {\n            const notification = new NotificationAlert(observer, content, options);\n\n            this.items$.next([...this.items$.value, notification]);\n\n            return () => {\n                this.items$.next(this.items$.value.filter(item => item !== notification));\n            };\n        });\n    }\n}\n","import {ChangeDetectionStrategy, Component, Inject} from '@angular/core';\nimport {\n    tuiFadeInList,\n    tuiHeightCollapseList,\n    tuiSlideInRightList,\n} from '@taiga-ui/core/animations';\nimport {TuiNotificationsService} from '../notifications.service';\n\n@Component({\n    selector: 'tui-notifications-host',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: './notifications-host.template.html',\n    styleUrls: ['./notifications-host.style.less'],\n    animations: [tuiFadeInList, tuiSlideInRightList, tuiHeightCollapseList],\n})\nexport class TuiNotificationsHostComponent {\n    constructor(\n        @Inject(TuiNotificationsService) readonly service: TuiNotificationsService,\n    ) {}\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiLetModule} from '@taiga-ui/cdk';\n\nimport {TuiNotificationAlertModule} from './notification-alert/notification-alert.module';\nimport {TuiNotificationsHostComponent} from './notifications-host/notifications-host.component';\n\n@NgModule({\n    imports: [CommonModule, TuiNotificationAlertModule, TuiLetModule],\n    declarations: [TuiNotificationsHostComponent],\n    exports: [TuiNotificationsHostComponent],\n    entryComponents: [TuiNotificationsHostComponent],\n    providers: [\n        {\n            provide: TuiNotificationsHostComponent,\n            useValue: TuiNotificationsHostComponent,\n        },\n    ],\n})\nexport class TuiNotificationsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}