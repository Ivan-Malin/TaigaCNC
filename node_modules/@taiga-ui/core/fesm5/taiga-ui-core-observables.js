import { EMPTY_ARRAY } from '@taiga-ui/cdk';
import { debounceTime, scan, distinctUntilChanged, switchMap, startWith } from 'rxjs/operators';

function smartSearch(getSearchFunction, searchDebouceTimeMs) {
    if (searchDebouceTimeMs === void 0) { searchDebouceTimeMs = 400; }
    return function (source) {
        return source.pipe(debounceTime(searchDebouceTimeMs), scan(function (previousSearched, current) {
            return previousSearched !== '' && current.startsWith(previousSearched)
                ? previousSearched
                : current;
        }, ''), distinctUntilChanged(), switchMap(function (value) { return getSearchFunction(value).pipe(startWith(null)); }), startWith(EMPTY_ARRAY));
    };
}

/**
 * Generated bundle index. Do not edit.
 */

export { smartSearch };
//# sourceMappingURL=taiga-ui-core-observables.js.map
