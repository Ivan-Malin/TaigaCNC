{"version":3,"file":"taiga-ui-core-observables.js","sources":["ng://@taiga-ui/core/observables/smart-search.ts","ng://@taiga-ui/core/observables/taiga-ui-core-observables.ts"],"sourcesContent":["import {EMPTY_ARRAY} from '@taiga-ui/cdk';\nimport {TuiItems} from '@taiga-ui/core/types';\nimport {Observable, OperatorFunction} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    scan,\n    startWith,\n    switchMap,\n} from 'rxjs/operators';\n\nexport function smartSearch<T>(\n    getSearchFunction: (search: string) => Observable<Exclude<TuiItems<T>, null>>,\n    searchDebouceTimeMs: number = 400,\n): OperatorFunction<string, TuiItems<T>> {\n    return source =>\n        source.pipe(\n            debounceTime(searchDebouceTimeMs),\n            scan((previousSearched, current) => {\n                return previousSearched !== '' && current.startsWith(previousSearched)\n                    ? previousSearched\n                    : current;\n            }, ''),\n            distinctUntilChanged(),\n            switchMap(value => getSearchFunction(value).pipe(startWith(null))),\n            startWith(EMPTY_ARRAY),\n        );\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;SAWgB,WAAW,CACvB,iBAA6E,EAC7E,mBAAiC;IAAjC,oCAAA,EAAA,yBAAiC;IAEjC,OAAO,UAAA,MAAM;QACT,OAAA,MAAM,CAAC,IAAI,CACP,YAAY,CAAC,mBAAmB,CAAC,EACjC,IAAI,CAAC,UAAC,gBAAgB,EAAE,OAAO;YAC3B,OAAO,gBAAgB,KAAK,EAAE,IAAI,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC;kBAChE,gBAAgB;kBAChB,OAAO,CAAC;SACjB,EAAE,EAAE,CAAC,EACN,oBAAoB,EAAE,EACtB,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,iBAAiB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAA,CAAC,EAClE,SAAS,CAAC,WAAW,CAAC,CACzB;KAAA,CAAC;AACV;;AC3BA;;;;;;"}