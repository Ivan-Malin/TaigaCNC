import { __read } from "tslib";
import { DATE_TIME_SEPARATOR } from '@taiga-ui/kit/constants';
import { normalizeDateValue } from './create-auto-corrected-date-pipe';
import { tuiCreateAutoCorrectedTimePipe } from './create-auto-corrected-time-pipe';
export function tuiCreateAutoCorrectedDateTimePipe(config, timeMode) {
    var timePipe = tuiCreateAutoCorrectedTimePipe(timeMode);
    return function (value) {
        if (value.length < config.filler.length) {
            return { value: value };
        }
        var _a = __read(value.split(DATE_TIME_SEPARATOR), 2), date = _a[0], time = _a[1];
        var formattedDate = normalizeDateValue(date, config);
        if (!time) {
            return { value: formattedDate };
        }
        var pipedTime = timePipe(time, {});
        if (!pipedTime || typeof pipedTime === 'string') {
            return false;
        }
        return {
            value: "" + formattedDate + DATE_TIME_SEPARATOR + pipedTime.value,
            indexesOfPipedChars: !!pipedTime.indexesOfPipedChars
                ? pipedTime.indexesOfPipedChars.map(function (i) { return i + date.length + 2; })
                : undefined,
        };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLWF1dG8tY29ycmVjdGVkLWRhdGUtdGltZS1waXBlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRhaWdhLXVpL2tpdC91dGlscy9tYXNrLyIsInNvdXJjZXMiOlsiY3JlYXRlLWF1dG8tY29ycmVjdGVkLWRhdGUtdGltZS1waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFQSxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUc1RCxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSxtQ0FBbUMsQ0FBQztBQUNyRSxPQUFPLEVBQUMsOEJBQThCLEVBQUMsTUFBTSxtQ0FBbUMsQ0FBQztBQUVqRixNQUFNLFVBQVUsa0NBQWtDLENBQzlDLE1BQXFELEVBQ3JELFFBQXFCO0lBRXJCLElBQU0sUUFBUSxHQUFHLDhCQUE4QixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTFELE9BQU8sVUFBQSxLQUFLO1FBQ1IsSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO1lBQ3JDLE9BQU8sRUFBQyxLQUFLLE9BQUEsRUFBQyxDQUFDO1NBQ2xCO1FBRUssSUFBQSxnREFBK0MsRUFBOUMsWUFBSSxFQUFFLFlBQXdDLENBQUM7UUFFdEQsSUFBTSxhQUFhLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRXZELElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDUCxPQUFPLEVBQUMsS0FBSyxFQUFFLGFBQWEsRUFBQyxDQUFDO1NBQ2pDO1FBRUQsSUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFTLENBQUMsQ0FBQztRQUU1QyxJQUFJLENBQUMsU0FBUyxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRTtZQUM3QyxPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUVELE9BQU87WUFDSCxLQUFLLEVBQUUsS0FBRyxhQUFhLEdBQUcsbUJBQW1CLEdBQUcsU0FBUyxDQUFDLEtBQU87WUFDakUsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUI7Z0JBQ2hELENBQUMsQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFuQixDQUFtQixDQUFDO2dCQUM3RCxDQUFDLENBQUMsU0FBUztTQUNsQixDQUFDO0lBQ04sQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VHVpRGF5LCBUdWlUaW1lTW9kZX0gZnJvbSAnQHRhaWdhLXVpL2Nkayc7XG5pbXBvcnQge1R1aVRleHRNYXNrUGlwZUhhbmRsZXJ9IGZyb20gJ0B0YWlnYS11aS9jb3JlJztcbmltcG9ydCB7REFURV9USU1FX1NFUEFSQVRPUn0gZnJvbSAnQHRhaWdhLXVpL2tpdC9jb25zdGFudHMnO1xuaW1wb3J0IHtXaXRoRGF0ZU1hc2tQaXBlQ29uZmlnfSBmcm9tICdAdGFpZ2EtdWkva2l0L2ludGVyZmFjZXMnO1xuXG5pbXBvcnQge25vcm1hbGl6ZURhdGVWYWx1ZX0gZnJvbSAnLi9jcmVhdGUtYXV0by1jb3JyZWN0ZWQtZGF0ZS1waXBlJztcbmltcG9ydCB7dHVpQ3JlYXRlQXV0b0NvcnJlY3RlZFRpbWVQaXBlfSBmcm9tICcuL2NyZWF0ZS1hdXRvLWNvcnJlY3RlZC10aW1lLXBpcGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gdHVpQ3JlYXRlQXV0b0NvcnJlY3RlZERhdGVUaW1lUGlwZShcbiAgICBjb25maWc6IFdpdGhEYXRlTWFza1BpcGVDb25maWc8VHVpRGF5IHwgbnVsbCwgVHVpRGF5PixcbiAgICB0aW1lTW9kZTogVHVpVGltZU1vZGUsXG4pOiBUdWlUZXh0TWFza1BpcGVIYW5kbGVyIHtcbiAgICBjb25zdCB0aW1lUGlwZSA9IHR1aUNyZWF0ZUF1dG9Db3JyZWN0ZWRUaW1lUGlwZSh0aW1lTW9kZSk7XG5cbiAgICByZXR1cm4gdmFsdWUgPT4ge1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoIDwgY29uZmlnLmZpbGxlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsdWV9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgW2RhdGUsIHRpbWVdID0gdmFsdWUuc3BsaXQoREFURV9USU1FX1NFUEFSQVRPUik7XG5cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IG5vcm1hbGl6ZURhdGVWYWx1ZShkYXRlLCBjb25maWcpO1xuXG4gICAgICAgIGlmICghdGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTogZm9ybWF0dGVkRGF0ZX07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwaXBlZFRpbWUgPSB0aW1lUGlwZSh0aW1lLCB7fSBhcyBhbnkpO1xuXG4gICAgICAgIGlmICghcGlwZWRUaW1lIHx8IHR5cGVvZiBwaXBlZFRpbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IGAke2Zvcm1hdHRlZERhdGV9JHtEQVRFX1RJTUVfU0VQQVJBVE9SfSR7cGlwZWRUaW1lLnZhbHVlfWAsXG4gICAgICAgICAgICBpbmRleGVzT2ZQaXBlZENoYXJzOiAhIXBpcGVkVGltZS5pbmRleGVzT2ZQaXBlZENoYXJzXG4gICAgICAgICAgICAgICAgPyBwaXBlZFRpbWUuaW5kZXhlc09mUGlwZWRDaGFycy5tYXAoaSA9PiBpICsgZGF0ZS5sZW5ndGggKyAyKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH07XG59XG4iXX0=