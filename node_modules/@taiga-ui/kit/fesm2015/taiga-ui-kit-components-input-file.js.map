{"version":3,"file":"taiga-ui-kit-components-input-file.js","sources":["ng://@taiga-ui/kit/components/input-file/input-file.component.ts","ng://@taiga-ui/kit/components/input-file/file/file.component.ts","ng://@taiga-ui/kit/components/input-file/input-file.module.ts","ng://@taiga-ui/kit/components/input-file/taiga-ui-kit-components-input-file.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    Self,\n    ViewChild,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiNullableControl,\n    EMPTY_ARRAY,\n    isNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TUI_IS_MOBILE,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {\n    MODE_PROVIDER,\n    TUI_MODE,\n    TuiAppearance,\n    TuiBrightness,\n    TuiSizeL,\n} from '@taiga-ui/core';\nimport {TuiFileLike} from '@taiga-ui/kit/interfaces';\nimport {TUI_DIGITAL_INFORMATION_UNITS, TUI_INPUT_FILE_TEXTS} from '@taiga-ui/kit/tokens';\nimport {formatSize} from '@taiga-ui/kit/utils/files';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nconst DEFAULT_MAX_SIZE = 30 * 1000 * 1000; // 30 MB\n\n// @dynamic\n@Component({\n    selector: 'tui-input-file',\n    templateUrl: './input-file.template.html',\n    styleUrls: ['./input-file.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        MODE_PROVIDER,\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiInputFileComponent),\n        },\n    ],\n})\nexport class TuiInputFileComponent\n    extends AbstractTuiNullableControl<TuiFileLike | ReadonlyArray<TuiFileLike>>\n    implements TuiFocusableElementAccessor {\n    @Input()\n    @tuiDefaultProp()\n    link: PolymorpheusContent = '';\n\n    @Input()\n    @tuiDefaultProp()\n    label: PolymorpheusContent = '';\n\n    @Input()\n    @tuiDefaultProp()\n    accept = '';\n\n    @Input()\n    @tuiDefaultProp()\n    multiple = false;\n\n    @Input()\n    @tuiDefaultProp()\n    size: TuiSizeL = 'm';\n\n    @Input()\n    @tuiDefaultProp()\n    showSize = true;\n\n    @Input()\n    @tuiDefaultProp()\n    maxFileSize = DEFAULT_MAX_SIZE;\n\n    @Input()\n    @tuiDefaultProp()\n    loadingFiles: ReadonlyArray<TuiFileLike> = [];\n\n    @Input()\n    @tuiDefaultProp()\n    rejectedFiles: ReadonlyArray<TuiFileLike> = [];\n\n    @Output()\n    rejectedFilesChange = new EventEmitter<ReadonlyArray<TuiFileLike>>();\n\n    @ViewChild('input')\n    readonly input?: ElementRef<HTMLInputElement>;\n\n    private dataTransfer: DataTransfer | null = null;\n\n    constructor(\n        @Optional()\n        @Self()\n        @Inject(NgControl)\n        control: NgControl | null,\n        @Inject(ChangeDetectorRef)\n        changeDetectorRef: ChangeDetectorRef,\n        @Inject(TUI_IS_MOBILE)\n        readonly isMobile: boolean,\n        @Inject(TUI_INPUT_FILE_TEXTS)\n        readonly inputFileTexts$: Observable<\n            Record<\n                | 'defaultLabelSingle'\n                | 'defaultLabelMultiple'\n                | 'defaultLinkSingle'\n                | 'defaultLinkMultiple'\n                | 'maxSizeRejectionReason'\n                | 'formatRejectionReason'\n                | 'drop'\n                | 'dropMultiple',\n                string\n            >\n        >,\n        @Inject(TUI_MODE) readonly mode$: Observable<TuiBrightness | null>,\n        @Inject(TUI_DIGITAL_INFORMATION_UNITS)\n        readonly units$: Observable<[string, string, string]>,\n    ) {\n        super(control, changeDetectorRef);\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return this.input ? this.input.nativeElement : null;\n    }\n\n    get focused(): boolean {\n        return isNativeFocused(this.nativeFocusableElement);\n    }\n\n    get allowDelete(): boolean {\n        return !this.computedDisabled && !this.readOnly;\n    }\n\n    get computedLink$(): Observable<PolymorpheusContent> {\n        return this.computeLink$(this.fileDragged, this.multiple, this.link);\n    }\n\n    get computedLabel$(): Observable<PolymorpheusContent> {\n        return this.computeLabel$(\n            this.isMobile,\n            this.fileDragged,\n            this.multiple,\n            this.label,\n        );\n    }\n\n    // @bad TODO: refactor after IE is dropped\n    get fileDragged(): boolean {\n        return (\n            !!this.dataTransfer &&\n            Array.prototype.indexOf.call(this.dataTransfer.types, 'Files') !== -1\n        );\n    }\n\n    get acceptArray(): readonly string[] {\n        return this.getAcceptArray(this.accept);\n    }\n\n    get arrayValue(): ReadonlyArray<TuiFileLike> {\n        return this.getValueArray(this.value);\n    }\n\n    get readyFiles(): ReadonlyArray<TuiFileLike> {\n        return this.getReadyFiles(this.arrayValue, this.loadingFiles);\n    }\n\n    get computedLoading(): ReadonlyArray<TuiFileLike> {\n        return this.getLoadingFiles(this.arrayValue, this.loadingFiles);\n    }\n\n    get hasFiles(): boolean {\n        return !!this.rejectedFiles.length || !!this.arrayValue.length;\n    }\n\n    onHovered(hovered: boolean) {\n        this.updateHovered(hovered);\n    }\n\n    onFocused(focused: boolean) {\n        this.updateFocused(focused);\n    }\n\n    onPressed(pressed: boolean) {\n        this.updatePressed(pressed);\n    }\n\n    // TODO: refactor i18n messages\n    onFilesSelected(\n        input: HTMLInputElement,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        this.processSelectedFiles(input.files, texts, units);\n        input.value = '';\n    }\n\n    onDropped(\n        event: DataTransfer,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        this.processSelectedFiles(event.files, texts, units);\n    }\n\n    onDragOver(dataTransfer: DataTransfer | null) {\n        this.dataTransfer = dataTransfer;\n    }\n\n    removeFile(removedFile: TuiFileLike) {\n        this.updateValue(\n            this.multiple ? this.arrayValue.filter(file => file !== removedFile) : null,\n        );\n    }\n\n    removeRejectedFile(removedFile: TuiFileLike) {\n        this.updateRejectedFiles(this.rejectedFiles.filter(file => file !== removedFile));\n    }\n\n    getAppearance(mode: null | unknown): string {\n        return mode === null ? '' : TuiAppearance.Outline;\n    }\n\n    @tuiPure\n    private computeLink$(\n        fileDragged: boolean,\n        multiple: boolean,\n        link: PolymorpheusContent,\n    ): Observable<PolymorpheusContent> {\n        if (fileDragged) {\n            return of('');\n        }\n\n        return this.inputFileTexts$.pipe(\n            map(texts =>\n                multiple && link === ''\n                    ? texts.defaultLinkMultiple\n                    : link || texts.defaultLinkSingle,\n            ),\n        );\n    }\n\n    @tuiPure\n    private computeLabel$(\n        isMobile: boolean,\n        fileDragged: boolean,\n        multiple: boolean,\n        label: PolymorpheusContent,\n    ): Observable<PolymorpheusContent> {\n        if (isMobile) {\n            return of('');\n        }\n\n        if (fileDragged) {\n            return this.inputFileTexts$.pipe(\n                map(texts => (multiple ? texts.dropMultiple : texts.drop)),\n            );\n        }\n\n        return this.inputFileTexts$.pipe(\n            map(texts =>\n                multiple && label === ''\n                    ? texts.defaultLabelMultiple\n                    : label || texts.defaultLabelSingle,\n            ),\n        );\n    }\n\n    @tuiPure\n    private getValueArray(\n        value: TuiFileLike | ReadonlyArray<TuiFileLike> | null,\n    ): ReadonlyArray<TuiFileLike> {\n        if (!value) {\n            return EMPTY_ARRAY;\n        }\n\n        return value instanceof Array ? value : [value];\n    }\n\n    @tuiPure\n    private getReadyFiles(\n        value: ReadonlyArray<TuiFileLike>,\n        loading: ReadonlyArray<TuiFileLike>,\n    ): ReadonlyArray<TuiFileLike> {\n        return value.filter(file => loading.indexOf(file) === -1);\n    }\n\n    @tuiPure\n    private getLoadingFiles(\n        value: ReadonlyArray<TuiFileLike>,\n        loading: ReadonlyArray<TuiFileLike>,\n    ): ReadonlyArray<TuiFileLike> {\n        return loading.filter(file => value.indexOf(file) !== -1);\n    }\n\n    @tuiPure\n    private getAcceptArray(accept: string): readonly string[] {\n        return accept.toLowerCase().split(',');\n    }\n\n    private processSelectedFiles(\n        files: FileList | null,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        // IE11 after selecting a file through the open dialog generates a second event passing an empty FileList.\n        if (files === null || files.length === 0) {\n            return;\n        }\n\n        const newFiles = this.multiple ? Array.from(files) : [files[0]];\n        const tooBigFiles = newFiles.filter(file => file.size > this.maxFileSize);\n        const wrongFormatFiles = newFiles.filter(\n            file => !this.isFormatAcceptable(file) && tooBigFiles.indexOf(file) === -1,\n        );\n        const acceptedFiles = newFiles.filter(\n            file =>\n                tooBigFiles.indexOf(file) === -1 && wrongFormatFiles.indexOf(file) === -1,\n        );\n\n        this.updateRejectedFiles([\n            ...tooBigFiles.map(file => ({\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                content:\n                    texts.maxSizeRejectionReason + formatSize(units, this.maxFileSize),\n            })),\n            ...wrongFormatFiles.map(file => ({\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                content: texts.formatRejectionReason,\n            })),\n        ]);\n        this.updateValue(\n            this.multiple\n                ? [...this.readyFiles, ...acceptedFiles]\n                : acceptedFiles[0] || null,\n        );\n    }\n\n    private isFormatAcceptable(file: File): boolean {\n        if (!this.accept) {\n            return true;\n        }\n\n        const extension = '.' + (file.name.split('.').pop() || '').toLowerCase();\n\n        return this.acceptArray.some(\n            format =>\n                format === extension ||\n                format === file.type ||\n                (format.split('/')[1] === '*' &&\n                    file.type.split('/')[0] === format.split('/')[0]),\n        );\n    }\n\n    private updateRejectedFiles(rejectedFiles: ReadonlyArray<TuiFileLike>) {\n        this.rejectedFiles = rejectedFiles;\n        this.rejectedFilesChange.emit(rejectedFiles);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\nimport {DomSanitizer, SafeValue} from '@angular/platform-browser';\nimport {TUI_IS_MOBILE, tuiDefaultProp, tuiPure} from '@taiga-ui/cdk';\nimport {TuiSizeL} from '@taiga-ui/core';\nimport {TuiFileState} from '@taiga-ui/kit/enums';\nimport {TuiFileLike} from '@taiga-ui/kit/interfaces';\nimport {TUI_DIGITAL_INFORMATION_UNITS, TUI_FILE_TEXTS} from '@taiga-ui/kit/tokens';\nimport {formatSize} from '@taiga-ui/kit/utils/files';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n// @dynamic\n@Component({\n    selector: 'tui-file',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: './file.template.html',\n    styleUrls: ['./file.style.less'],\n})\nexport class TuiFileComponent {\n    @Input()\n    @tuiDefaultProp()\n    file: TuiFileLike = {name: ''};\n\n    @Input()\n    @tuiDefaultProp()\n    state: TuiFileState = TuiFileState.Normal;\n\n    @Input()\n    @tuiDefaultProp()\n    size: TuiSizeL = 'm';\n\n    @Input()\n    @tuiDefaultProp()\n    allowDelete = true;\n\n    @Input()\n    @tuiDefaultProp()\n    showSize = true;\n\n    @Output()\n    readonly fileRemoved = new EventEmitter<void>();\n\n    @HostBinding('class._focused')\n    focused = false;\n\n    constructor(\n        @Inject(TUI_IS_MOBILE) readonly isMobile: boolean,\n        @Inject(DomSanitizer) private readonly sanitizer: DomSanitizer,\n        @Inject(TUI_FILE_TEXTS)\n        readonly fileTexts$: Observable<\n            Record<'loadingError' | 'preview' | 'remove', string>\n        >,\n        @Inject(TUI_DIGITAL_INFORMATION_UNITS)\n        private readonly units$: Observable<[string, string, string]>,\n    ) {}\n\n    get preview(): SafeValue {\n        return this.isBig ? this.createPreview(this.file, this.sanitizer) : '';\n    }\n\n    get isBig(): boolean {\n        return this.size === 'l';\n    }\n\n    get isLoading(): boolean {\n        return this.state === TuiFileState.Loading;\n    }\n\n    get isError(): boolean {\n        return this.state === TuiFileState.Error;\n    }\n\n    get isDeleted(): boolean {\n        return this.state === TuiFileState.Deleted;\n    }\n\n    get icon(): string {\n        if (this.state === TuiFileState.Normal && this.isBig) {\n            return 'tuiIconDefaultDocLarge';\n        }\n\n        switch (this.state) {\n            case TuiFileState.Deleted:\n                return 'tuiIconTrashLarge';\n            case TuiFileState.Error:\n                return 'tuiIconAlertCircleLarge';\n            default:\n                return 'tuiIconCheckCircleLarge';\n        }\n    }\n\n    @HostBinding('class._link')\n    get src(): string {\n        return this.file.src || '';\n    }\n\n    get name(): string {\n        return this.file.name.split('.').slice(0, -1).join('.');\n    }\n\n    get type(): string {\n        return '.' + this.file.name.split('.').pop() || '';\n    }\n\n    get content$(): Observable<PolymorpheusContent> {\n        return this.calculateContent$(this.state, this.file, this.fileTexts$);\n    }\n\n    get fileSize$(): Observable<string | null> {\n        return this.calculateFileSize$(this.file, this.units$);\n    }\n\n    onRemoveClick() {\n        this.fileRemoved.emit();\n    }\n\n    onFocusVisible(focusVisible: boolean) {\n        this.focused = focusVisible;\n    }\n\n    @tuiPure\n    private calculateContent$(\n        state: TuiFileState,\n        file: TuiFileLike,\n        fileTexts$: Observable<Record<'loadingError' | 'preview' | 'remove', string>>,\n    ): Observable<PolymorpheusContent> {\n        return state === TuiFileState.Error && !file.content\n            ? fileTexts$.pipe(map(texts => texts.loadingError))\n            : of(this.file.content || '');\n    }\n\n    @tuiPure\n    private calculateFileSize$(\n        file: TuiFileLike,\n        units$: Observable<[string, string, string]>,\n    ): Observable<string | null> {\n        return units$.pipe(map(units => formatSize(units, file.size)));\n    }\n\n    @tuiPure\n    private createPreview(file: TuiFileLike, sanitizer: DomSanitizer): SafeValue {\n        if (file.src) {\n            return file.src;\n        }\n\n        if (file instanceof File && file.type && file.type.startsWith('image/')) {\n            return sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file));\n        }\n\n        return '';\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiDroppableModule,\n    TuiFocusableModule,\n    TuiFocusedModule,\n    TuiFocusVisibleModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiPressedModule,\n    TuiPreventDefaultModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiButtonModule,\n    TuiGroupModule,\n    TuiLinkModule,\n    TuiLoaderModule,\n    TuiSvgModule,\n    TuiWrapperModule,\n} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiFileComponent} from './file/file.component';\nimport {TuiInputFileComponent} from './input-file.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        PolymorpheusModule,\n        TuiLetModule,\n        TuiFocusedModule,\n        TuiFocusVisibleModule,\n        TuiPressedModule,\n        TuiHoveredModule,\n        TuiFocusableModule,\n        TuiDroppableModule,\n        TuiWrapperModule,\n        TuiSvgModule,\n        TuiLinkModule,\n        TuiLoaderModule,\n        TuiButtonModule,\n        TuiPreventDefaultModule,\n        TuiGroupModule,\n    ],\n    declarations: [TuiFileComponent, TuiInputFileComponent],\n    exports: [TuiInputFileComponent],\n})\nexport class TuiInputFileModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}