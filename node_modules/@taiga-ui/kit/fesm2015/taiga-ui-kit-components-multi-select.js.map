{"version":3,"file":"taiga-ui-kit-components-multi-select.js","sources":["ng://@taiga-ui/kit/components/multi-select/multi-select.component.ts","ng://@taiga-ui/kit/components/multi-select/hide-selected.pipe.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group-reset.directive.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group.component.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group.directive.ts","ng://@taiga-ui/kit/components/multi-select/multi-select.module.ts","ng://@taiga-ui/kit/components/multi-select/taiga-ui-kit-components-multi-select.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    Self,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiMultipleControl,\n    ALWAYS_FALSE_HANDLER,\n    EMPTY_ARRAY,\n    isNativeFocused,\n    setNativeFocused,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    TUI_DEFAULT_STRINGIFY,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TuiBooleanHandler,\n    TuiContextWithImplicit,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiIdentityMatcher,\n    TuiMapper,\n    tuiPure,\n    TuiStringHandler,\n} from '@taiga-ui/cdk';\nimport {\n    TUI_DATA_LIST_ACCESSOR,\n    TUI_DATA_LIST_HOST,\n    TUI_TEXTFIELD_LABEL_OUTSIDE,\n    TuiDataListAccessor,\n    TuiDataListDirective,\n    TuiDataListHost,\n    TuiHostedDropdownComponent,\n    TuiSvgService,\n    TuiTextfieldLabelOutsideDirective,\n} from '@taiga-ui/core';\nimport {TuiStringifiableItem} from '@taiga-ui/kit/classes';\nimport {TuiInputTagComponent} from '@taiga-ui/kit/components/input-tag';\nimport {iconBlank} from '@taiga-ui/kit/constants';\nimport {FIXED_DROPDOWN_CONTROLLER_PROVIDER} from '@taiga-ui/kit/providers';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\n\n@Component({\n    selector: 'tui-multi-select',\n    templateUrl: './multi-select.template.html',\n    styleUrls: ['./multi-select.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiMultiSelectComponent),\n        },\n        {\n            provide: TUI_DATA_LIST_HOST,\n            useExisting: forwardRef(() => TuiMultiSelectComponent),\n        },\n        FIXED_DROPDOWN_CONTROLLER_PROVIDER,\n    ],\n})\nexport class TuiMultiSelectComponent<T>\n    extends AbstractTuiMultipleControl<T>\n    implements TuiFocusableElementAccessor, TuiDataListHost<T> {\n    @Input()\n    @tuiDefaultProp()\n    stringify: TuiStringHandler<T> = TUI_DEFAULT_STRINGIFY;\n\n    @Input()\n    @tuiDefaultProp()\n    identityMatcher: TuiIdentityMatcher<T> = TUI_DEFAULT_IDENTITY_MATCHER;\n\n    @Input()\n    @tuiDefaultProp()\n    expandable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    search: string | null = '';\n\n    @Input()\n    @HostBinding('class._editable')\n    @tuiDefaultProp()\n    editable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandler<T> = ALWAYS_FALSE_HANDLER;\n\n    @Input()\n    @tuiDefaultProp()\n    valueContent: PolymorpheusContent<TuiContextWithImplicit<ReadonlyArray<T>>> = '';\n\n    @Output()\n    readonly searchChange = new EventEmitter<string | null>();\n\n    open = false;\n\n    readonly valueMapper: TuiMapper<\n        ReadonlyArray<T>,\n        ReadonlyArray<TuiStringifiableItem<T>>\n    > = (value, stringify: TuiStringHandler<T>, group: boolean) =>\n        group\n            ? EMPTY_ARRAY\n            : value.map(item => new TuiStringifiableItem(item, stringify));\n\n    readonly disabledItemHandlerWrapper: TuiMapper<\n        TuiBooleanHandler<T>,\n        TuiBooleanHandler<TuiStringifiableItem<T>>\n    > = handler => stringifiable =>\n        typeof stringifiable === 'string' || handler(stringifiable.item);\n\n    @ContentChild(TuiDataListDirective, {read: TemplateRef})\n    readonly datalist: PolymorpheusContent = '';\n\n    @ContentChild(TUI_DATA_LIST_ACCESSOR as any)\n    private readonly accessor?: TuiDataListAccessor<T>;\n\n    @ViewChild(TuiHostedDropdownComponent)\n    private readonly hostedDropdown?: TuiHostedDropdownComponent;\n\n    @ViewChild(TuiInputTagComponent)\n    private readonly input?: TuiInputTagComponent;\n\n    constructor(\n        @Optional()\n        @Self()\n        @Inject(NgControl)\n        control: NgControl | null,\n        @Inject(ChangeDetectorRef) changeDetectorRef: ChangeDetectorRef,\n        @Inject(TuiSvgService) svgService: TuiSvgService,\n        @Inject(TUI_TEXTFIELD_LABEL_OUTSIDE)\n        readonly textfieldLabelOutside: TuiTextfieldLabelOutsideDirective,\n    ) {\n        super(control, changeDetectorRef);\n\n        svgService.define({iconBlank});\n    }\n\n    get nativeFocusableElement(): HTMLInputElement | null {\n        return this.input ? this.input.nativeFocusableElement : null;\n    }\n\n    get focused(): boolean {\n        return (\n            (!!this.input && this.input.focused) ||\n            (!!this.hostedDropdown && this.hostedDropdown.focused)\n        );\n    }\n\n    get computedValue(): ReadonlyArray<T> {\n        return this.computedGroup ? EMPTY_ARRAY : this.value;\n    }\n\n    // @bad TODO: think of a better way\n    get searchOrSpace(): string {\n        return this.computedGroup ? ' ' : this.searchString;\n    }\n\n    get searchString(): string {\n        return this.search === null ? '' : this.search;\n    }\n\n    get tagIcon(): string {\n        return this.interactive ? 'iconBlank' : 'tuiIconChevronDownLarge';\n    }\n\n    get interactive(): boolean {\n        return !this.disabled && !this.readOnly;\n    }\n\n    get inputHidden(): boolean {\n        return !this.editable && !this.computedGroup;\n    }\n\n    get computedGroup(): boolean {\n        return (\n            !!this.valueContent &&\n            this.value.length > 0 &&\n            (!this.focused || !this.editable)\n        );\n    }\n\n    get context(): TuiContextWithImplicit<ReadonlyArray<T>> {\n        return this.getContext(this.value);\n    }\n\n    @tuiPure\n    getStringifier(\n        stringify: TuiStringHandler<T>,\n    ): TuiStringHandler<TuiContextWithImplicit<T>> {\n        return ({$implicit}) => stringify($implicit);\n    }\n\n    onHoveredChange(hovered: boolean) {\n        this.updateHovered(hovered);\n    }\n\n    onSpace(event: KeyboardEvent) {\n        if (!this.editable) {\n            event.preventDefault();\n        }\n\n        if (!this.readOnly) {\n            this.open = true;\n        }\n    }\n\n    handleOption(option: T) {\n        const {value, identityMatcher} = this;\n        const index = value.findIndex(item => identityMatcher(item, option));\n\n        this.updateValue(\n            index === -1\n                ? [...value, option]\n                : [...value.slice(0, index), ...value.slice(index + 1)],\n        );\n        this.updateSearch(null);\n    }\n\n    onEnter(event: KeyboardEvent) {\n        const {value} = this;\n        const options = this.accessor ? this.accessor.getOptions() : [];\n\n        if (options.length !== 1) {\n            return;\n        }\n\n        const index = value.indexOf(options[0]);\n\n        event.preventDefault();\n        this.updateValue(\n            index === -1\n                ? [...value, options[0]]\n                : [...value.slice(0, index), ...value.slice(index + 1)],\n        );\n        this.updateSearch(null);\n    }\n\n    onClick({nativeFocusableElement}: TuiInputTagComponent) {\n        if (\n            this.interactive &&\n            nativeFocusableElement &&\n            isNativeFocused(nativeFocusableElement)\n        ) {\n            this.open = !this.open;\n        }\n    }\n\n    onArrowClick() {\n        this.open = !this.open;\n        this.focusInput();\n    }\n\n    onInput(value: ReadonlyArray<TuiStringifiableItem<T>>) {\n        this.updateValue(value.map(({item}) => item));\n    }\n\n    onSearch(search: string | null) {\n        this.open = true;\n        this.updateSearch(search);\n    }\n\n    onActiveZone(active: boolean) {\n        this.updateFocused(active);\n    }\n\n    setDisabledState() {\n        super.setDisabledState();\n        this.open = false;\n    }\n\n    private updateSearch(search: string | null) {\n        if (this.search === search) {\n            return;\n        }\n\n        this.search = search;\n        this.searchChange.emit(search);\n    }\n\n    private focusInput(preventScroll: boolean = false) {\n        if (this.nativeFocusableElement) {\n            setNativeFocused(this.nativeFocusableElement, true, preventScroll);\n        }\n    }\n\n    @tuiPure\n    private getContext(\n        $implicit: ReadonlyArray<T>,\n    ): TuiContextWithImplicit<ReadonlyArray<T>> {\n        return {$implicit};\n    }\n}\n","import {Inject, Optional, Pipe, PipeTransform} from '@angular/core';\nimport {TuiIdentityMatcher, tuiPure} from '@taiga-ui/cdk';\nimport {TuiMultiSelectComponent} from './multi-select.component';\n\n// TODO: Remove Optional and second argument when Angular is upgraded to 9+\n@Pipe({\n    name: 'tuiHideSelected',\n    pure: false,\n})\nexport class TuiHideSelectedPipe<T> implements PipeTransform {\n    constructor(\n        @Optional()\n        @Inject(TuiMultiSelectComponent)\n        private readonly component: TuiMultiSelectComponent<T>,\n    ) {}\n\n    transform(items: null, component?: unknown): null;\n    transform(items: ReadonlyArray<T>, component?: TuiMultiSelectComponent<T>): null;\n    transform(\n        items: ReadonlyArray<T> | null,\n        {value, identityMatcher}: TuiMultiSelectComponent<T> = this.component,\n    ): ReadonlyArray<T> | null {\n        return items && this.filter(items, value, identityMatcher);\n    }\n\n    @tuiPure\n    private filter(\n        items: ReadonlyArray<T>,\n        value: ReadonlyArray<T>,\n        matcher: TuiIdentityMatcher<T>,\n    ): ReadonlyArray<T> {\n        return items.filter(item => value.every(selected => !matcher(selected, item)));\n    }\n}\n","import {Directive} from '@angular/core';\nimport {TUI_OPTION_CONTENT} from '@taiga-ui/core';\n\n// TODO: Remove and switch to viewProviders when Angular is updated to Ivy\n/** @deprecated */\n@Directive({\n    selector: '[tuiMultiSelectGroupReset]',\n    providers: [\n        {\n            provide: TUI_OPTION_CONTENT,\n            useValue: null,\n        },\n    ],\n})\nexport class TuiMultiSelectGroupResetDirective {}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    Inject,\n    Input,\n    QueryList,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    EMPTY_QUERY,\n    getOriginalArrayFromQueryList,\n    isPresent,\n    itemsQueryListObservable,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    tuiDefaultProp,\n    TuiIdentityMatcher,\n    tuiPure,\n    tuiReplayedValueChangesFrom,\n} from '@taiga-ui/cdk';\nimport {\n    sizeBigger,\n    TUI_DATA_LIST_HOST,\n    TuiDataListHost,\n    TuiOptionComponent,\n    TuiSizeL,\n    TuiSizeXS,\n} from '@taiga-ui/core';\nimport {combineLatest, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-opt-group[tuiMultiSelectGroup]',\n    templateUrl: './multi-select-group.template.html',\n    styleUrls: ['./multi-select-group.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiMultiSelectGroupComponent<T> {\n    @Input()\n    @tuiDefaultProp()\n    label = '';\n\n    @ContentChildren(TuiOptionComponent)\n    private readonly options: QueryList<TuiOptionComponent<T>> = EMPTY_QUERY;\n\n    constructor(\n        @Inject(TUI_DATA_LIST_HOST) private readonly host: TuiDataListHost<T>,\n        @Inject(NgControl) private readonly control: NgControl,\n    ) {}\n\n    get size(): TuiSizeXS | TuiSizeL {\n        return (this.options.first && this.options.first.size) || 'm';\n    }\n\n    get checkboxSize(): TuiSizeL {\n        return this.options.first && sizeBigger(this.options.first.size) ? 'l' : 'm';\n    }\n\n    @tuiPure\n    get empty$(): Observable<boolean> {\n        return itemsQueryListObservable(this.options).pipe(map(({length}) => !length));\n    }\n\n    @tuiPure\n    get disabled$(): Observable<boolean> {\n        return itemsQueryListObservable(this.options).pipe(\n            map(items => items.every(({disabled}) => disabled)),\n        );\n    }\n\n    @tuiPure\n    get value$(): Observable<boolean | null> {\n        return combineLatest(this.items$, this.valueChanges$).pipe(\n            map(([items, current]) => {\n                let result = false;\n\n                for (let i = 0; i < items.length; i++) {\n                    const selected = current.some(selected =>\n                        this.matcher(selected, items[i]),\n                    );\n\n                    if ((!selected && result) || (selected && !result && i)) {\n                        return null;\n                    }\n\n                    result = selected;\n                }\n\n                return result;\n            }),\n        );\n    }\n\n    onClick(checked: boolean | null) {\n        if (!this.control.control) {\n            return;\n        }\n\n        const controlValue: ReadonlyArray<T> = this.control.value || [];\n        const {values} = this;\n        const filtered = controlValue.filter(current =>\n            values.every(item => !this.matcher(current, item)),\n        );\n\n        this.control.control.setValue(checked ? filtered : [...filtered, ...values]);\n    }\n\n    private get values(): ReadonlyArray<T> {\n        return this.filter(getOriginalArrayFromQueryList(this.options));\n    }\n\n    private get matcher(): TuiIdentityMatcher<T> {\n        return this.host.identityMatcher || TUI_DEFAULT_IDENTITY_MATCHER;\n    }\n\n    @tuiPure\n    private get items$(): Observable<ReadonlyArray<T>> {\n        return itemsQueryListObservable(this.options).pipe(\n            map(options => options.map(({value}) => value).filter(isPresent)),\n        );\n    }\n\n    @tuiPure\n    private get valueChanges$(): Observable<ReadonlyArray<T>> {\n        return tuiReplayedValueChangesFrom<ReadonlyArray<T>>(this.control).pipe(\n            map(value => value || []),\n        );\n    }\n\n    @tuiPure\n    private filter(items: ReadonlyArray<TuiOptionComponent<T>>): ReadonlyArray<T> {\n        return items.map(({value}) => value).filter(isPresent);\n    }\n}\n","import {Directive, forwardRef, Optional} from '@angular/core';\nimport {NG_VALUE_ACCESSOR, NgControl} from '@angular/forms';\nimport {EMPTY_FUNCTION} from '@taiga-ui/cdk';\nimport {TUI_DATA_LIST_HOST, TUI_OPTION_CONTENT, TuiDataListHost} from '@taiga-ui/core';\nimport {TUI_MULTI_SELECT_OPTION} from '@taiga-ui/kit/components/multi-select-option';\nimport {TuiMultiSelectComponent} from '../multi-select.component';\n\nexport function hostFallbackFactory<T>(\n    control: NgControl,\n    host: TuiDataListHost<T> | null,\n): TuiDataListHost<T> {\n    return (\n        host || {\n            handleOption: option => {\n                if (!control.control) {\n                    return;\n                }\n\n                const value = control.value || [];\n                const index = value.indexOf(option);\n\n                control.control.setValue(\n                    index === -1\n                        ? [...value, option]\n                        : [...value.slice(0, index), ...value.slice(index + 1)],\n                );\n            },\n        }\n    );\n}\n\n@Directive({\n    selector: '[tuiMultiSelectGroup]',\n    providers: [\n        {\n            provide: TUI_OPTION_CONTENT,\n            useValue: TUI_MULTI_SELECT_OPTION,\n        },\n        {\n            provide: TUI_DATA_LIST_HOST,\n            deps: [\n                NgControl,\n                [new Optional(), forwardRef(() => TuiMultiSelectComponent)],\n            ],\n            useFactory: hostFallbackFactory,\n        },\n        {\n            provide: NG_VALUE_ACCESSOR,\n            multi: true,\n            useValue: {\n                writeValue: EMPTY_FUNCTION,\n                registerOnChange: EMPTY_FUNCTION,\n                registerOnTouched: EMPTY_FUNCTION,\n            },\n        },\n    ],\n})\nexport class TuiMultiSelectGroupDirective {}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {\n    TuiActiveZoneModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiMapperPipeModule,\n    TuiPreventDefaultModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiDataListModule,\n    TuiHostedDropdownModule,\n    TuiPrimitiveCheckboxModule,\n    TuiSvgModule,\n} from '@taiga-ui/core';\nimport {TuiInputTagModule} from '@taiga-ui/kit/components/input-tag';\nimport {TuiMultiSelectOptionModule} from '@taiga-ui/kit/components/multi-select-option';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiHideSelectedPipe} from './hide-selected.pipe';\nimport {TuiMultiSelectGroupResetDirective} from './multi-select-group/multi-select-group-reset.directive';\nimport {TuiMultiSelectGroupComponent} from './multi-select-group/multi-select-group.component';\nimport {TuiMultiSelectGroupDirective} from './multi-select-group/multi-select-group.directive';\nimport {TuiMultiSelectComponent} from './multi-select.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        PolymorpheusModule,\n        TuiPreventDefaultModule,\n        TuiActiveZoneModule,\n        TuiLetModule,\n        TuiMapperPipeModule,\n        TuiHoveredModule,\n        TuiSvgModule,\n        TuiHostedDropdownModule,\n        TuiInputTagModule,\n        TuiMultiSelectOptionModule,\n        TuiPrimitiveCheckboxModule,\n        TuiDataListModule,\n    ],\n    declarations: [\n        TuiMultiSelectComponent,\n        TuiMultiSelectGroupComponent,\n        TuiMultiSelectGroupDirective,\n        TuiMultiSelectGroupResetDirective,\n        TuiHideSelectedPipe,\n    ],\n    exports: [\n        TuiMultiSelectComponent,\n        TuiMultiSelectGroupComponent,\n        TuiMultiSelectGroupDirective,\n        TuiHideSelectedPipe,\n    ],\n})\nexport class TuiMultiSelectModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}