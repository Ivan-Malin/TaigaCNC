{"version":3,"file":"taiga-ui-kit-components-accordion.js","sources":["ng://@taiga-ui/kit/components/accordion/accordion-item/accordion-item-content.directive.ts","ng://@taiga-ui/kit/components/accordion/accordion-item/accordion-item.component.ts","ng://@taiga-ui/kit/components/accordion/accordion.component.ts","ng://@taiga-ui/kit/components/accordion/accordion.module.ts","ng://@taiga-ui/kit/components/accordion/taiga-ui-kit-components-accordion.ts"],"sourcesContent":["import {ChangeDetectorRef, Directive, Inject, Self, TemplateRef} from '@angular/core';\nimport {PolymorpheusTemplate} from '@tinkoff/ng-polymorpheus';\n\n// TODO: do not rebuild the template, think about \"lazy\" flag\n@Directive({\n    selector: '[tuiAccordionItemContent]',\n})\nexport class TuiAccordionItemContentDirective extends PolymorpheusTemplate<{}> {\n    constructor(\n        @Inject(TemplateRef)\n        @Self()\n        templateRef: TemplateRef<{}>,\n        @Inject(ChangeDetectorRef) changeDetectorRef: ChangeDetectorRef,\n    ) {\n        super(templateRef, changeDetectorRef);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n    ViewChild,\n} from '@angular/core';\nimport {\n    AbstractTuiInteractive,\n    isNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n} from '@taiga-ui/cdk';\nimport {MODE_PROVIDER, TUI_MODE, TuiBrightness, TuiSizeS} from '@taiga-ui/core';\nimport {TuiBorders} from '@taiga-ui/kit/enums';\nimport {Observable} from 'rxjs';\nimport {TuiAccordionItemContentDirective} from './accordion-item-content.directive';\n\n@Component({\n    selector: 'tui-accordion-item',\n    templateUrl: './accordion-item.template.html',\n    styleUrls: ['./accordion-item.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiAccordionItemComponent),\n        },\n        MODE_PROVIDER,\n    ],\n    host: {\n        '($.data-mode.attr)': 'mode$',\n    },\n})\nexport class TuiAccordionItemComponent\n    extends AbstractTuiInteractive\n    implements TuiFocusableElementAccessor {\n    @Input()\n    @HostBinding('class._no-padding')\n    @tuiDefaultProp()\n    noPadding = false;\n\n    @Input()\n    @HostBinding('class._has-arrow')\n    @tuiDefaultProp()\n    showArrow = true;\n\n    @Input()\n    @HostBinding('attr.data-tui-host-borders')\n    @tuiDefaultProp()\n    borders: TuiBorders | null = TuiBorders.All;\n\n    @Input()\n    @HostBinding('attr.data-tui-host-size')\n    @tuiDefaultProp()\n    size: TuiSizeS = 'm';\n\n    @Input()\n    @HostBinding('class._disabled')\n    @tuiDefaultProp()\n    disabled = false;\n\n    @Input()\n    @tuiDefaultProp()\n    disableHover = false;\n\n    @Input()\n    @tuiDefaultProp()\n    open = false;\n\n    @Input()\n    @tuiDefaultProp()\n    async = false;\n\n    @Output()\n    readonly openChange = new EventEmitter<boolean>();\n\n    @ContentChild(TuiAccordionItemContentDirective)\n    readonly content?: TuiAccordionItemContentDirective;\n\n    @ViewChild('focusableElement')\n    private readonly focusableElement?: ElementRef<TuiNativeFocusableElement>;\n\n    constructor(\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(TUI_MODE) readonly mode$: Observable<TuiBrightness | null>,\n    ) {\n        super();\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return this.disabled || !this.focusableElement\n            ? null\n            : this.focusableElement.nativeElement;\n    }\n\n    get focused(): boolean {\n        return isNativeFocused(this.nativeFocusableElement);\n    }\n\n    onHovered(hovered: boolean) {\n        if (!this.disableHover) {\n            this.updateHovered(hovered);\n        }\n    }\n\n    onFocused(focused: boolean) {\n        this.updateFocused(focused);\n    }\n\n    onFocusVisible(focusVisible: boolean) {\n        this.updateFocusVisible(focusVisible);\n    }\n\n    onRowToggle() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.updateOpen(!this.open);\n    }\n\n    onItemKeyDownEsc(event: KeyboardEvent) {\n        if (!this.focused || !this.open) {\n            return;\n        }\n\n        event.stopPropagation();\n        this.updateOpen(false);\n    }\n\n    onItemKeyDownSpace(event: KeyboardEvent) {\n        if (!this.focused) {\n            return;\n        }\n\n        event.preventDefault();\n        this.onRowToggle();\n    }\n\n    close() {\n        this.updateOpen(false);\n        this.changeDetectorRef.markForCheck();\n    }\n\n    private updateOpen(open: boolean) {\n        if (this.open === open) {\n            return;\n        }\n\n        this.open = open;\n        this.openChange.emit(open);\n    }\n}\n","import {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    Inject,\n    Input,\n    QueryList,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    identity,\n    isPresent,\n    itemsQueryListObservable,\n    tuiDefaultProp,\n    TuiDestroyService,\n} from '@taiga-ui/cdk';\nimport {merge} from 'rxjs';\nimport {filter, map, mapTo, pairwise, switchMap, takeUntil} from 'rxjs/operators';\nimport {TuiAccordionItemComponent} from './accordion-item/accordion-item.component';\n\n@Component({\n    selector: 'tui-accordion',\n    styleUrls: ['./accordion.style.less'],\n    templateUrl: 'accordion.template.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService],\n})\nexport class TuiAccordionComponent implements AfterContentInit {\n    @Input()\n    @tuiDefaultProp()\n    closeOthers = true;\n\n    @Input()\n    @tuiDefaultProp()\n    rounded = true;\n\n    @ContentChildren(TuiAccordionItemComponent)\n    readonly accordionItems: QueryList<TuiAccordionItemComponent> = EMPTY_QUERY;\n\n    constructor(\n        @Inject(TuiDestroyService)\n        private readonly destroy$: TuiDestroyService,\n    ) {}\n\n    ngAfterContentInit() {\n        const {accordionItems} = this;\n        const rows$ = itemsQueryListObservable(accordionItems);\n        const newOpenRow$ = rows$.pipe(\n            pairwise(),\n            map(([previous, current]) =>\n                current.find(item => previous.indexOf(item) === -1 && item.open),\n            ),\n            filter(isPresent),\n        );\n        const rowsOpen$ = merge(\n            rows$.pipe(\n                switchMap(rows =>\n                    merge(\n                        ...rows.map(row =>\n                            row.openChange.pipe(filter(identity), mapTo(row)),\n                        ),\n                    ),\n                ),\n            ),\n            newOpenRow$,\n        ).pipe(\n            filter(() => this.closeOthers),\n            takeUntil(this.destroy$),\n        );\n\n        rowsOpen$.subscribe(currentRow => {\n            accordionItems.forEach(row => {\n                if (currentRow !== row) {\n                    row.close();\n                }\n            });\n        });\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiFocusableModule,\n    TuiFocusedModule,\n    TuiFocusVisibleModule,\n    TuiHoveredModule,\n} from '@taiga-ui/cdk';\nimport {TuiExpandModule, TuiGroupModule, TuiSvgModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiAccordionItemContentDirective} from './accordion-item/accordion-item-content.directive';\nimport {TuiAccordionItemComponent} from './accordion-item/accordion-item.component';\nimport {TuiAccordionComponent} from './accordion.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiFocusedModule,\n        TuiFocusVisibleModule,\n        TuiFocusableModule,\n        TuiHoveredModule,\n        PolymorpheusModule,\n        TuiSvgModule,\n        TuiGroupModule,\n        TuiExpandModule,\n    ],\n    declarations: [\n        TuiAccordionComponent,\n        TuiAccordionItemComponent,\n        TuiAccordionItemContentDirective,\n    ],\n    exports: [\n        TuiAccordionComponent,\n        TuiAccordionItemComponent,\n        TuiAccordionItemContentDirective,\n    ],\n})\nexport class TuiAccordionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}