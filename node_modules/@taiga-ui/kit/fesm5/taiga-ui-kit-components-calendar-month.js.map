{"version":3,"file":"taiga-ui-kit-components-calendar-month.js","sources":["ng://@taiga-ui/kit/components/calendar-month/calendar-month.component.ts","ng://@taiga-ui/kit/components/calendar-month/calendar-month.module.ts","ng://@taiga-ui/kit/components/calendar-month/taiga-ui-kit-components-calendar-month.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\nimport {\n    ALWAYS_FALSE_HANDLER,\n    nullableSame,\n    TUI_FIRST_DAY,\n    TUI_LAST_DAY,\n    TuiBooleanHandler,\n    TuiDay,\n    tuiDefaultProp,\n    TuiMonth,\n    TuiMonthRange,\n    tuiPure,\n    TuiYear,\n} from '@taiga-ui/cdk';\nimport {TuiInteractiveState, TuiRangeState, TuiWithOptionalMinMax} from '@taiga-ui/core';\nimport {TuiMonthContext} from '@taiga-ui/kit/interfaces';\nimport {TUI_CALENDAR_MONTHS} from '@taiga-ui/kit/tokens';\nimport {TuiBooleanHandlerWithContext} from '@taiga-ui/kit/types';\nimport {Observable} from 'rxjs';\n\nconst TODAY = TuiDay.currentLocal();\n\n// @dynamic\n@Component({\n    selector: 'tui-calendar-month',\n    templateUrl: './calendar-month.template.html',\n    styleUrls: ['./calendar-month.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiCalendarMonthComponent implements TuiWithOptionalMinMax<TuiMonth> {\n    @Input()\n    @tuiDefaultProp()\n    value: TuiMonthRange | TuiMonth | null = null;\n\n    @Input()\n    @tuiDefaultProp()\n    year: TuiYear = TODAY;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandlerWithContext<\n        TuiMonth,\n        TuiMonthContext\n    > = ALWAYS_FALSE_HANDLER;\n\n    @Input()\n    @tuiDefaultProp()\n    min: TuiMonth = TUI_FIRST_DAY;\n\n    @Input()\n    @tuiDefaultProp()\n    max: TuiMonth = TUI_LAST_DAY;\n\n    @Output()\n    readonly monthClick = new EventEmitter<TuiMonth>();\n\n    @Output()\n    readonly hoveredItemChange = new EventEmitter<TuiMonth | null>();\n\n    @Output()\n    readonly yearChange = new EventEmitter<TuiYear>();\n\n    isYearPickerShown = false;\n\n    hoveredItem: TuiMonth | null = null;\n    pressedItem: TuiMonth | null = null;\n\n    constructor(\n        @Inject(TUI_CALENDAR_MONTHS) readonly months$: Observable<readonly string[]>,\n    ) {}\n\n    @HostBinding('class._single')\n    get isSingle(): boolean {\n        return (\n            this.value !== null &&\n            (this.value instanceof TuiMonth || this.value.isSingleMonth)\n        );\n    }\n\n    get previousYearDisabled(): boolean {\n        return this.year.yearSameOrBefore(this.min);\n    }\n\n    get nextYearDisabled(): boolean {\n        return this.year.yearSameOrAfter(this.max);\n    }\n\n    getItemState(item: TuiMonth): TuiInteractiveState | null {\n        const {disabledItemHandlerWithMinMax, pressedItem, hoveredItem} = this;\n\n        if (disabledItemHandlerWithMinMax(item)) {\n            return TuiInteractiveState.Disabled;\n        }\n\n        if (pressedItem !== null && pressedItem.monthSame(item)) {\n            return TuiInteractiveState.Pressed;\n        }\n\n        if (hoveredItem !== null && hoveredItem.monthSame(item)) {\n            return TuiInteractiveState.Hovered;\n        }\n\n        return null;\n    }\n\n    getItemRange(item: TuiMonth): TuiRangeState | null {\n        const {value, hoveredItem} = this;\n\n        if (value === null) {\n            return null;\n        }\n\n        if (value instanceof TuiMonth) {\n            return value.monthSame(item) ? TuiRangeState.Single : null;\n        }\n\n        const theFirstOfRange = value.from.monthSame(item) && !value.isSingleMonth;\n        const hoveredItemAfterFrom =\n            hoveredItem !== null &&\n            hoveredItem.monthAfter(value.from) &&\n            value.from.monthSame(item) &&\n            value.isSingleMonth;\n        const hoveredItemIsCandidatToBeFrom =\n            hoveredItem !== null &&\n            hoveredItem.monthSame(item) &&\n            hoveredItem.monthBefore(value.from) &&\n            value.isSingleMonth;\n\n        if (theFirstOfRange || hoveredItemAfterFrom || hoveredItemIsCandidatToBeFrom) {\n            return TuiRangeState.Start;\n        }\n\n        const theLastOfRange = value.to.monthSame(item) && !value.isSingleMonth;\n        const hoveredItemBeforeTo = value.to.monthSame(item) && !value.isSingleMonth;\n        const hoveredItemIsCandidatToBeTo =\n            hoveredItem !== null &&\n            hoveredItem.monthSame(item) &&\n            hoveredItem.monthAfter(value.from) &&\n            value.isSingleMonth;\n\n        if (theLastOfRange || hoveredItemBeforeTo || hoveredItemIsCandidatToBeTo) {\n            return TuiRangeState.End;\n        }\n\n        return value.isSingleMonth && value.from.monthSame(item)\n            ? TuiRangeState.Single\n            : null;\n    }\n\n    getTuiMonth(monthNumber: number, yearNumber: number): TuiMonth {\n        return new TuiMonth(yearNumber, monthNumber);\n    }\n\n    isItemToday(item: TuiMonth): boolean {\n        return TODAY.monthSame(item);\n    }\n\n    isItemInsideRange(month: TuiMonth): boolean {\n        const {value, hoveredItem} = this;\n\n        if (value === null || value instanceof TuiMonth) {\n            return false;\n        }\n\n        if (!value.isSingleMonth) {\n            return value.from.monthSameOrBefore(month) && value.to.monthAfter(month);\n        }\n\n        if (hoveredItem === null) {\n            return false;\n        }\n\n        const range = TuiMonthRange.sort(value.from, hoveredItem);\n\n        return range.from.monthSameOrBefore(month) && range.to.monthAfter(month);\n    }\n\n    onPickerYearClick(year: TuiYear) {\n        this.isYearPickerShown = false;\n\n        if (this.year.yearSame(year)) {\n            return;\n        }\n\n        this.year = year;\n        this.yearChange.emit(year);\n    }\n\n    onItemClick(month: TuiMonth) {\n        if (this.disabledItemHandlerWithMinMax(month)) {\n            return;\n        }\n\n        this.monthClick.emit(month);\n    }\n\n    onYearClick() {\n        this.isYearPickerShown = true;\n    }\n\n    onNextYear() {\n        this.year = this.year.append({year: 1});\n    }\n\n    onPreviousYear() {\n        this.year = this.year.append({year: -1});\n    }\n\n    onItemHovered(hovered: boolean, item: TuiMonth) {\n        this.updateHoveredItem(hovered ? item : null);\n    }\n\n    onItemPressed(pressed: boolean, item: TuiMonth) {\n        this.updatePressedItem(pressed ? item : null);\n    }\n\n    private get disabledItemHandlerWithMinMax(): TuiBooleanHandler<TuiMonth> {\n        return this.calculateDisabledItemHandlerWithMinMax(\n            this.disabledItemHandler,\n            this.value,\n            this.min,\n            this.max,\n        );\n    }\n\n    private updateHoveredItem(month: TuiMonth | null) {\n        if (nullableSame(this.hoveredItem, month, (a, b) => a.monthSame(b))) {\n            return;\n        }\n\n        this.hoveredItem = month;\n        this.hoveredItemChange.emit(month);\n    }\n\n    private updatePressedItem(item: TuiMonth | null) {\n        this.pressedItem = item;\n    }\n\n    @tuiPure\n    private calculateDisabledItemHandlerWithMinMax(\n        disabledItemHandler: TuiBooleanHandlerWithContext<TuiMonth, TuiMonthContext>,\n        value: TuiMonth | TuiMonthRange | null,\n        min: TuiMonth,\n        max: TuiMonth,\n    ): TuiBooleanHandler<TuiMonth> {\n        return item =>\n            item.monthBefore(min) ||\n            item.monthAfter(max) ||\n            disabledItemHandler(item, {value});\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiFocusableModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiPressedModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiLinkModule,\n    TuiPrimitiveSpinButtonModule,\n    TuiPrimitiveYearPickerModule,\n    TuiScrollbarModule,\n} from '@taiga-ui/core';\nimport {TuiCalendarMonthComponent} from './calendar-month.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiPrimitiveYearPickerModule,\n        TuiPrimitiveSpinButtonModule,\n        TuiScrollbarModule,\n        TuiLinkModule,\n        TuiLetModule,\n        TuiHoveredModule,\n        TuiPressedModule,\n        TuiFocusableModule,\n    ],\n    declarations: [TuiCalendarMonthComponent],\n    exports: [TuiCalendarMonthComponent],\n})\nexport class TuiCalendarMonthModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}