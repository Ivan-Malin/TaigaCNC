{"version":3,"file":"taiga-ui-kit-components-input-file.js","sources":["ng://@taiga-ui/kit/components/input-file/input-file.component.ts","ng://@taiga-ui/kit/components/input-file/file/file.component.ts","ng://@taiga-ui/kit/components/input-file/input-file.module.ts","ng://@taiga-ui/kit/components/input-file/taiga-ui-kit-components-input-file.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    Self,\n    ViewChild,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiNullableControl,\n    EMPTY_ARRAY,\n    isNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TUI_IS_MOBILE,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {\n    MODE_PROVIDER,\n    TUI_MODE,\n    TuiAppearance,\n    TuiBrightness,\n    TuiSizeL,\n} from '@taiga-ui/core';\nimport {TuiFileLike} from '@taiga-ui/kit/interfaces';\nimport {TUI_DIGITAL_INFORMATION_UNITS, TUI_INPUT_FILE_TEXTS} from '@taiga-ui/kit/tokens';\nimport {formatSize} from '@taiga-ui/kit/utils/files';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nconst DEFAULT_MAX_SIZE = 30 * 1000 * 1000; // 30 MB\n\n// @dynamic\n@Component({\n    selector: 'tui-input-file',\n    templateUrl: './input-file.template.html',\n    styleUrls: ['./input-file.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        MODE_PROVIDER,\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiInputFileComponent),\n        },\n    ],\n})\nexport class TuiInputFileComponent\n    extends AbstractTuiNullableControl<TuiFileLike | ReadonlyArray<TuiFileLike>>\n    implements TuiFocusableElementAccessor {\n    @Input()\n    @tuiDefaultProp()\n    link: PolymorpheusContent = '';\n\n    @Input()\n    @tuiDefaultProp()\n    label: PolymorpheusContent = '';\n\n    @Input()\n    @tuiDefaultProp()\n    accept = '';\n\n    @Input()\n    @tuiDefaultProp()\n    multiple = false;\n\n    @Input()\n    @tuiDefaultProp()\n    size: TuiSizeL = 'm';\n\n    @Input()\n    @tuiDefaultProp()\n    showSize = true;\n\n    @Input()\n    @tuiDefaultProp()\n    maxFileSize = DEFAULT_MAX_SIZE;\n\n    @Input()\n    @tuiDefaultProp()\n    loadingFiles: ReadonlyArray<TuiFileLike> = [];\n\n    @Input()\n    @tuiDefaultProp()\n    rejectedFiles: ReadonlyArray<TuiFileLike> = [];\n\n    @Output()\n    rejectedFilesChange = new EventEmitter<ReadonlyArray<TuiFileLike>>();\n\n    @ViewChild('input')\n    readonly input?: ElementRef<HTMLInputElement>;\n\n    private dataTransfer: DataTransfer | null = null;\n\n    constructor(\n        @Optional()\n        @Self()\n        @Inject(NgControl)\n        control: NgControl | null,\n        @Inject(ChangeDetectorRef)\n        changeDetectorRef: ChangeDetectorRef,\n        @Inject(TUI_IS_MOBILE)\n        readonly isMobile: boolean,\n        @Inject(TUI_INPUT_FILE_TEXTS)\n        readonly inputFileTexts$: Observable<\n            Record<\n                | 'defaultLabelSingle'\n                | 'defaultLabelMultiple'\n                | 'defaultLinkSingle'\n                | 'defaultLinkMultiple'\n                | 'maxSizeRejectionReason'\n                | 'formatRejectionReason'\n                | 'drop'\n                | 'dropMultiple',\n                string\n            >\n        >,\n        @Inject(TUI_MODE) readonly mode$: Observable<TuiBrightness | null>,\n        @Inject(TUI_DIGITAL_INFORMATION_UNITS)\n        readonly units$: Observable<[string, string, string]>,\n    ) {\n        super(control, changeDetectorRef);\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return this.input ? this.input.nativeElement : null;\n    }\n\n    get focused(): boolean {\n        return isNativeFocused(this.nativeFocusableElement);\n    }\n\n    get allowDelete(): boolean {\n        return !this.computedDisabled && !this.readOnly;\n    }\n\n    get computedLink$(): Observable<PolymorpheusContent> {\n        return this.computeLink$(this.fileDragged, this.multiple, this.link);\n    }\n\n    get computedLabel$(): Observable<PolymorpheusContent> {\n        return this.computeLabel$(\n            this.isMobile,\n            this.fileDragged,\n            this.multiple,\n            this.label,\n        );\n    }\n\n    // @bad TODO: refactor after IE is dropped\n    get fileDragged(): boolean {\n        return (\n            !!this.dataTransfer &&\n            Array.prototype.indexOf.call(this.dataTransfer.types, 'Files') !== -1\n        );\n    }\n\n    get acceptArray(): readonly string[] {\n        return this.getAcceptArray(this.accept);\n    }\n\n    get arrayValue(): ReadonlyArray<TuiFileLike> {\n        return this.getValueArray(this.value);\n    }\n\n    get readyFiles(): ReadonlyArray<TuiFileLike> {\n        return this.getReadyFiles(this.arrayValue, this.loadingFiles);\n    }\n\n    get computedLoading(): ReadonlyArray<TuiFileLike> {\n        return this.getLoadingFiles(this.arrayValue, this.loadingFiles);\n    }\n\n    get hasFiles(): boolean {\n        return !!this.rejectedFiles.length || !!this.arrayValue.length;\n    }\n\n    onHovered(hovered: boolean) {\n        this.updateHovered(hovered);\n    }\n\n    onFocused(focused: boolean) {\n        this.updateFocused(focused);\n    }\n\n    onPressed(pressed: boolean) {\n        this.updatePressed(pressed);\n    }\n\n    // TODO: refactor i18n messages\n    onFilesSelected(\n        input: HTMLInputElement,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        this.processSelectedFiles(input.files, texts, units);\n        input.value = '';\n    }\n\n    onDropped(\n        event: DataTransfer,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        this.processSelectedFiles(event.files, texts, units);\n    }\n\n    onDragOver(dataTransfer: DataTransfer | null) {\n        this.dataTransfer = dataTransfer;\n    }\n\n    removeFile(removedFile: TuiFileLike) {\n        this.updateValue(\n            this.multiple ? this.arrayValue.filter(file => file !== removedFile) : null,\n        );\n    }\n\n    removeRejectedFile(removedFile: TuiFileLike) {\n        this.updateRejectedFiles(this.rejectedFiles.filter(file => file !== removedFile));\n    }\n\n    getAppearance(mode: null | unknown): string {\n        return mode === null ? '' : TuiAppearance.Outline;\n    }\n\n    @tuiPure\n    private computeLink$(\n        fileDragged: boolean,\n        multiple: boolean,\n        link: PolymorpheusContent,\n    ): Observable<PolymorpheusContent> {\n        if (fileDragged) {\n            return of('');\n        }\n\n        return this.inputFileTexts$.pipe(\n            map(texts =>\n                multiple && link === ''\n                    ? texts.defaultLinkMultiple\n                    : link || texts.defaultLinkSingle,\n            ),\n        );\n    }\n\n    @tuiPure\n    private computeLabel$(\n        isMobile: boolean,\n        fileDragged: boolean,\n        multiple: boolean,\n        label: PolymorpheusContent,\n    ): Observable<PolymorpheusContent> {\n        if (isMobile) {\n            return of('');\n        }\n\n        if (fileDragged) {\n            return this.inputFileTexts$.pipe(\n                map(texts => (multiple ? texts.dropMultiple : texts.drop)),\n            );\n        }\n\n        return this.inputFileTexts$.pipe(\n            map(texts =>\n                multiple && label === ''\n                    ? texts.defaultLabelMultiple\n                    : label || texts.defaultLabelSingle,\n            ),\n        );\n    }\n\n    @tuiPure\n    private getValueArray(\n        value: TuiFileLike | ReadonlyArray<TuiFileLike> | null,\n    ): ReadonlyArray<TuiFileLike> {\n        if (!value) {\n            return EMPTY_ARRAY;\n        }\n\n        return value instanceof Array ? value : [value];\n    }\n\n    @tuiPure\n    private getReadyFiles(\n        value: ReadonlyArray<TuiFileLike>,\n        loading: ReadonlyArray<TuiFileLike>,\n    ): ReadonlyArray<TuiFileLike> {\n        return value.filter(file => loading.indexOf(file) === -1);\n    }\n\n    @tuiPure\n    private getLoadingFiles(\n        value: ReadonlyArray<TuiFileLike>,\n        loading: ReadonlyArray<TuiFileLike>,\n    ): ReadonlyArray<TuiFileLike> {\n        return loading.filter(file => value.indexOf(file) !== -1);\n    }\n\n    @tuiPure\n    private getAcceptArray(accept: string): readonly string[] {\n        return accept.toLowerCase().split(',');\n    }\n\n    private processSelectedFiles(\n        files: FileList | null,\n        texts: Record<'maxSizeRejectionReason' | 'formatRejectionReason', string>,\n        units: [string, string, string],\n    ) {\n        // IE11 after selecting a file through the open dialog generates a second event passing an empty FileList.\n        if (files === null || files.length === 0) {\n            return;\n        }\n\n        const newFiles = this.multiple ? Array.from(files) : [files[0]];\n        const tooBigFiles = newFiles.filter(file => file.size > this.maxFileSize);\n        const wrongFormatFiles = newFiles.filter(\n            file => !this.isFormatAcceptable(file) && tooBigFiles.indexOf(file) === -1,\n        );\n        const acceptedFiles = newFiles.filter(\n            file =>\n                tooBigFiles.indexOf(file) === -1 && wrongFormatFiles.indexOf(file) === -1,\n        );\n\n        this.updateRejectedFiles([\n            ...tooBigFiles.map(file => ({\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                content:\n                    texts.maxSizeRejectionReason + formatSize(units, this.maxFileSize),\n            })),\n            ...wrongFormatFiles.map(file => ({\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                content: texts.formatRejectionReason,\n            })),\n        ]);\n        this.updateValue(\n            this.multiple\n                ? [...this.readyFiles, ...acceptedFiles]\n                : acceptedFiles[0] || null,\n        );\n    }\n\n    private isFormatAcceptable(file: File): boolean {\n        if (!this.accept) {\n            return true;\n        }\n\n        const extension = '.' + (file.name.split('.').pop() || '').toLowerCase();\n\n        return this.acceptArray.some(\n            format =>\n                format === extension ||\n                format === file.type ||\n                (format.split('/')[1] === '*' &&\n                    file.type.split('/')[0] === format.split('/')[0]),\n        );\n    }\n\n    private updateRejectedFiles(rejectedFiles: ReadonlyArray<TuiFileLike>) {\n        this.rejectedFiles = rejectedFiles;\n        this.rejectedFilesChange.emit(rejectedFiles);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    EventEmitter,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n} from '@angular/core';\nimport {DomSanitizer, SafeValue} from '@angular/platform-browser';\nimport {TUI_IS_MOBILE, tuiDefaultProp, tuiPure} from '@taiga-ui/cdk';\nimport {TuiSizeL} from '@taiga-ui/core';\nimport {TuiFileState} from '@taiga-ui/kit/enums';\nimport {TuiFileLike} from '@taiga-ui/kit/interfaces';\nimport {TUI_DIGITAL_INFORMATION_UNITS, TUI_FILE_TEXTS} from '@taiga-ui/kit/tokens';\nimport {formatSize} from '@taiga-ui/kit/utils/files';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {Observable, of} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n// @dynamic\n@Component({\n    selector: 'tui-file',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: './file.template.html',\n    styleUrls: ['./file.style.less'],\n})\nexport class TuiFileComponent {\n    @Input()\n    @tuiDefaultProp()\n    file: TuiFileLike = {name: ''};\n\n    @Input()\n    @tuiDefaultProp()\n    state: TuiFileState = TuiFileState.Normal;\n\n    @Input()\n    @tuiDefaultProp()\n    size: TuiSizeL = 'm';\n\n    @Input()\n    @tuiDefaultProp()\n    allowDelete = true;\n\n    @Input()\n    @tuiDefaultProp()\n    showSize = true;\n\n    @Output()\n    readonly fileRemoved = new EventEmitter<void>();\n\n    @HostBinding('class._focused')\n    focused = false;\n\n    constructor(\n        @Inject(TUI_IS_MOBILE) readonly isMobile: boolean,\n        @Inject(DomSanitizer) private readonly sanitizer: DomSanitizer,\n        @Inject(TUI_FILE_TEXTS)\n        readonly fileTexts$: Observable<\n            Record<'loadingError' | 'preview' | 'remove', string>\n        >,\n        @Inject(TUI_DIGITAL_INFORMATION_UNITS)\n        private readonly units$: Observable<[string, string, string]>,\n    ) {}\n\n    get preview(): SafeValue {\n        return this.isBig ? this.createPreview(this.file, this.sanitizer) : '';\n    }\n\n    get isBig(): boolean {\n        return this.size === 'l';\n    }\n\n    get isLoading(): boolean {\n        return this.state === TuiFileState.Loading;\n    }\n\n    get isError(): boolean {\n        return this.state === TuiFileState.Error;\n    }\n\n    get isDeleted(): boolean {\n        return this.state === TuiFileState.Deleted;\n    }\n\n    get icon(): string {\n        if (this.state === TuiFileState.Normal && this.isBig) {\n            return 'tuiIconDefaultDocLarge';\n        }\n\n        switch (this.state) {\n            case TuiFileState.Deleted:\n                return 'tuiIconTrashLarge';\n            case TuiFileState.Error:\n                return 'tuiIconAlertCircleLarge';\n            default:\n                return 'tuiIconCheckCircleLarge';\n        }\n    }\n\n    @HostBinding('class._link')\n    get src(): string {\n        return this.file.src || '';\n    }\n\n    get name(): string {\n        return this.file.name.split('.').slice(0, -1).join('.');\n    }\n\n    get type(): string {\n        return '.' + this.file.name.split('.').pop() || '';\n    }\n\n    get content$(): Observable<PolymorpheusContent> {\n        return this.calculateContent$(this.state, this.file, this.fileTexts$);\n    }\n\n    get fileSize$(): Observable<string | null> {\n        return this.calculateFileSize$(this.file, this.units$);\n    }\n\n    onRemoveClick() {\n        this.fileRemoved.emit();\n    }\n\n    onFocusVisible(focusVisible: boolean) {\n        this.focused = focusVisible;\n    }\n\n    @tuiPure\n    private calculateContent$(\n        state: TuiFileState,\n        file: TuiFileLike,\n        fileTexts$: Observable<Record<'loadingError' | 'preview' | 'remove', string>>,\n    ): Observable<PolymorpheusContent> {\n        return state === TuiFileState.Error && !file.content\n            ? fileTexts$.pipe(map(texts => texts.loadingError))\n            : of(this.file.content || '');\n    }\n\n    @tuiPure\n    private calculateFileSize$(\n        file: TuiFileLike,\n        units$: Observable<[string, string, string]>,\n    ): Observable<string | null> {\n        return units$.pipe(map(units => formatSize(units, file.size)));\n    }\n\n    @tuiPure\n    private createPreview(file: TuiFileLike, sanitizer: DomSanitizer): SafeValue {\n        if (file.src) {\n            return file.src;\n        }\n\n        if (file instanceof File && file.type && file.type.startsWith('image/')) {\n            return sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(file));\n        }\n\n        return '';\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiDroppableModule,\n    TuiFocusableModule,\n    TuiFocusedModule,\n    TuiFocusVisibleModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiPressedModule,\n    TuiPreventDefaultModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiButtonModule,\n    TuiGroupModule,\n    TuiLinkModule,\n    TuiLoaderModule,\n    TuiSvgModule,\n    TuiWrapperModule,\n} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiFileComponent} from './file/file.component';\nimport {TuiInputFileComponent} from './input-file.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        PolymorpheusModule,\n        TuiLetModule,\n        TuiFocusedModule,\n        TuiFocusVisibleModule,\n        TuiPressedModule,\n        TuiHoveredModule,\n        TuiFocusableModule,\n        TuiDroppableModule,\n        TuiWrapperModule,\n        TuiSvgModule,\n        TuiLinkModule,\n        TuiLoaderModule,\n        TuiButtonModule,\n        TuiPreventDefaultModule,\n        TuiGroupModule,\n    ],\n    declarations: [TuiFileComponent, TuiInputFileComponent],\n    exports: [TuiInputFileComponent],\n})\nexport class TuiInputFileModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}