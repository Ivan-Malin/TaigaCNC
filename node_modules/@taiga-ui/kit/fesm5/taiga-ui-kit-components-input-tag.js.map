{"version":3,"file":"taiga-ui-kit-components-input-tag.js","sources":["ng://@taiga-ui/kit/components/input-tag/input-tag.component.ts","ng://@taiga-ui/kit/components/input-tag/input-tag.module.ts","ng://@taiga-ui/kit/components/input-tag/taiga-ui-kit-components-input-tag.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    QueryList,\n    Self,\n    TemplateRef,\n    ViewChild,\n    ViewChildren,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiMultipleControl,\n    ALWAYS_FALSE_HANDLER,\n    ALWAYS_TRUE_HANDLER,\n    EMPTY_QUERY,\n    getActualTarget,\n    isNativeFocusedIn,\n    preventDefault,\n    setNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TuiActiveZoneDirective,\n    TuiBooleanHandler,\n    TuiContextWithImplicit,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiScrollService,\n    typedFromEvent,\n} from '@taiga-ui/cdk';\nimport {\n    HINT_CONTROLLER_PROVIDER,\n    TEXTFIELD_CONTROLLER_PROVIDER,\n    TUI_DATA_LIST_HOST,\n    TUI_HINT_WATCHED_CONTROLLER,\n    TUI_TEXTFIELD_APPEARANCE,\n    TUI_TEXTIFELD_WATCHED_CONTROLLER,\n    TuiDataListDirective,\n    TuiDataListHost,\n    TuiHintControllerDirective,\n    TuiHorizontalDirection,\n    TuiHostedDropdownComponent,\n    TuiModeDirective,\n    TuiScrollbarComponent,\n    TuiSizeL,\n    TuiSizeS,\n    TuiTextfieldController,\n} from '@taiga-ui/core';\nimport {ALLOWED_SPACE_REGEXP} from '@taiga-ui/kit/components/tag';\nimport {TuiStatus} from '@taiga-ui/kit/enums';\nimport {FIXED_DROPDOWN_CONTROLLER_PROVIDER} from '@taiga-ui/kit/providers';\nimport {TUI_TAG_STATUS} from '@taiga-ui/kit/tokens';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\nimport {merge, Subject} from 'rxjs';\nimport {filter, map, mapTo, switchMap, takeUntil} from 'rxjs/operators';\n\nconst EVENT_Y_TO_X_COEFFICENT = 3;\n\n@Component({\n    selector: 'tui-input-tag',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    templateUrl: './input-tag.template.html',\n    styleUrls: ['./input-tag.style.less'],\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiInputTagComponent),\n        },\n        {\n            provide: TUI_DATA_LIST_HOST,\n            useExisting: forwardRef(() => TuiInputTagComponent),\n        },\n        FIXED_DROPDOWN_CONTROLLER_PROVIDER,\n        TEXTFIELD_CONTROLLER_PROVIDER,\n        HINT_CONTROLLER_PROVIDER,\n    ],\n})\nexport class TuiInputTagComponent\n    extends AbstractTuiMultipleControl<string>\n    implements TuiFocusableElementAccessor, TuiDataListHost<string> {\n    @Input()\n    @tuiDefaultProp()\n    allowSpaces = true;\n\n    @Input()\n    @tuiDefaultProp()\n    icon = '';\n\n    @Input()\n    @tuiDefaultProp()\n    iconAlign: TuiHorizontalDirection = 'right';\n\n    @Input()\n    @tuiDefaultProp()\n    search = '';\n\n    @Input()\n    @tuiDefaultProp()\n    editable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    tagValidator: TuiBooleanHandler<string> = ALWAYS_TRUE_HANDLER;\n\n    @Input()\n    @HostBinding('class._expandable')\n    @tuiDefaultProp()\n    expandable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    inputHidden = false;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandler<string> = ALWAYS_FALSE_HANDLER;\n\n    @Input('pseudoFocused')\n    set pseudoFocusedSetter(value: boolean | null) {\n        if (!value && !this.focused) {\n            this.scrollToStart$.next();\n        }\n\n        this.pseudoFocused = value;\n    }\n\n    @Output()\n    readonly searchChange = new EventEmitter<string>();\n\n    open = false;\n\n    @ViewChild(TuiScrollbarComponent)\n    set scrollerSetter(scroller: TuiScrollbarComponent | null) {\n        this.initScrollerSubscrition(scroller);\n    }\n\n    @ContentChild(TuiDataListDirective, {read: TemplateRef})\n    readonly datalist?: TemplateRef<TuiContextWithImplicit<TuiActiveZoneDirective>>;\n\n    @ViewChild('errorIcon')\n    readonly errorIconTemplate?: TemplateRef<{}>;\n\n    @ViewChild(TuiHostedDropdownComponent)\n    private readonly dropdown?: TuiHostedDropdownComponent;\n\n    @ViewChild('focusableElement')\n    private readonly focusableElement?: ElementRef<HTMLInputElement>;\n\n    @ViewChild('tagsContainer')\n    private readonly tagsContainer?: ElementRef<HTMLElement>;\n\n    @ViewChildren('tag', {read: ElementRef})\n    private readonly tags: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    private readonly scrollToStart$ = new Subject<void>();\n    private readonly scrollToEnd$ = new Subject<void>();\n\n    @ViewChild('cleaner', {read: ElementRef})\n    private readonly cleanerSvg?: ElementRef<HTMLElement>;\n\n    constructor(\n        @Optional()\n        @Self()\n        @Inject(NgControl)\n        control: NgControl | null,\n        @Inject(ChangeDetectorRef) changeDetectorRef: ChangeDetectorRef,\n        @Inject(TuiScrollService) private tuiScrollService: TuiScrollService,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n        @Inject(TUI_TEXTFIELD_APPEARANCE) readonly appearance: string,\n        @Optional()\n        @Inject(TuiModeDirective)\n        private readonly modeDirective: TuiModeDirective | null,\n        @Inject(TUI_TAG_STATUS) private readonly tagStatus: TuiStatus,\n        @Inject(TUI_HINT_WATCHED_CONTROLLER)\n        readonly hintController: TuiHintControllerDirective,\n        @Inject(TUI_TEXTIFELD_WATCHED_CONTROLLER)\n        readonly controller: TuiTextfieldController,\n    ) {\n        super(control, changeDetectorRef);\n    }\n\n    get nativeFocusableElement(): HTMLInputElement | null {\n        return !this.focusableElement || this.computedDisabled\n            ? null\n            : this.focusableElement.nativeElement;\n    }\n\n    get focused(): boolean {\n        return (\n            isNativeFocusedIn(this.elementRef.nativeElement) ||\n            (!!this.dropdown && this.dropdown.focused)\n        );\n    }\n\n    @HostBinding('attr.data-tui-host-size')\n    get size(): TuiSizeL | TuiSizeS {\n        return this.controller.size;\n    }\n\n    @HostBinding('class._label-outside')\n    get labelOutside(): boolean {\n        return this.controller.labelOutside;\n    }\n\n    get hasCleaner(): boolean {\n        return (\n            this.controller.cleaner && this.hasValue && !this.disabled && !this.readOnly\n        );\n    }\n\n    get hasNativeValue(): boolean {\n        return !!this.search;\n    }\n\n    get hasValue(): boolean {\n        return !!this.value.length || this.hasNativeValue;\n    }\n\n    get hasPlaceholder(): boolean {\n        return !this.labelOutside || (!this.hasValue && !this.hasExampleText);\n    }\n\n    get placeholderRaised(): boolean {\n        return (\n            !this.labelOutside &&\n            ((this.computedFocused && !this.readOnly) || this.hasValue)\n        );\n    }\n\n    get hasExampleText(): boolean {\n        return (\n            !!this.controller.exampleText &&\n            this.computedFocused &&\n            !this.hasValue &&\n            !this.readOnly\n        );\n    }\n\n    get hasTooltip(): boolean {\n        return !!this.hintController.content && !this.disabled;\n    }\n\n    get iconAlignLeft(): boolean {\n        return !!this.icon && this.iconAlign === 'left';\n    }\n\n    get iconAlignRight(): boolean {\n        return !!this.icon && this.iconAlign === 'right';\n    }\n\n    get hasRightIcons(): boolean {\n        return this.hasCleaner || this.hasTooltip || this.iconAlignRight;\n    }\n\n    get status(): TuiStatus {\n        return this.modeDirective && this.modeDirective.mode\n            ? TuiStatus.Default\n            : this.tagStatus;\n    }\n\n    getLeftContent(tag: string): PolymorpheusContent | null {\n        return !this.tagValidator(tag) && this.errorIconTemplate\n            ? this.errorIconTemplate\n            : null;\n    }\n\n    onCleanerClick() {\n        this.updateSearch('');\n        this.clear();\n        this.focusInput();\n    }\n\n    onActiveZone(active: boolean) {\n        this.updateFocused(active);\n\n        if (active) {\n            return;\n        }\n\n        this.open = false;\n        this.addTag();\n\n        if (!this.pseudoFocused) {\n            this.scrollToStart$.next();\n        }\n    }\n\n    onMouseDown(event: MouseEvent) {\n        const actualTarget = getActualTarget(event);\n\n        if (\n            !this.focusableElement ||\n            actualTarget === this.focusableElement.nativeElement ||\n            !(event.target instanceof Element) ||\n            (this.cleanerSvg && this.cleanerSvg.nativeElement.contains(event.target)) ||\n            (this.tagsContainer &&\n                actualTarget !== this.tagsContainer.nativeElement &&\n                this.tagsContainer.nativeElement.contains(actualTarget))\n        ) {\n            return;\n        }\n\n        event.preventDefault();\n        this.focusInput();\n    }\n\n    onFieldKeyDownBackspace(event: KeyboardEvent) {\n        if (!this.labelOutside && !this.hasNativeValue && this.value.length) {\n            this.deleteLastEnabledItem();\n        } else {\n            this.onFieldKeyDownArrowLeft(event);\n        }\n    }\n\n    onFieldKeyDownArrowLeft(event: KeyboardEvent) {\n        if (!this.labelOutside || this.hasNativeValue || !this.value.length) {\n            return;\n        }\n\n        event.preventDefault();\n        setNativeFocused(this.tags.last.nativeElement);\n    }\n\n    onFieldKeyDownEnter() {\n        this.addTag();\n        this.scrollToEnd$.next();\n    }\n\n    onTagKeyDownArrowLeft(currentIndex: number) {\n        if (currentIndex <= 0) {\n            return;\n        }\n\n        const tag = this.tags.find((_item, index) => index === currentIndex - 1);\n\n        if (tag) {\n            setNativeFocused(tag.nativeElement);\n        }\n    }\n\n    onTagKeyDownArrowRight(currentIndex: number) {\n        if (currentIndex === this.value.length - 1) {\n            this.focusInput();\n\n            return;\n        }\n\n        const tag = this.tags.find((_item, index) => index === currentIndex + 1);\n\n        if (tag) {\n            setNativeFocused(tag.nativeElement);\n        }\n    }\n\n    onTagEdited(value: string, editedTag: string) {\n        this.focusInput();\n        this.updateValue(\n            this.value\n                .map(tag =>\n                    tag !== editedTag\n                        ? tag\n                        : value\n                              .split(',')\n                              .map(tag => tag.trim())\n                              .filter(Boolean),\n                )\n                .reduce<string[]>(\n                    (result, item: string | string[]) => result.concat(item),\n                    [],\n                ),\n        );\n    }\n\n    handleOption(item: string) {\n        this.focusInput();\n        this.updateSearch('');\n        this.updateValue(this.value.concat(item));\n        this.open = false;\n        this.scrollToEnd$.next();\n    }\n\n    onInput(value: string) {\n        const array = this.allowSpaces\n            ? value.split(',')\n            : value.split(ALLOWED_SPACE_REGEXP);\n        const tags = array\n            .map(item => item.trim())\n            .filter((item, index, {length}) => item.length > 0 && index !== length - 1);\n        const validated = tags.filter(tag => !this.disabledItemHandler(tag));\n\n        if (array.length > 1) {\n            this.updateSearch(array[array.length - 1].trim());\n            this.updateValue([...this.value, ...validated]);\n        } else {\n            this.updateSearch(value);\n        }\n\n        this.open = this.hasNativeValue;\n    }\n\n    onHoveredChange(hovered: boolean) {\n        this.updateHovered(hovered);\n    }\n\n    setDisabledState() {\n        super.setDisabledState();\n        this.open = false;\n    }\n\n    private initScrollerSubscrition(scroller: TuiScrollbarComponent | null) {\n        if (!scroller || !scroller.browserScrollRef) {\n            return;\n        }\n\n        const {nativeElement} = scroller.browserScrollRef;\n\n        const wheel$ = typedFromEvent(nativeElement, 'wheel', {passive: false}).pipe(\n            filter(event => event.deltaX === 0 && this.shouldScroll(nativeElement)),\n            preventDefault(),\n            map(({deltaY}) =>\n                Math.max(nativeElement.scrollLeft + deltaY * EVENT_Y_TO_X_COEFFICENT, 0),\n            ),\n        );\n        const start$ = this.scrollToStart$.pipe(mapTo(0));\n        const end$ = this.scrollToEnd$.pipe(map(() => nativeElement.scrollWidth));\n\n        merge(wheel$, start$, end$)\n            .pipe(\n                switchMap(left => this.tuiScrollService.scroll$(nativeElement, 0, left)),\n                takeUntil(this.destroy$),\n            )\n            .subscribe();\n    }\n\n    protected updateValue(value: Array<string>) {\n        const seen = new Set();\n\n        super.updateValue(\n            value\n                .reverse()\n                .filter(item => !!item && !seen.has(item) && seen.add(item))\n                .reverse(),\n        );\n    }\n\n    private updateSearch(value: string) {\n        if (this.focusableElement) {\n            this.focusableElement.nativeElement.value = value;\n        }\n\n        this.search = value;\n        this.searchChange.emit(value);\n    }\n\n    private shouldScroll({scrollWidth, offsetWidth}: HTMLElement): boolean {\n        return scrollWidth > offsetWidth;\n    }\n\n    private addTag() {\n        const inputValue = this.search.trim();\n\n        if (!inputValue || this.disabledItemHandler(inputValue)) {\n            return;\n        }\n\n        this.updateSearch('');\n        this.updateValue(this.value.concat(inputValue));\n    }\n\n    private deleteLastEnabledItem() {\n        for (let index = this.value.length - 1; index >= 0; index--) {\n            if (!this.disabledItemHandler(this.value[index])) {\n                this.updateValue([\n                    ...this.value.slice(0, index),\n                    ...this.value.slice(index + 1, this.value.length),\n                ]);\n\n                break;\n            }\n        }\n    }\n\n    private focusInput(preventScroll: boolean = false) {\n        if (this.nativeFocusableElement) {\n            setNativeFocused(this.nativeFocusableElement, true, preventScroll);\n        }\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {\n    TuiActiveZoneModule,\n    TuiFocusableModule,\n    TuiHoveredModule,\n    TuiScrollService,\n} from '@taiga-ui/cdk';\nimport {\n    TuiHostedDropdownModule,\n    TuiScrollbarModule,\n    TuiSvgModule,\n    TuiTooltipModule,\n    TuiWrapperModule,\n} from '@taiga-ui/core';\nimport {TuiTagModule} from '@taiga-ui/kit/components/tag';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiInputTagComponent} from './input-tag.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        PolymorpheusModule,\n        TuiFocusableModule,\n        TuiHoveredModule,\n        TuiActiveZoneModule,\n        TuiSvgModule,\n        TuiScrollbarModule,\n        TuiTooltipModule,\n        TuiHostedDropdownModule,\n        TuiTagModule,\n        TuiWrapperModule,\n    ],\n    providers: [TuiScrollService],\n    declarations: [TuiInputTagComponent],\n    exports: [TuiInputTagComponent],\n})\nexport class TuiInputTagModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}