{"version":3,"file":"taiga-ui-kit-components-multi-select.js","sources":["ng://@taiga-ui/kit/components/multi-select/multi-select.component.ts","ng://@taiga-ui/kit/components/multi-select/hide-selected.pipe.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group-reset.directive.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group.component.ts","ng://@taiga-ui/kit/components/multi-select/multi-select-group/multi-select-group.directive.ts","ng://@taiga-ui/kit/components/multi-select/multi-select.module.ts","ng://@taiga-ui/kit/components/multi-select/taiga-ui-kit-components-multi-select.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Input,\n    Optional,\n    Output,\n    Self,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    AbstractTuiMultipleControl,\n    ALWAYS_FALSE_HANDLER,\n    EMPTY_ARRAY,\n    isNativeFocused,\n    setNativeFocused,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    TUI_DEFAULT_STRINGIFY,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    TuiBooleanHandler,\n    TuiContextWithImplicit,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiIdentityMatcher,\n    TuiMapper,\n    tuiPure,\n    TuiStringHandler,\n} from '@taiga-ui/cdk';\nimport {\n    TUI_DATA_LIST_ACCESSOR,\n    TUI_DATA_LIST_HOST,\n    TUI_TEXTFIELD_LABEL_OUTSIDE,\n    TuiDataListAccessor,\n    TuiDataListDirective,\n    TuiDataListHost,\n    TuiHostedDropdownComponent,\n    TuiSvgService,\n    TuiTextfieldLabelOutsideDirective,\n} from '@taiga-ui/core';\nimport {TuiStringifiableItem} from '@taiga-ui/kit/classes';\nimport {TuiInputTagComponent} from '@taiga-ui/kit/components/input-tag';\nimport {iconBlank} from '@taiga-ui/kit/constants';\nimport {FIXED_DROPDOWN_CONTROLLER_PROVIDER} from '@taiga-ui/kit/providers';\nimport {PolymorpheusContent} from '@tinkoff/ng-polymorpheus';\n\n@Component({\n    selector: 'tui-multi-select',\n    templateUrl: './multi-select.template.html',\n    styleUrls: ['./multi-select.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiMultiSelectComponent),\n        },\n        {\n            provide: TUI_DATA_LIST_HOST,\n            useExisting: forwardRef(() => TuiMultiSelectComponent),\n        },\n        FIXED_DROPDOWN_CONTROLLER_PROVIDER,\n    ],\n})\nexport class TuiMultiSelectComponent<T>\n    extends AbstractTuiMultipleControl<T>\n    implements TuiFocusableElementAccessor, TuiDataListHost<T> {\n    @Input()\n    @tuiDefaultProp()\n    stringify: TuiStringHandler<T> = TUI_DEFAULT_STRINGIFY;\n\n    @Input()\n    @tuiDefaultProp()\n    identityMatcher: TuiIdentityMatcher<T> = TUI_DEFAULT_IDENTITY_MATCHER;\n\n    @Input()\n    @tuiDefaultProp()\n    expandable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    search: string | null = '';\n\n    @Input()\n    @HostBinding('class._editable')\n    @tuiDefaultProp()\n    editable = true;\n\n    @Input()\n    @tuiDefaultProp()\n    disabledItemHandler: TuiBooleanHandler<T> = ALWAYS_FALSE_HANDLER;\n\n    @Input()\n    @tuiDefaultProp()\n    valueContent: PolymorpheusContent<TuiContextWithImplicit<ReadonlyArray<T>>> = '';\n\n    @Output()\n    readonly searchChange = new EventEmitter<string | null>();\n\n    open = false;\n\n    readonly valueMapper: TuiMapper<\n        ReadonlyArray<T>,\n        ReadonlyArray<TuiStringifiableItem<T>>\n    > = (value, stringify: TuiStringHandler<T>, group: boolean) =>\n        group\n            ? EMPTY_ARRAY\n            : value.map(item => new TuiStringifiableItem(item, stringify));\n\n    readonly disabledItemHandlerWrapper: TuiMapper<\n        TuiBooleanHandler<T>,\n        TuiBooleanHandler<TuiStringifiableItem<T>>\n    > = handler => stringifiable =>\n        typeof stringifiable === 'string' || handler(stringifiable.item);\n\n    @ContentChild(TuiDataListDirective, {read: TemplateRef})\n    readonly datalist: PolymorpheusContent = '';\n\n    @ContentChild(TUI_DATA_LIST_ACCESSOR as any)\n    private readonly accessor?: TuiDataListAccessor<T>;\n\n    @ViewChild(TuiHostedDropdownComponent)\n    private readonly hostedDropdown?: TuiHostedDropdownComponent;\n\n    @ViewChild(TuiInputTagComponent)\n    private readonly input?: TuiInputTagComponent;\n\n    constructor(\n        @Optional()\n        @Self()\n        @Inject(NgControl)\n        control: NgControl | null,\n        @Inject(ChangeDetectorRef) changeDetectorRef: ChangeDetectorRef,\n        @Inject(TuiSvgService) svgService: TuiSvgService,\n        @Inject(TUI_TEXTFIELD_LABEL_OUTSIDE)\n        readonly textfieldLabelOutside: TuiTextfieldLabelOutsideDirective,\n    ) {\n        super(control, changeDetectorRef);\n\n        svgService.define({iconBlank});\n    }\n\n    get nativeFocusableElement(): HTMLInputElement | null {\n        return this.input ? this.input.nativeFocusableElement : null;\n    }\n\n    get focused(): boolean {\n        return (\n            (!!this.input && this.input.focused) ||\n            (!!this.hostedDropdown && this.hostedDropdown.focused)\n        );\n    }\n\n    get computedValue(): ReadonlyArray<T> {\n        return this.computedGroup ? EMPTY_ARRAY : this.value;\n    }\n\n    // @bad TODO: think of a better way\n    get searchOrSpace(): string {\n        return this.computedGroup ? ' ' : this.searchString;\n    }\n\n    get searchString(): string {\n        return this.search === null ? '' : this.search;\n    }\n\n    get tagIcon(): string {\n        return this.interactive ? 'iconBlank' : 'tuiIconChevronDownLarge';\n    }\n\n    get interactive(): boolean {\n        return !this.disabled && !this.readOnly;\n    }\n\n    get inputHidden(): boolean {\n        return !this.editable && !this.computedGroup;\n    }\n\n    get computedGroup(): boolean {\n        return (\n            !!this.valueContent &&\n            this.value.length > 0 &&\n            (!this.focused || !this.editable)\n        );\n    }\n\n    get context(): TuiContextWithImplicit<ReadonlyArray<T>> {\n        return this.getContext(this.value);\n    }\n\n    @tuiPure\n    getStringifier(\n        stringify: TuiStringHandler<T>,\n    ): TuiStringHandler<TuiContextWithImplicit<T>> {\n        return ({$implicit}) => stringify($implicit);\n    }\n\n    onHoveredChange(hovered: boolean) {\n        this.updateHovered(hovered);\n    }\n\n    onSpace(event: KeyboardEvent) {\n        if (!this.editable) {\n            event.preventDefault();\n        }\n\n        if (!this.readOnly) {\n            this.open = true;\n        }\n    }\n\n    handleOption(option: T) {\n        const {value, identityMatcher} = this;\n        const index = value.findIndex(item => identityMatcher(item, option));\n\n        this.updateValue(\n            index === -1\n                ? [...value, option]\n                : [...value.slice(0, index), ...value.slice(index + 1)],\n        );\n        this.updateSearch(null);\n    }\n\n    onEnter(event: KeyboardEvent) {\n        const {value} = this;\n        const options = this.accessor ? this.accessor.getOptions() : [];\n\n        if (options.length !== 1) {\n            return;\n        }\n\n        const index = value.indexOf(options[0]);\n\n        event.preventDefault();\n        this.updateValue(\n            index === -1\n                ? [...value, options[0]]\n                : [...value.slice(0, index), ...value.slice(index + 1)],\n        );\n        this.updateSearch(null);\n    }\n\n    onClick({nativeFocusableElement}: TuiInputTagComponent) {\n        if (\n            this.interactive &&\n            nativeFocusableElement &&\n            isNativeFocused(nativeFocusableElement)\n        ) {\n            this.open = !this.open;\n        }\n    }\n\n    onArrowClick() {\n        this.open = !this.open;\n        this.focusInput();\n    }\n\n    onInput(value: ReadonlyArray<TuiStringifiableItem<T>>) {\n        this.updateValue(value.map(({item}) => item));\n    }\n\n    onSearch(search: string | null) {\n        this.open = true;\n        this.updateSearch(search);\n    }\n\n    onActiveZone(active: boolean) {\n        this.updateFocused(active);\n    }\n\n    setDisabledState() {\n        super.setDisabledState();\n        this.open = false;\n    }\n\n    private updateSearch(search: string | null) {\n        if (this.search === search) {\n            return;\n        }\n\n        this.search = search;\n        this.searchChange.emit(search);\n    }\n\n    private focusInput(preventScroll: boolean = false) {\n        if (this.nativeFocusableElement) {\n            setNativeFocused(this.nativeFocusableElement, true, preventScroll);\n        }\n    }\n\n    @tuiPure\n    private getContext(\n        $implicit: ReadonlyArray<T>,\n    ): TuiContextWithImplicit<ReadonlyArray<T>> {\n        return {$implicit};\n    }\n}\n","import {Inject, Optional, Pipe, PipeTransform} from '@angular/core';\nimport {TuiIdentityMatcher, tuiPure} from '@taiga-ui/cdk';\nimport {TuiMultiSelectComponent} from './multi-select.component';\n\n// TODO: Remove Optional and second argument when Angular is upgraded to 9+\n@Pipe({\n    name: 'tuiHideSelected',\n    pure: false,\n})\nexport class TuiHideSelectedPipe<T> implements PipeTransform {\n    constructor(\n        @Optional()\n        @Inject(TuiMultiSelectComponent)\n        private readonly component: TuiMultiSelectComponent<T>,\n    ) {}\n\n    transform(items: null, component?: unknown): null;\n    transform(items: ReadonlyArray<T>, component?: TuiMultiSelectComponent<T>): null;\n    transform(\n        items: ReadonlyArray<T> | null,\n        {value, identityMatcher}: TuiMultiSelectComponent<T> = this.component,\n    ): ReadonlyArray<T> | null {\n        return items && this.filter(items, value, identityMatcher);\n    }\n\n    @tuiPure\n    private filter(\n        items: ReadonlyArray<T>,\n        value: ReadonlyArray<T>,\n        matcher: TuiIdentityMatcher<T>,\n    ): ReadonlyArray<T> {\n        return items.filter(item => value.every(selected => !matcher(selected, item)));\n    }\n}\n","import {Directive} from '@angular/core';\nimport {TUI_OPTION_CONTENT} from '@taiga-ui/core';\n\n// TODO: Remove and switch to viewProviders when Angular is updated to Ivy\n/** @deprecated */\n@Directive({\n    selector: '[tuiMultiSelectGroupReset]',\n    providers: [\n        {\n            provide: TUI_OPTION_CONTENT,\n            useValue: null,\n        },\n    ],\n})\nexport class TuiMultiSelectGroupResetDirective {}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    Inject,\n    Input,\n    QueryList,\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {\n    EMPTY_QUERY,\n    getOriginalArrayFromQueryList,\n    isPresent,\n    itemsQueryListObservable,\n    TUI_DEFAULT_IDENTITY_MATCHER,\n    tuiDefaultProp,\n    TuiIdentityMatcher,\n    tuiPure,\n    tuiReplayedValueChangesFrom,\n} from '@taiga-ui/cdk';\nimport {\n    sizeBigger,\n    TUI_DATA_LIST_HOST,\n    TuiDataListHost,\n    TuiOptionComponent,\n    TuiSizeL,\n    TuiSizeXS,\n} from '@taiga-ui/core';\nimport {combineLatest, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n@Component({\n    selector: 'tui-opt-group[tuiMultiSelectGroup]',\n    templateUrl: './multi-select-group.template.html',\n    styleUrls: ['./multi-select-group.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TuiMultiSelectGroupComponent<T> {\n    @Input()\n    @tuiDefaultProp()\n    label = '';\n\n    @ContentChildren(TuiOptionComponent)\n    private readonly options: QueryList<TuiOptionComponent<T>> = EMPTY_QUERY;\n\n    constructor(\n        @Inject(TUI_DATA_LIST_HOST) private readonly host: TuiDataListHost<T>,\n        @Inject(NgControl) private readonly control: NgControl,\n    ) {}\n\n    get size(): TuiSizeXS | TuiSizeL {\n        return (this.options.first && this.options.first.size) || 'm';\n    }\n\n    get checkboxSize(): TuiSizeL {\n        return this.options.first && sizeBigger(this.options.first.size) ? 'l' : 'm';\n    }\n\n    @tuiPure\n    get empty$(): Observable<boolean> {\n        return itemsQueryListObservable(this.options).pipe(map(({length}) => !length));\n    }\n\n    @tuiPure\n    get disabled$(): Observable<boolean> {\n        return itemsQueryListObservable(this.options).pipe(\n            map(items => items.every(({disabled}) => disabled)),\n        );\n    }\n\n    @tuiPure\n    get value$(): Observable<boolean | null> {\n        return combineLatest(this.items$, this.valueChanges$).pipe(\n            map(([items, current]) => {\n                let result = false;\n\n                for (let i = 0; i < items.length; i++) {\n                    const selected = current.some(selected =>\n                        this.matcher(selected, items[i]),\n                    );\n\n                    if ((!selected && result) || (selected && !result && i)) {\n                        return null;\n                    }\n\n                    result = selected;\n                }\n\n                return result;\n            }),\n        );\n    }\n\n    onClick(checked: boolean | null) {\n        if (!this.control.control) {\n            return;\n        }\n\n        const controlValue: ReadonlyArray<T> = this.control.value || [];\n        const {values} = this;\n        const filtered = controlValue.filter(current =>\n            values.every(item => !this.matcher(current, item)),\n        );\n\n        this.control.control.setValue(checked ? filtered : [...filtered, ...values]);\n    }\n\n    private get values(): ReadonlyArray<T> {\n        return this.filter(getOriginalArrayFromQueryList(this.options));\n    }\n\n    private get matcher(): TuiIdentityMatcher<T> {\n        return this.host.identityMatcher || TUI_DEFAULT_IDENTITY_MATCHER;\n    }\n\n    @tuiPure\n    private get items$(): Observable<ReadonlyArray<T>> {\n        return itemsQueryListObservable(this.options).pipe(\n            map(options => options.map(({value}) => value).filter(isPresent)),\n        );\n    }\n\n    @tuiPure\n    private get valueChanges$(): Observable<ReadonlyArray<T>> {\n        return tuiReplayedValueChangesFrom<ReadonlyArray<T>>(this.control).pipe(\n            map(value => value || []),\n        );\n    }\n\n    @tuiPure\n    private filter(items: ReadonlyArray<TuiOptionComponent<T>>): ReadonlyArray<T> {\n        return items.map(({value}) => value).filter(isPresent);\n    }\n}\n","import {Directive, forwardRef, Optional} from '@angular/core';\nimport {NG_VALUE_ACCESSOR, NgControl} from '@angular/forms';\nimport {EMPTY_FUNCTION} from '@taiga-ui/cdk';\nimport {TUI_DATA_LIST_HOST, TUI_OPTION_CONTENT, TuiDataListHost} from '@taiga-ui/core';\nimport {TUI_MULTI_SELECT_OPTION} from '@taiga-ui/kit/components/multi-select-option';\nimport {TuiMultiSelectComponent} from '../multi-select.component';\n\nexport function hostFallbackFactory<T>(\n    control: NgControl,\n    host: TuiDataListHost<T> | null,\n): TuiDataListHost<T> {\n    return (\n        host || {\n            handleOption: option => {\n                if (!control.control) {\n                    return;\n                }\n\n                const value = control.value || [];\n                const index = value.indexOf(option);\n\n                control.control.setValue(\n                    index === -1\n                        ? [...value, option]\n                        : [...value.slice(0, index), ...value.slice(index + 1)],\n                );\n            },\n        }\n    );\n}\n\n@Directive({\n    selector: '[tuiMultiSelectGroup]',\n    providers: [\n        {\n            provide: TUI_OPTION_CONTENT,\n            useValue: TUI_MULTI_SELECT_OPTION,\n        },\n        {\n            provide: TUI_DATA_LIST_HOST,\n            deps: [\n                NgControl,\n                [new Optional(), forwardRef(() => TuiMultiSelectComponent)],\n            ],\n            useFactory: hostFallbackFactory,\n        },\n        {\n            provide: NG_VALUE_ACCESSOR,\n            multi: true,\n            useValue: {\n                writeValue: EMPTY_FUNCTION,\n                registerOnChange: EMPTY_FUNCTION,\n                registerOnTouched: EMPTY_FUNCTION,\n            },\n        },\n    ],\n})\nexport class TuiMultiSelectGroupDirective {}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {\n    TuiActiveZoneModule,\n    TuiHoveredModule,\n    TuiLetModule,\n    TuiMapperPipeModule,\n    TuiPreventDefaultModule,\n} from '@taiga-ui/cdk';\nimport {\n    TuiDataListModule,\n    TuiHostedDropdownModule,\n    TuiPrimitiveCheckboxModule,\n    TuiSvgModule,\n} from '@taiga-ui/core';\nimport {TuiInputTagModule} from '@taiga-ui/kit/components/input-tag';\nimport {TuiMultiSelectOptionModule} from '@taiga-ui/kit/components/multi-select-option';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiHideSelectedPipe} from './hide-selected.pipe';\nimport {TuiMultiSelectGroupResetDirective} from './multi-select-group/multi-select-group-reset.directive';\nimport {TuiMultiSelectGroupComponent} from './multi-select-group/multi-select-group.component';\nimport {TuiMultiSelectGroupDirective} from './multi-select-group/multi-select-group.directive';\nimport {TuiMultiSelectComponent} from './multi-select.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        PolymorpheusModule,\n        TuiPreventDefaultModule,\n        TuiActiveZoneModule,\n        TuiLetModule,\n        TuiMapperPipeModule,\n        TuiHoveredModule,\n        TuiSvgModule,\n        TuiHostedDropdownModule,\n        TuiInputTagModule,\n        TuiMultiSelectOptionModule,\n        TuiPrimitiveCheckboxModule,\n        TuiDataListModule,\n    ],\n    declarations: [\n        TuiMultiSelectComponent,\n        TuiMultiSelectGroupComponent,\n        TuiMultiSelectGroupDirective,\n        TuiMultiSelectGroupResetDirective,\n        TuiHideSelectedPipe,\n    ],\n    exports: [\n        TuiMultiSelectComponent,\n        TuiMultiSelectGroupComponent,\n        TuiMultiSelectGroupDirective,\n        TuiHideSelectedPipe,\n    ],\n})\nexport class TuiMultiSelectModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}