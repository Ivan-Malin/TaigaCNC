{"version":3,"file":"taiga-ui-kit-components-stepper.js","sources":["ng://@taiga-ui/kit/components/stepper/stepper.component.ts","ng://@taiga-ui/kit/components/stepper/step/step.component.ts","ng://@taiga-ui/kit/components/stepper/stepper.module.ts","ng://@taiga-ui/kit/components/stepper/taiga-ui-kit-components-stepper.ts"],"sourcesContent":["import {\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    HostListener,\n    Input,\n    Output,\n    QueryList,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    getOriginalArrayFromQueryList,\n    itemsQueryListObservable,\n    moveFocus,\n    tuiDefaultProp,\n    tuiPure,\n} from '@taiga-ui/cdk';\nimport {TuiOrientation} from '@taiga-ui/core';\nimport {Observable} from 'rxjs';\nimport {delay} from 'rxjs/operators';\nimport {TuiStepComponent} from './step/step.component';\n\n@Component({\n    selector: 'tui-stepper, nav[tuiStepper]',\n    templateUrl: './stepper.template.html',\n    styleUrls: ['./stepper.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        class: 'tui-zero-scrollbar',\n    },\n})\nexport class TuiStepperComponent {\n    @Input()\n    @HostBinding('attr.data-orientation')\n    @tuiDefaultProp()\n    orientation: TuiOrientation = TuiOrientation.Horizontal;\n\n    @Input()\n    @tuiDefaultProp()\n    activeItemIndex = 0;\n\n    @Output()\n    readonly activeItemIndexChange = new EventEmitter<number>();\n\n    @ContentChildren(forwardRef(() => TuiStepComponent), {read: ElementRef})\n    private readonly steps: QueryList<ElementRef<HTMLElement>> = EMPTY_QUERY;\n\n    @tuiPure\n    get changes$(): Observable<unknown> {\n        // Delay is required to trigger change detection after steps are rendered\n        // so they can update their \"active\" status\n        return itemsQueryListObservable(this.steps).pipe(delay(0));\n    }\n\n    indexOf(step: HTMLElement): number {\n        return getOriginalArrayFromQueryList(this.steps).findIndex(\n            ({nativeElement}) => nativeElement === step,\n        );\n    }\n\n    isActive(index: number): boolean {\n        return index === this.activeItemIndex;\n    }\n\n    activate(index: number) {\n        if (this.activeItemIndex === index) {\n            return;\n        }\n\n        this.activeItemIndex = index;\n        this.activeItemIndexChange.emit(index);\n    }\n\n    @HostListener('keydown.arrowRight', ['$event', '1'])\n    @HostListener('keydown.arrowLeft', ['$event', '-1'])\n    onHorizontal(event: Event, step: number) {\n        if (this.orientation !== TuiOrientation.Horizontal || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    @HostListener('keydown.arrowDown', ['$event', '1'])\n    @HostListener('keydown.arrowUp', ['$event', '-1'])\n    onVertical(event: Event, step: number) {\n        if (this.orientation !== TuiOrientation.Vertical || !event.target) {\n            return;\n        }\n\n        event.preventDefault();\n        this.moveFocus(event.target, step);\n    }\n\n    private moveFocus(current: EventTarget, step: number) {\n        const steps = getOriginalArrayFromQueryList(this.steps).map(\n            ({nativeElement}) => nativeElement,\n        );\n\n        moveFocus(steps.indexOf(current as HTMLElement), steps, step);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Inject,\n    Input,\n} from '@angular/core';\nimport {\n    identity,\n    tuiDefaultProp,\n    TuiDestroyService,\n    TuiFocusVisibleService,\n} from '@taiga-ui/cdk';\nimport {TuiOrientation, TuiRouterLinkActiveService} from '@taiga-ui/core';\nimport {TuiStepState} from '@taiga-ui/kit/enums';\nimport {Observable} from 'rxjs';\nimport {filter} from 'rxjs/operators';\nimport {TuiStepperComponent} from '../stepper.component';\n\n@Component({\n    selector:\n        'button[tuiStep], a[tuiStep]:not([routerLink]), a[tuiStep][routerLink][routerLinkActive]',\n    templateUrl: './step.template.html',\n    styleUrls: ['./step.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService, TuiRouterLinkActiveService, TuiFocusVisibleService],\n    host: {\n        type: 'button',\n    },\n})\nexport class TuiStepComponent {\n    @Input()\n    @HostBinding('attr.data-state')\n    @tuiDefaultProp()\n    state = TuiStepState.Normal;\n\n    @Input()\n    @tuiDefaultProp()\n    icon = '';\n\n    @HostBinding('class._focus-visible')\n    focusVisible = false;\n\n    constructor(\n        @Inject(TuiFocusVisibleService) focusVisible$: TuiFocusVisibleService,\n        @Inject(TuiRouterLinkActiveService) routerLinkActive$: Observable<boolean>,\n        @Inject(TuiStepperComponent) private readonly stepper: TuiStepperComponent,\n        @Inject(ElementRef) private readonly elementRef: ElementRef<HTMLElement>,\n    ) {\n        routerLinkActive$.pipe(filter(identity)).subscribe(() => {\n            this.activate();\n        });\n\n        focusVisible$.subscribe(visible => {\n            this.focusVisible = visible;\n        });\n    }\n\n    @HostBinding('class._active')\n    get isActive(): boolean {\n        return this.stepper.isActive(this.index);\n    }\n\n    @HostBinding('class._vertical')\n    get isVertical(): boolean {\n        return this.stepper.orientation === TuiOrientation.Vertical;\n    }\n\n    @HostBinding('tabIndex')\n    get tabIndex(): number {\n        return this.isActive ? 0 : -1;\n    }\n\n    get index(): number {\n        return this.stepper.indexOf(this.elementRef.nativeElement);\n    }\n\n    @HostListener('click')\n    activate() {\n        this.stepper.activate(this.index);\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {TuiSvgModule} from '@taiga-ui/core';\nimport {TuiStepComponent} from './step/step.component';\nimport {TuiStepperComponent} from './stepper.component';\n\n@NgModule({\n    imports: [CommonModule, TuiSvgModule],\n    declarations: [TuiStepperComponent, TuiStepComponent],\n    exports: [TuiStepperComponent, TuiStepComponent],\n})\nexport class TuiStepperModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}