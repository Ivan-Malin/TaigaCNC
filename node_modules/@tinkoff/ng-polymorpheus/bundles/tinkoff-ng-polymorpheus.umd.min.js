!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("@tinkoff/ng-polymorpheus",["exports","@angular/core","@angular/common"],e):e(((t=t||self).tinkoff=t.tinkoff||{},t.tinkoff["ng-polymorpheus"]={}),t.ng.core,t.ng.common)}(this,(function(t,e,n){"use strict";var o=new e.InjectionToken("Context from polymorpheus-outlet"),r=function(){function t(t,e){void 0===e&&(e=null),this.component=t,this.injector=e}return t.prototype.createInjector=function(t,n){return e.Injector.create({parent:this.injector||t,providers:[{provide:o,useValue:n}]})},t}();var c=function(){function t(t,e){this.template=t,this.changeDetectorRef=e}return t.prototype.check=function(){this.changeDetectorRef.markForCheck()},t.decorators=[{type:e.Directive,args:[{selector:"ng-template[polymorpheus]",exportAs:"polymorpheus"}]}],t.ctorParameters=function(){return[{type:e.TemplateRef,decorators:[{type:e.Inject,args:[e.TemplateRef]},{type:e.Self}]},{type:e.ChangeDetectorRef,decorators:[{type:e.Inject,args:[e.ChangeDetectorRef]}]}]},t}();var i=function(){function t(){this.template=null,this.content=null}return Object.defineProperty(t.prototype,"primitive",{get:function(){return!this.content||this.isAdvanced(this.content)?"":"function"==typeof this.content?this.content(this.context):this.content},enumerable:!0,configurable:!0}),t.prototype.isAdvanced=function(t){return function(t){return a(t)||t instanceof e.TemplateRef}(t)||p(t)},t.prototype.getTemplate=function(t,e){return p(t)?e:a(t)?t.template:t},t.prototype.guard=function(t){return p(t)},t.prototype.ngOnChanges=function(t){var n=t.content,o=t.context,r=!n&&o&&this.outlet&&this.outlet._componentRef;r&&r.injector.get(e.ChangeDetectorRef).markForCheck()},t.prototype.ngDoCheck=function(){a(this.content)&&this.content.check()},t.decorators=[{type:e.Component,args:[{selector:"[polymorpheus-outlet]",template:'<ng-container\r\n    *ngIf="isAdvanced(content)"\r\n    #mutableContext="context"\r\n    context\r\n    [ngTemplateOutlet]="getTemplate(content, component)"\r\n    [ngTemplateOutletContext]="context"\r\n>\r\n    <ng-template #component>\r\n        <ng-container\r\n            *ngIf="guard(content)"\r\n            [ngComponentOutlet]="content.component"\r\n            [ngComponentOutletInjector]="content | injector : mutableContext.context"\r\n        ></ng-container>\r\n    </ng-template>\r\n</ng-container>\r\n<ng-container *ngIf="primitive">\r\n    <ng-container *ngIf="!template; else child">{{primitive}}</ng-container>\r\n    <ng-template #child>\r\n        <ng-container\r\n            [ngTemplateOutlet]="template"\r\n            [ngTemplateOutletContext]="{$implicit: primitive}"\r\n        ></ng-container>\r\n    </ng-template>\r\n</ng-container>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],t.propDecorators={template:[{type:e.ContentChild,args:[e.TemplateRef]}],outlet:[{type:e.ViewChild,args:[n.NgComponentOutlet]}],content:[{type:e.Input}],context:[{type:e.Input}]},t}();function a(t){return t instanceof c}function p(t){return t instanceof r}var u=function(){function t(t){this.viewContainerRef=t}return Object.defineProperty(t.prototype,"context",{get:function(){var t=this.viewContainerRef.get(0);return t&&t.context},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Directive,args:[{selector:"[context]",exportAs:"context"}]}],t.ctorParameters=function(){return[{type:e.ViewContainerRef,decorators:[{type:e.Inject,args:[e.ViewContainerRef]}]}]},t}();var s=function(){function t(t){this.injector=t}return t.prototype.transform=function(t,e){return t.createInjector(this.injector,e)},t.decorators=[{type:e.Pipe,args:[{name:"injector"}]}],t.ctorParameters=function(){return[{type:e.Injector,decorators:[{type:e.Inject,args:[e.Injector]}]}]},t}();var l=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[i,c,u,s],exports:[i,c]}]}],t}();t.POLYMORPHEUS_CONTEXT=o,t.PolymorpheusComponent=r,t.PolymorpheusModule=l,t.PolymorpheusOutletComponent=i,t.PolymorpheusTemplate=c,t.ɵa=u,t.ɵb=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=tinkoff-ng-polymorpheus.umd.min.js.map